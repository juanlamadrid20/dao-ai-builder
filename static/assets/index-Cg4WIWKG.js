(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function ai(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fp={exports:{}},li={},hp={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),Lv=Symbol.for("react.portal"),Mv=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Fv=Symbol.for("react.profiler"),zv=Symbol.for("react.provider"),Vv=Symbol.for("react.context"),Uv=Symbol.for("react.forward_ref"),Hv=Symbol.for("react.suspense"),qv=Symbol.for("react.memo"),Bv=Symbol.for("react.lazy"),Jm=Symbol.iterator;function Gv(e){return e===null||typeof e!="object"?null:(e=Jm&&e[Jm]||e["@@iterator"],typeof e=="function"?e:null)}var pp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gp=Object.assign,xp={};function ca(e,t,n){this.props=e,this.context=t,this.refs=xp,this.updater=n||pp}ca.prototype.isReactComponent={};ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vp(){}vp.prototype=ca.prototype;function Gu(e,t,n){this.props=e,this.context=t,this.refs=xp,this.updater=n||pp}var Wu=Gu.prototype=new vp;Wu.constructor=Gu;gp(Wu,ca.prototype);Wu.isPureReactComponent=!0;var Zm=Array.isArray,yp=Object.prototype.hasOwnProperty,Ku={current:null},bp={key:!0,ref:!0,__self:!0,__source:!0};function _p(e,t,n){var s,a={},l=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)yp.call(t,s)&&!bp.hasOwnProperty(s)&&(a[s]=t[s]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)a[s]===void 0&&(a[s]=i[s]);return{$$typeof:yl,type:e,key:l,ref:o,props:a,_owner:Ku.current}}function Wv(e,t){return{$$typeof:yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yu(e){return typeof e=="object"&&e!==null&&e.$$typeof===yl}function Kv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xm=/\/+/g;function Ri(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kv(""+e.key):t.toString(36)}function to(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yl:case Lv:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Ri(o,0):s,Zm(a)?(n="",e!=null&&(n=e.replace(Xm,"$&/")+"/"),to(a,t,n,"",function(d){return d})):a!=null&&(Yu(a)&&(a=Wv(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Xm,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",Zm(e))for(var i=0;i<e.length;i++){l=e[i];var c=s+Ri(l,i);o+=to(l,t,n,c,a)}else if(c=Gv(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=s+Ri(l,i++),o+=to(l,t,n,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $l(e,t,n){if(e==null)return e;var s=[],a=0;return to(e,s,"","",function(l){return t.call(n,l,a++)}),s}function Yv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},no={transition:null},Qv={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:no,ReactCurrentOwner:Ku};function jp(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:$l,forEach:function(e,t,n){$l(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $l(e,function(){t++}),t},toArray:function(e){return $l(e,function(t){return t})||[]},only:function(e){if(!Yu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=ca;Ne.Fragment=Mv;Ne.Profiler=Fv;Ne.PureComponent=Gu;Ne.StrictMode=Dv;Ne.Suspense=Hv;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qv;Ne.act=jp;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=gp({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ku.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)yp.call(t,c)&&!bp.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];s.children=i}return{$$typeof:yl,type:e.type,key:a,ref:l,props:s,_owner:o}};Ne.createContext=function(e){return e={$$typeof:Vv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zv,_context:e},e.Consumer=e};Ne.createElement=_p;Ne.createFactory=function(e){var t=_p.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:Uv,render:e}};Ne.isValidElement=Yu;Ne.lazy=function(e){return{$$typeof:Bv,_payload:{_status:-1,_result:e},_init:Yv}};Ne.memo=function(e,t){return{$$typeof:qv,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=no.transition;no.transition={};try{e()}finally{no.transition=t}};Ne.unstable_act=jp;Ne.useCallback=function(e,t){return Pt.current.useCallback(e,t)};Ne.useContext=function(e){return Pt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Pt.current.useEffect(e,t)};Ne.useId=function(){return Pt.current.useId()};Ne.useImperativeHandle=function(e,t,n){return Pt.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Pt.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return Pt.current.useReducer(e,t,n)};Ne.useRef=function(e){return Pt.current.useRef(e)};Ne.useState=function(e){return Pt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Pt.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Pt.current.useTransition()};Ne.version="18.3.1";hp.exports=Ne;var D=hp.exports;const Np=ai(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv=D,Zv=Symbol.for("react.element"),Xv=Symbol.for("react.fragment"),ey=Object.prototype.hasOwnProperty,ty=Jv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ny={key:!0,ref:!0,__self:!0,__source:!0};function wp(e,t,n){var s,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)ey.call(t,s)&&!ny.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Zv,type:e,key:l,ref:o,props:a,_owner:ty.current}}li.Fragment=Xv;li.jsx=wp;li.jsxs=wp;fp.exports=li;var r=fp.exports,Sc={},Sp={exports:{}},Yt={},kp={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,q){var U=z.length;z.push(q);e:for(;0<U;){var O=U-1>>>1,V=z[O];if(0<a(V,q))z[O]=q,z[U]=V,U=O;else break e}}function n(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var q=z[0],U=z.pop();if(U!==q){z[0]=U;e:for(var O=0,V=z.length,I=V>>>1;O<I;){var j=2*(O+1)-1,E=z[j],S=j+1,G=z[S];if(0>a(E,U))S<V&&0>a(G,E)?(z[O]=G,z[S]=U,O=S):(z[O]=E,z[j]=U,O=j);else if(S<V&&0>a(G,U))z[O]=G,z[S]=U,O=S;else break e}}return q}function a(z,q){var U=z.sortIndex-q.sortIndex;return U!==0?U:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],m=1,f=null,h=3,x=!1,p=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var q=n(d);q!==null;){if(q.callback===null)s(d);else if(q.startTime<=z)s(d),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(d)}}function C(z){if(y=!1,b(z),!p)if(n(c)!==null)p=!0,ie($);else{var q=n(d);q!==null&&te(C,q.startTime-z)}}function $(z,q){p=!1,y&&(y=!1,u(_),_=-1),x=!0;var U=h;try{for(b(q),f=n(c);f!==null&&(!(f.expirationTime>q)||z&&!w());){var O=f.callback;if(typeof O=="function"){f.callback=null,h=f.priorityLevel;var V=O(f.expirationTime<=q);q=e.unstable_now(),typeof V=="function"?f.callback=V:f===n(c)&&s(c),b(q)}else s(c);f=n(c)}if(f!==null)var I=!0;else{var j=n(d);j!==null&&te(C,j.startTime-q),I=!1}return I}finally{f=null,h=U,x=!1}}var M=!1,R=null,_=-1,k=5,T=-1;function w(){return!(e.unstable_now()-T<k)}function F(){if(R!==null){var z=e.unstable_now();T=z;var q=!0;try{q=R(!0,z)}finally{q?L():(M=!1,R=null)}}else M=!1}var L;if(typeof g=="function")L=function(){g(F)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,H=A.port2;A.port1.onmessage=F,L=function(){H.postMessage(null)}}else L=function(){v(F,0)};function ie(z){R=z,M||(M=!0,L())}function te(z,q){_=v(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||x||(p=!0,ie($))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var U=h;h=q;try{return z()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=h;h=z;try{return q()}finally{h=U}},e.unstable_scheduleCallback=function(z,q,U){var O=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=U+V,z={id:m++,callback:q,priorityLevel:z,startTime:U,expirationTime:V,sortIndex:-1},U>O?(z.sortIndex=U,t(d,z),n(c)===null&&z===n(d)&&(y?(u(_),_=-1):y=!0,te(C,U-O))):(z.sortIndex=V,t(c,z),p||x||(p=!0,ie($))),z},e.unstable_shouldYield=w,e.unstable_wrapCallback=function(z){var q=h;return function(){var U=h;h=q;try{return z.apply(this,arguments)}finally{h=U}}}})(Cp);kp.exports=Cp;var sy=kp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry=D,Kt=sy;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ep=new Set,Ka={};function gr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Ka[e]=t,e=0;e<t.length;e++)Ep.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kc=Object.prototype.hasOwnProperty,ay=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ef={},tf={};function ly(e){return kc.call(tf,e)?!0:kc.call(ef,e)?!1:ay.test(e)?tf[e]=!0:(ef[e]=!0,!1)}function oy(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iy(e,t,n,s){if(t===null||typeof t>"u"||oy(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,s,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qu=/[\-:]([a-z])/g;function Ju(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qu,Ju);ut[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qu,Ju);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qu,Ju);ut[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zu(e,t,n,s){var a=ut.hasOwnProperty(t)?ut[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iy(t,n,a,s)&&(n=null),s||a===null?ly(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ss=ry.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pl=Symbol.for("react.element"),kr=Symbol.for("react.portal"),Cr=Symbol.for("react.fragment"),Xu=Symbol.for("react.strict_mode"),Cc=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Pp=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),Ec=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),td=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),Op=Symbol.for("react.offscreen"),nf=Symbol.iterator;function pa(e){return e===null||typeof e!="object"?null:(e=nf&&e[nf]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Ai;function ka(e){if(Ai===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ai=t&&t[1]||""}return`
`+Ai+e}var Ti=!1;function Ii(e,t){if(!e||Ti)return"";Ti=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=s.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{Ti=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ka(e):""}function cy(e){switch(e.tag){case 5:return ka(e.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return e=Ii(e.type,!1),e;case 11:return e=Ii(e.type.render,!1),e;case 1:return e=Ii(e.type,!0),e;default:return""}}function Pc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cr:return"Fragment";case kr:return"Portal";case Cc:return"Profiler";case Xu:return"StrictMode";case Ec:return"Suspense";case $c:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pp:return(e.displayName||"Context")+".Consumer";case $p:return(e._context.displayName||"Context")+".Provider";case ed:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case td:return t=e.displayName||null,t!==null?t:Pc(e.type)||"Memo";case xs:t=e._payload,e=e._init;try{return Pc(e(t))}catch{}}return null}function uy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(t);case 8:return t===Xu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ts(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dy(e){var t=Rp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ol(e){e._valueTracker||(e._valueTracker=dy(e))}function Ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Rp(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function _o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oc(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sf(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Ts(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tp(e,t){t=t.checked,t!=null&&Zu(e,"checked",t,!1)}function Rc(e,t){Tp(e,t);var n=Ts(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ac(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ac(e,t.type,Ts(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ac(e,t,n){(t!=="number"||_o(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ca=Array.isArray;function Vr(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Ts(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Tc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function af(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Ca(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ts(n)}}function Ip(e,t){var n=Ts(t.value),s=Ts(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function lf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ic(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rl,Mp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ya(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},my=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(e){my.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ta[t]=Ta[e]})});function Dp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ta.hasOwnProperty(e)&&Ta[e]?(""+t).trim():t+"px"}function Fp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Dp(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var fy=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lc(e,t){if(t){if(fy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Mc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=null;function nd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fc=null,Ur=null,Hr=null;function of(e){if(e=jl(e)){if(typeof Fc!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=di(t),Fc(e.stateNode,e.type,t))}}function zp(e){Ur?Hr?Hr.push(e):Hr=[e]:Ur=e}function Vp(){if(Ur){var e=Ur,t=Hr;if(Hr=Ur=null,of(e),t)for(e=0;e<t.length;e++)of(t[e])}}function Up(e,t){return e(t)}function Hp(){}var Li=!1;function qp(e,t,n){if(Li)return e(t,n);Li=!0;try{return Up(e,t,n)}finally{Li=!1,(Ur!==null||Hr!==null)&&(Hp(),Vp())}}function Qa(e,t){var n=e.stateNode;if(n===null)return null;var s=di(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var zc=!1;if(Qn)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){zc=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{zc=!1}function hy(e,t,n,s,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Ia=!1,jo=null,No=!1,Vc=null,py={onError:function(e){Ia=!0,jo=e}};function gy(e,t,n,s,a,l,o,i,c){Ia=!1,jo=null,hy.apply(py,arguments)}function xy(e,t,n,s,a,l,o,i,c){if(gy.apply(this,arguments),Ia){if(Ia){var d=jo;Ia=!1,jo=null}else throw Error(Q(198));No||(No=!0,Vc=d)}}function xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cf(e){if(xr(e)!==e)throw Error(Q(188))}function vy(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return cf(a),e;if(l===s)return cf(a),t;l=l.sibling}throw Error(Q(188))}if(n.return!==s.return)n=a,s=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,s=l;break}if(i===s){o=!0,s=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,s=a;break}if(i===s){o=!0,s=l,n=a;break}i=i.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==s)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function Gp(e){return e=vy(e),e!==null?Wp(e):null}function Wp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wp(e);if(t!==null)return t;e=e.sibling}return null}var Kp=Kt.unstable_scheduleCallback,uf=Kt.unstable_cancelCallback,yy=Kt.unstable_shouldYield,by=Kt.unstable_requestPaint,We=Kt.unstable_now,_y=Kt.unstable_getCurrentPriorityLevel,sd=Kt.unstable_ImmediatePriority,Yp=Kt.unstable_UserBlockingPriority,wo=Kt.unstable_NormalPriority,jy=Kt.unstable_LowPriority,Qp=Kt.unstable_IdlePriority,oi=null,Rn=null;function Ny(e){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(oi,e,void 0,(e.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:ky,wy=Math.log,Sy=Math.LN2;function ky(e){return e>>>=0,e===0?32:31-(wy(e)/Sy|0)|0}var Al=64,Tl=4194304;function Ea(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function So(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var i=o&~a;i!==0?s=Ea(i):(l&=o,l!==0&&(s=Ea(l)))}else o=n&~a,o!==0?s=Ea(o):l!==0&&(s=Ea(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-xn(t),a=1<<n,s|=e[n],t&=~a;return s}function Cy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ey(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-xn(l),i=1<<o,c=a[o];c===-1?(!(i&n)||i&s)&&(a[o]=Cy(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function Uc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jp(){var e=Al;return Al<<=1,!(Al&4194240)&&(Al=64),e}function Mi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xn(t),e[t]=n}function $y(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-xn(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function rd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-xn(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Ce=0;function Zp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xp,ad,e0,t0,n0,Hc=!1,Il=[],ws=null,Ss=null,ks=null,Ja=new Map,Za=new Map,ys=[],Py="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function df(e,t){switch(e){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Ja.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(t.pointerId)}}function xa(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=jl(t),t!==null&&ad(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Oy(e,t,n,s,a){switch(t){case"focusin":return ws=xa(ws,e,t,n,s,a),!0;case"dragenter":return Ss=xa(Ss,e,t,n,s,a),!0;case"mouseover":return ks=xa(ks,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return Ja.set(l,xa(Ja.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Za.set(l,xa(Za.get(l)||null,e,t,n,s,a)),!0}return!1}function s0(e){var t=Xs(e.target);if(t!==null){var n=xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Bp(n),t!==null){e.blockedOn=t,n0(e.priority,function(){e0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function so(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Dc=s,n.target.dispatchEvent(s),Dc=null}else return t=jl(n),t!==null&&ad(t),e.blockedOn=n,!1;t.shift()}return!0}function mf(e,t,n){so(e)&&n.delete(t)}function Ry(){Hc=!1,ws!==null&&so(ws)&&(ws=null),Ss!==null&&so(Ss)&&(Ss=null),ks!==null&&so(ks)&&(ks=null),Ja.forEach(mf),Za.forEach(mf)}function va(e,t){e.blockedOn===t&&(e.blockedOn=null,Hc||(Hc=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,Ry)))}function Xa(e){function t(a){return va(a,e)}if(0<Il.length){va(Il[0],e);for(var n=1;n<Il.length;n++){var s=Il[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ws!==null&&va(ws,e),Ss!==null&&va(Ss,e),ks!==null&&va(ks,e),Ja.forEach(t),Za.forEach(t),n=0;n<ys.length;n++)s=ys[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<ys.length&&(n=ys[0],n.blockedOn===null);)s0(n),n.blockedOn===null&&ys.shift()}var qr=ss.ReactCurrentBatchConfig,ko=!0;function Ay(e,t,n,s){var a=Ce,l=qr.transition;qr.transition=null;try{Ce=1,ld(e,t,n,s)}finally{Ce=a,qr.transition=l}}function Ty(e,t,n,s){var a=Ce,l=qr.transition;qr.transition=null;try{Ce=4,ld(e,t,n,s)}finally{Ce=a,qr.transition=l}}function ld(e,t,n,s){if(ko){var a=qc(e,t,n,s);if(a===null)Wi(e,t,s,Co,n),df(e,s);else if(Oy(a,e,t,n,s))s.stopPropagation();else if(df(e,s),t&4&&-1<Py.indexOf(e)){for(;a!==null;){var l=jl(a);if(l!==null&&Xp(l),l=qc(e,t,n,s),l===null&&Wi(e,t,s,Co,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else Wi(e,t,s,null,n)}}var Co=null;function qc(e,t,n,s){if(Co=null,e=nd(s),e=Xs(e),e!==null)if(t=xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Co=e,null}function r0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_y()){case sd:return 1;case Yp:return 4;case wo:case jy:return 16;case Qp:return 536870912;default:return 16}default:return 16}}var _s=null,od=null,ro=null;function a0(){if(ro)return ro;var e,t=od,n=t.length,s,a="value"in _s?_s.value:_s.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[l-s];s++);return ro=a.slice(e,1<s?1-s:void 0)}function ao(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ll(){return!0}function ff(){return!1}function Qt(e){function t(n,s,a,l,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ll:ff,this.isPropagationStopped=ff,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),t}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=Qt(ua),_l=Ve({},ua,{view:0,detail:0}),Iy=Qt(_l),Di,Fi,ya,ii=Ve({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ya&&(ya&&e.type==="mousemove"?(Di=e.screenX-ya.screenX,Fi=e.screenY-ya.screenY):Fi=Di=0,ya=e),Di)},movementY:function(e){return"movementY"in e?e.movementY:Fi}}),hf=Qt(ii),Ly=Ve({},ii,{dataTransfer:0}),My=Qt(Ly),Dy=Ve({},_l,{relatedTarget:0}),zi=Qt(Dy),Fy=Ve({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),zy=Qt(Fy),Vy=Ve({},ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uy=Qt(Vy),Hy=Ve({},ua,{data:0}),pf=Qt(Hy),qy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},By={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gy[e])?!!t[e]:!1}function cd(){return Wy}var Ky=Ve({},_l,{key:function(e){if(e.key){var t=qy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ao(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?By[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(e){return e.type==="keypress"?ao(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ao(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yy=Qt(Ky),Qy=Ve({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=Qt(Qy),Jy=Ve({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),Zy=Qt(Jy),Xy=Ve({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),eb=Qt(Xy),tb=Ve({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nb=Qt(tb),sb=[9,13,27,32],ud=Qn&&"CompositionEvent"in window,La=null;Qn&&"documentMode"in document&&(La=document.documentMode);var rb=Qn&&"TextEvent"in window&&!La,l0=Qn&&(!ud||La&&8<La&&11>=La),xf=" ",vf=!1;function o0(e,t){switch(e){case"keyup":return sb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Er=!1;function ab(e,t){switch(e){case"compositionend":return i0(t);case"keypress":return t.which!==32?null:(vf=!0,xf);case"textInput":return e=t.data,e===xf&&vf?null:e;default:return null}}function lb(e,t){if(Er)return e==="compositionend"||!ud&&o0(e,t)?(e=a0(),ro=od=_s=null,Er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l0&&t.locale!=="ko"?null:t.data;default:return null}}var ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ob[e.type]:t==="textarea"}function c0(e,t,n,s){zp(s),t=Eo(t,"onChange"),0<t.length&&(n=new id("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ma=null,el=null;function ib(e){b0(e,0)}function ci(e){var t=Or(e);if(Ap(t))return e}function cb(e,t){if(e==="change")return t}var u0=!1;if(Qn){var Vi;if(Qn){var Ui="oninput"in document;if(!Ui){var bf=document.createElement("div");bf.setAttribute("oninput","return;"),Ui=typeof bf.oninput=="function"}Vi=Ui}else Vi=!1;u0=Vi&&(!document.documentMode||9<document.documentMode)}function _f(){Ma&&(Ma.detachEvent("onpropertychange",d0),el=Ma=null)}function d0(e){if(e.propertyName==="value"&&ci(el)){var t=[];c0(t,el,e,nd(e)),qp(ib,t)}}function ub(e,t,n){e==="focusin"?(_f(),Ma=t,el=n,Ma.attachEvent("onpropertychange",d0)):e==="focusout"&&_f()}function db(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ci(el)}function mb(e,t){if(e==="click")return ci(t)}function fb(e,t){if(e==="input"||e==="change")return ci(t)}function hb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _n=typeof Object.is=="function"?Object.is:hb;function tl(e,t){if(_n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!kc.call(t,a)||!_n(e[a],t[a]))return!1}return!0}function jf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nf(e,t){var n=jf(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jf(n)}}function m0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function f0(){for(var e=window,t=_o();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_o(e.document)}return t}function dd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function pb(e){var t=f0(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&m0(n.ownerDocument.documentElement,n)){if(s!==null&&dd(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Nf(n,l);var o=Nf(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gb=Qn&&"documentMode"in document&&11>=document.documentMode,$r=null,Bc=null,Da=null,Gc=!1;function wf(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gc||$r==null||$r!==_o(s)||(s=$r,"selectionStart"in s&&dd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Da&&tl(Da,s)||(Da=s,s=Eo(Bc,"onSelect"),0<s.length&&(t=new id("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=$r)))}function Ml(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},Hi={},h0={};Qn&&(h0=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function ui(e){if(Hi[e])return Hi[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in h0)return Hi[e]=t[n];return e}var p0=ui("animationend"),g0=ui("animationiteration"),x0=ui("animationstart"),v0=ui("transitionend"),y0=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(e,t){y0.set(e,t),gr(t,[e])}for(var qi=0;qi<Sf.length;qi++){var Bi=Sf[qi],xb=Bi.toLowerCase(),vb=Bi[0].toUpperCase()+Bi.slice(1);Ds(xb,"on"+vb)}Ds(p0,"onAnimationEnd");Ds(g0,"onAnimationIteration");Ds(x0,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(v0,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yb=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function kf(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,xy(s,t,void 0,e),e.currentTarget=null}function b0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var o=s.length-1;0<=o;o--){var i=s[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;kf(a,i,d),l=c}else for(o=0;o<s.length;o++){if(i=s[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;kf(a,i,d),l=c}}}if(No)throw e=Vc,No=!1,Vc=null,e}function Re(e,t){var n=t[Jc];n===void 0&&(n=t[Jc]=new Set);var s=e+"__bubble";n.has(s)||(_0(t,e,2,!1),n.add(s))}function Gi(e,t,n){var s=0;t&&(s|=4),_0(n,e,s,t)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function nl(e){if(!e[Dl]){e[Dl]=!0,Ep.forEach(function(n){n!=="selectionchange"&&(yb.has(n)||Gi(n,!1,e),Gi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dl]||(t[Dl]=!0,Gi("selectionchange",!1,t))}}function _0(e,t,n,s){switch(r0(t)){case 1:var a=Ay;break;case 4:a=Ty;break;default:a=ld}n=a.bind(null,t,n,e),a=void 0,!zc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wi(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var i=s.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=Xs(i),o===null)return;if(c=o.tag,c===5||c===6){s=l=o;continue e}i=i.parentNode}}s=s.return}qp(function(){var d=l,m=nd(n),f=[];e:{var h=y0.get(e);if(h!==void 0){var x=id,p=e;switch(e){case"keypress":if(ao(n)===0)break e;case"keydown":case"keyup":x=Yy;break;case"focusin":p="focus",x=zi;break;case"focusout":p="blur",x=zi;break;case"beforeblur":case"afterblur":x=zi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Zy;break;case p0:case g0:case x0:x=zy;break;case v0:x=eb;break;case"scroll":x=Iy;break;case"wheel":x=nb;break;case"copy":case"cut":case"paste":x=Uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=gf}var y=(t&4)!==0,v=!y&&e==="scroll",u=y?h!==null?h+"Capture":null:h;y=[];for(var g=d,b;g!==null;){b=g;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,u!==null&&(C=Qa(g,u),C!=null&&y.push(sl(g,C,b)))),v)break;g=g.return}0<y.length&&(h=new x(h,p,null,n,m),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==Dc&&(p=n.relatedTarget||n.fromElement)&&(Xs(p)||p[Jn]))break e;if((x||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,x?(p=n.relatedTarget||n.toElement,x=d,p=p?Xs(p):null,p!==null&&(v=xr(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(x=null,p=d),x!==p)){if(y=hf,C="onMouseLeave",u="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=gf,C="onPointerLeave",u="onPointerEnter",g="pointer"),v=x==null?h:Or(x),b=p==null?h:Or(p),h=new y(C,g+"leave",x,n,m),h.target=v,h.relatedTarget=b,C=null,Xs(m)===d&&(y=new y(u,g+"enter",p,n,m),y.target=b,y.relatedTarget=v,C=y),v=C,x&&p)t:{for(y=x,u=p,g=0,b=y;b;b=yr(b))g++;for(b=0,C=u;C;C=yr(C))b++;for(;0<g-b;)y=yr(y),g--;for(;0<b-g;)u=yr(u),b--;for(;g--;){if(y===u||u!==null&&y===u.alternate)break t;y=yr(y),u=yr(u)}y=null}else y=null;x!==null&&Cf(f,h,x,y,!1),p!==null&&v!==null&&Cf(f,v,p,y,!0)}}e:{if(h=d?Or(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var $=cb;else if(yf(h))if(u0)$=fb;else{$=db;var M=ub}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&($=mb);if($&&($=$(e,d))){c0(f,$,n,m);break e}M&&M(e,h,d),e==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&Ac(h,"number",h.value)}switch(M=d?Or(d):window,e){case"focusin":(yf(M)||M.contentEditable==="true")&&($r=M,Bc=d,Da=null);break;case"focusout":Da=Bc=$r=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,wf(f,n,m);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":wf(f,n,m)}var R;if(ud)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Er?o0(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(l0&&n.locale!=="ko"&&(Er||_!=="onCompositionStart"?_==="onCompositionEnd"&&Er&&(R=a0()):(_s=m,od="value"in _s?_s.value:_s.textContent,Er=!0)),M=Eo(d,_),0<M.length&&(_=new pf(_,e,null,n,m),f.push({event:_,listeners:M}),R?_.data=R:(R=i0(n),R!==null&&(_.data=R)))),(R=rb?ab(e,n):lb(e,n))&&(d=Eo(d,"onBeforeInput"),0<d.length&&(m=new pf("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:d}),m.data=R))}b0(f,t)})}function sl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Eo(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Qa(e,n),l!=null&&s.unshift(sl(e,l,a)),l=Qa(e,t),l!=null&&s.push(sl(e,l,a))),e=e.return}return s}function yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cf(e,t,n,s,a){for(var l=t._reactName,o=[];n!==null&&n!==s;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===s)break;i.tag===5&&d!==null&&(i=d,a?(c=Qa(n,l),c!=null&&o.unshift(sl(n,c,i))):a||(c=Qa(n,l),c!=null&&o.push(sl(n,c,i)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var bb=/\r\n?/g,_b=/\u0000|\uFFFD/g;function Ef(e){return(typeof e=="string"?e:""+e).replace(bb,`
`).replace(_b,"")}function Fl(e,t,n){if(t=Ef(t),Ef(e)!==t&&n)throw Error(Q(425))}function $o(){}var Wc=null,Kc=null;function Yc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,jb=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,Nb=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(wb)}:Qc;function wb(e){setTimeout(function(){throw e})}function Ki(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Xa(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Xa(t)}function Cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Pf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Sn="__reactFiber$"+da,rl="__reactProps$"+da,Jn="__reactContainer$"+da,Jc="__reactEvents$"+da,Sb="__reactListeners$"+da,kb="__reactHandles$"+da;function Xs(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jn]||n[Sn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pf(e);e!==null;){if(n=e[Sn])return n;e=Pf(e)}return t}e=n,n=e.parentNode}return null}function jl(e){return e=e[Sn]||e[Jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function di(e){return e[rl]||null}var Zc=[],Rr=-1;function Fs(e){return{current:e}}function Te(e){0>Rr||(e.current=Zc[Rr],Zc[Rr]=null,Rr--)}function Oe(e,t){Rr++,Zc[Rr]=e.current,e.current=t}var Is={},xt=Fs(Is),Ft=Fs(!1),or=Is;function Qr(e,t){var n=e.type.contextTypes;if(!n)return Is;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zt(e){return e=e.childContextTypes,e!=null}function Po(){Te(Ft),Te(xt)}function Of(e,t,n){if(xt.current!==Is)throw Error(Q(168));Oe(xt,t),Oe(Ft,n)}function j0(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Q(108,uy(e)||"Unknown",a));return Ve({},n,s)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,or=xt.current,Oe(xt,e),Oe(Ft,Ft.current),!0}function Rf(e,t,n){var s=e.stateNode;if(!s)throw Error(Q(169));n?(e=j0(e,t,or),s.__reactInternalMemoizedMergedChildContext=e,Te(Ft),Te(xt),Oe(xt,e)):Te(Ft),Oe(Ft,n)}var Hn=null,mi=!1,Yi=!1;function N0(e){Hn===null?Hn=[e]:Hn.push(e)}function Cb(e){mi=!0,N0(e)}function zs(){if(!Yi&&Hn!==null){Yi=!0;var e=0,t=Ce;try{var n=Hn;for(Ce=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Hn=null,mi=!1}catch(a){throw Hn!==null&&(Hn=Hn.slice(e+1)),Kp(sd,zs),a}finally{Ce=t,Yi=!1}}return null}var Ar=[],Tr=0,Ro=null,Ao=0,Zt=[],Xt=0,ir=null,Bn=1,Gn="";function Ks(e,t){Ar[Tr++]=Ao,Ar[Tr++]=Ro,Ro=e,Ao=t}function w0(e,t,n){Zt[Xt++]=Bn,Zt[Xt++]=Gn,Zt[Xt++]=ir,ir=e;var s=Bn;e=Gn;var a=32-xn(s)-1;s&=~(1<<a),n+=1;var l=32-xn(t)+a;if(30<l){var o=a-a%5;l=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Bn=1<<32-xn(t)+a|n<<a|s,Gn=l+e}else Bn=1<<l|n<<a|s,Gn=e}function md(e){e.return!==null&&(Ks(e,1),w0(e,1,0))}function fd(e){for(;e===Ro;)Ro=Ar[--Tr],Ar[Tr]=null,Ao=Ar[--Tr],Ar[Tr]=null;for(;e===ir;)ir=Zt[--Xt],Zt[Xt]=null,Gn=Zt[--Xt],Zt[Xt]=null,Bn=Zt[--Xt],Zt[Xt]=null}var Wt=null,Gt=null,Le=!1,pn=null;function S0(e,t){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Af(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Gt=Cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ir!==null?{id:Bn,overflow:Gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wt=e,Gt=null,!0):!1;default:return!1}}function Xc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eu(e){if(Le){var t=Gt;if(t){var n=t;if(!Af(e,t)){if(Xc(e))throw Error(Q(418));t=Cs(n.nextSibling);var s=Wt;t&&Af(e,t)?S0(s,n):(e.flags=e.flags&-4097|2,Le=!1,Wt=e)}}else{if(Xc(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Le=!1,Wt=e}}}function Tf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function zl(e){if(e!==Wt)return!1;if(!Le)return Tf(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yc(e.type,e.memoizedProps)),t&&(t=Gt)){if(Xc(e))throw k0(),Error(Q(418));for(;t;)S0(e,t),t=Cs(t.nextSibling)}if(Tf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gt=Cs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Wt?Cs(e.stateNode.nextSibling):null;return!0}function k0(){for(var e=Gt;e;)e=Cs(e.nextSibling)}function Jr(){Gt=Wt=null,Le=!1}function hd(e){pn===null?pn=[e]:pn.push(e)}var Eb=ss.ReactCurrentBatchConfig;function ba(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var s=n.stateNode}if(!s)throw Error(Q(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function Vl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function If(e){var t=e._init;return t(e._payload)}function C0(e){function t(u,g){if(e){var b=u.deletions;b===null?(u.deletions=[g],u.flags|=16):b.push(g)}}function n(u,g){if(!e)return null;for(;g!==null;)t(u,g),g=g.sibling;return null}function s(u,g){for(u=new Map;g!==null;)g.key!==null?u.set(g.key,g):u.set(g.index,g),g=g.sibling;return u}function a(u,g){return u=Os(u,g),u.index=0,u.sibling=null,u}function l(u,g,b){return u.index=b,e?(b=u.alternate,b!==null?(b=b.index,b<g?(u.flags|=2,g):b):(u.flags|=2,g)):(u.flags|=1048576,g)}function o(u){return e&&u.alternate===null&&(u.flags|=2),u}function i(u,g,b,C){return g===null||g.tag!==6?(g=nc(b,u.mode,C),g.return=u,g):(g=a(g,b),g.return=u,g)}function c(u,g,b,C){var $=b.type;return $===Cr?m(u,g,b.props.children,C,b.key):g!==null&&(g.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===xs&&If($)===g.type)?(C=a(g,b.props),C.ref=ba(u,g,b),C.return=u,C):(C=fo(b.type,b.key,b.props,null,u.mode,C),C.ref=ba(u,g,b),C.return=u,C)}function d(u,g,b,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=sc(b,u.mode,C),g.return=u,g):(g=a(g,b.children||[]),g.return=u,g)}function m(u,g,b,C,$){return g===null||g.tag!==7?(g=ar(b,u.mode,C,$),g.return=u,g):(g=a(g,b),g.return=u,g)}function f(u,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=nc(""+g,u.mode,b),g.return=u,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Pl:return b=fo(g.type,g.key,g.props,null,u.mode,b),b.ref=ba(u,null,g),b.return=u,b;case kr:return g=sc(g,u.mode,b),g.return=u,g;case xs:var C=g._init;return f(u,C(g._payload),b)}if(Ca(g)||pa(g))return g=ar(g,u.mode,b,null),g.return=u,g;Vl(u,g)}return null}function h(u,g,b,C){var $=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return $!==null?null:i(u,g,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pl:return b.key===$?c(u,g,b,C):null;case kr:return b.key===$?d(u,g,b,C):null;case xs:return $=b._init,h(u,g,$(b._payload),C)}if(Ca(b)||pa(b))return $!==null?null:m(u,g,b,C,null);Vl(u,b)}return null}function x(u,g,b,C,$){if(typeof C=="string"&&C!==""||typeof C=="number")return u=u.get(b)||null,i(g,u,""+C,$);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Pl:return u=u.get(C.key===null?b:C.key)||null,c(g,u,C,$);case kr:return u=u.get(C.key===null?b:C.key)||null,d(g,u,C,$);case xs:var M=C._init;return x(u,g,b,M(C._payload),$)}if(Ca(C)||pa(C))return u=u.get(b)||null,m(g,u,C,$,null);Vl(g,C)}return null}function p(u,g,b,C){for(var $=null,M=null,R=g,_=g=0,k=null;R!==null&&_<b.length;_++){R.index>_?(k=R,R=null):k=R.sibling;var T=h(u,R,b[_],C);if(T===null){R===null&&(R=k);break}e&&R&&T.alternate===null&&t(u,R),g=l(T,g,_),M===null?$=T:M.sibling=T,M=T,R=k}if(_===b.length)return n(u,R),Le&&Ks(u,_),$;if(R===null){for(;_<b.length;_++)R=f(u,b[_],C),R!==null&&(g=l(R,g,_),M===null?$=R:M.sibling=R,M=R);return Le&&Ks(u,_),$}for(R=s(u,R);_<b.length;_++)k=x(R,u,_,b[_],C),k!==null&&(e&&k.alternate!==null&&R.delete(k.key===null?_:k.key),g=l(k,g,_),M===null?$=k:M.sibling=k,M=k);return e&&R.forEach(function(w){return t(u,w)}),Le&&Ks(u,_),$}function y(u,g,b,C){var $=pa(b);if(typeof $!="function")throw Error(Q(150));if(b=$.call(b),b==null)throw Error(Q(151));for(var M=$=null,R=g,_=g=0,k=null,T=b.next();R!==null&&!T.done;_++,T=b.next()){R.index>_?(k=R,R=null):k=R.sibling;var w=h(u,R,T.value,C);if(w===null){R===null&&(R=k);break}e&&R&&w.alternate===null&&t(u,R),g=l(w,g,_),M===null?$=w:M.sibling=w,M=w,R=k}if(T.done)return n(u,R),Le&&Ks(u,_),$;if(R===null){for(;!T.done;_++,T=b.next())T=f(u,T.value,C),T!==null&&(g=l(T,g,_),M===null?$=T:M.sibling=T,M=T);return Le&&Ks(u,_),$}for(R=s(u,R);!T.done;_++,T=b.next())T=x(R,u,_,T.value,C),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?_:T.key),g=l(T,g,_),M===null?$=T:M.sibling=T,M=T);return e&&R.forEach(function(F){return t(u,F)}),Le&&Ks(u,_),$}function v(u,g,b,C){if(typeof b=="object"&&b!==null&&b.type===Cr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Pl:e:{for(var $=b.key,M=g;M!==null;){if(M.key===$){if($=b.type,$===Cr){if(M.tag===7){n(u,M.sibling),g=a(M,b.props.children),g.return=u,u=g;break e}}else if(M.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===xs&&If($)===M.type){n(u,M.sibling),g=a(M,b.props),g.ref=ba(u,M,b),g.return=u,u=g;break e}n(u,M);break}else t(u,M);M=M.sibling}b.type===Cr?(g=ar(b.props.children,u.mode,C,b.key),g.return=u,u=g):(C=fo(b.type,b.key,b.props,null,u.mode,C),C.ref=ba(u,g,b),C.return=u,u=C)}return o(u);case kr:e:{for(M=b.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(u,g.sibling),g=a(g,b.children||[]),g.return=u,u=g;break e}else{n(u,g);break}else t(u,g);g=g.sibling}g=sc(b,u.mode,C),g.return=u,u=g}return o(u);case xs:return M=b._init,v(u,g,M(b._payload),C)}if(Ca(b))return p(u,g,b,C);if(pa(b))return y(u,g,b,C);Vl(u,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(u,g.sibling),g=a(g,b),g.return=u,u=g):(n(u,g),g=nc(b,u.mode,C),g.return=u,u=g),o(u)):n(u,g)}return v}var Zr=C0(!0),E0=C0(!1),To=Fs(null),Io=null,Ir=null,pd=null;function gd(){pd=Ir=Io=null}function xd(e){var t=To.current;Te(To),e._currentValue=t}function tu(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){Io=e,pd=Ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function rn(e){var t=e._currentValue;if(pd!==e)if(e={context:e,memoizedValue:t,next:null},Ir===null){if(Io===null)throw Error(Q(308));Ir=e,Io.dependencies={lanes:0,firstContext:e}}else Ir=Ir.next=e;return t}var er=null;function vd(e){er===null?er=[e]:er.push(e)}function $0(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,vd(t)):(n.next=a.next,a.next=n),t.interleaved=n,Zn(e,s)}function Zn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vs=!1;function yd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Es(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Se&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Zn(e,n)}return a=s.interleaved,a===null?(t.next=t,vd(s)):(t.next=a.next,a.next=t),s.interleaved=t,Zn(e,n)}function lo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,rd(e,n)}}function Lf(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,s){var a=e.updateQueue;vs=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==o&&(i===null?m.firstBaseUpdate=d:i.next=d,m.lastBaseUpdate=c))}if(l!==null){var f=a.baseState;o=0,m=d=c=null,i=l;do{var h=i.lane,x=i.eventTime;if((s&h)===h){m!==null&&(m=m.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,y=i;switch(h=t,x=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){f=p.call(x,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,h=typeof p=="function"?p.call(x,f,h):p,h==null)break e;f=Ve({},f,h);break e;case 2:vs=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[i]:h.push(i))}else x={eventTime:x,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(d=m=x,c=f):m=m.next=x,o|=h;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;h=i,i=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(m===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);ur|=o,e.lanes=o,e.memoizedState=f}}function Mf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(Q(191,a));a.call(s)}}}var Nl={},An=Fs(Nl),al=Fs(Nl),ll=Fs(Nl);function tr(e){if(e===Nl)throw Error(Q(174));return e}function bd(e,t){switch(Oe(ll,t),Oe(al,e),Oe(An,Nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ic(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ic(t,e)}Te(An),Oe(An,t)}function Xr(){Te(An),Te(al),Te(ll)}function O0(e){tr(ll.current);var t=tr(An.current),n=Ic(t,e.type);t!==n&&(Oe(al,e),Oe(An,n))}function _d(e){al.current===e&&(Te(An),Te(al))}var Fe=Fs(0);function Mo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qi=[];function jd(){for(var e=0;e<Qi.length;e++)Qi[e]._workInProgressVersionPrimary=null;Qi.length=0}var oo=ss.ReactCurrentDispatcher,Ji=ss.ReactCurrentBatchConfig,cr=0,ze=null,Je=null,nt=null,Do=!1,Fa=!1,ol=0,$b=0;function ft(){throw Error(Q(321))}function Nd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_n(e[n],t[n]))return!1;return!0}function wd(e,t,n,s,a,l){if(cr=l,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oo.current=e===null||e.memoizedState===null?Ab:Tb,e=n(s,a),Fa){l=0;do{if(Fa=!1,ol=0,25<=l)throw Error(Q(301));l+=1,nt=Je=null,t.updateQueue=null,oo.current=Ib,e=n(s,a)}while(Fa)}if(oo.current=Fo,t=Je!==null&&Je.next!==null,cr=0,nt=Je=ze=null,Do=!1,t)throw Error(Q(300));return e}function Sd(){var e=ol!==0;return ol=0,e}function wn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?ze.memoizedState=nt=e:nt=nt.next=e,nt}function an(){if(Je===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=nt===null?ze.memoizedState:nt.next;if(t!==null)nt=t,Je=e;else{if(e===null)throw Error(Q(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},nt===null?ze.memoizedState=nt=e:nt=nt.next=e}return nt}function il(e,t){return typeof t=="function"?t(e):t}function Zi(e){var t=an(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=Je,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var i=o=null,c=null,d=l;do{var m=d.lane;if((cr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,o=s):c=c.next=f,ze.lanes|=m,ur|=m}d=d.next}while(d!==null&&d!==l);c===null?o=s:c.next=i,_n(s,t.memoizedState)||(Mt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,ze.lanes|=l,ur|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xi(e){var t=an(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);_n(l,t.memoizedState)||(Mt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function R0(){}function A0(e,t){var n=ze,s=an(),a=t(),l=!_n(s.memoizedState,a);if(l&&(s.memoizedState=a,Mt=!0),s=s.queue,kd(L0.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,cl(9,I0.bind(null,n,s,a,t),void 0,null),st===null)throw Error(Q(349));cr&30||T0(n,t,a)}return a}function T0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function I0(e,t,n,s){t.value=n,t.getSnapshot=s,M0(t)&&D0(e)}function L0(e,t,n){return n(function(){M0(t)&&D0(e)})}function M0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_n(e,n)}catch{return!0}}function D0(e){var t=Zn(e,1);t!==null&&vn(t,e,1,-1)}function Df(e){var t=wn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=Rb.bind(null,ze,e),[t.memoizedState,e]}function cl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function F0(){return an().memoizedState}function io(e,t,n,s){var a=wn();ze.flags|=e,a.memoizedState=cl(1|t,n,void 0,s===void 0?null:s)}function fi(e,t,n,s){var a=an();s=s===void 0?null:s;var l=void 0;if(Je!==null){var o=Je.memoizedState;if(l=o.destroy,s!==null&&Nd(s,o.deps)){a.memoizedState=cl(t,n,l,s);return}}ze.flags|=e,a.memoizedState=cl(1|t,n,l,s)}function Ff(e,t){return io(8390656,8,e,t)}function kd(e,t){return fi(2048,8,e,t)}function z0(e,t){return fi(4,2,e,t)}function V0(e,t){return fi(4,4,e,t)}function U0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H0(e,t,n){return n=n!=null?n.concat([e]):null,fi(4,4,U0.bind(null,t,e),n)}function Cd(){}function q0(e,t){var n=an();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Nd(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function B0(e,t){var n=an();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Nd(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function G0(e,t,n){return cr&21?(_n(n,t)||(n=Jp(),ze.lanes|=n,ur|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function Pb(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var s=Ji.transition;Ji.transition={};try{e(!1),t()}finally{Ce=n,Ji.transition=s}}function W0(){return an().memoizedState}function Ob(e,t,n){var s=Ps(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},K0(e))Y0(t,n);else if(n=$0(e,t,n,s),n!==null){var a=Et();vn(n,e,s,a),Q0(n,t,s)}}function Rb(e,t,n){var s=Ps(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(K0(e))Y0(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,_n(i,o)){var c=t.interleaved;c===null?(a.next=a,vd(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=$0(e,t,a,s),n!==null&&(a=Et(),vn(n,e,s,a),Q0(n,t,s))}}function K0(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Y0(e,t){Fa=Do=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Q0(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,rd(e,n)}}var Fo={readContext:rn,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Ab={readContext:rn,useCallback:function(e,t){return wn().memoizedState=[e,t===void 0?null:t],e},useContext:rn,useEffect:Ff,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,io(4194308,4,U0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4194308,4,e,t)},useInsertionEffect:function(e,t){return io(4,2,e,t)},useMemo:function(e,t){var n=wn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=wn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Ob.bind(null,ze,e),[s.memoizedState,e]},useRef:function(e){var t=wn();return e={current:e},t.memoizedState=e},useState:Df,useDebugValue:Cd,useDeferredValue:function(e){return wn().memoizedState=e},useTransition:function(){var e=Df(!1),t=e[0];return e=Pb.bind(null,e[1]),wn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ze,a=wn();if(Le){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),st===null)throw Error(Q(349));cr&30||T0(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Ff(L0.bind(null,s,l,e),[e]),s.flags|=2048,cl(9,I0.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=wn(),t=st.identifierPrefix;if(Le){var n=Gn,s=Bn;n=(s&~(1<<32-xn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=ol++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$b++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tb={readContext:rn,useCallback:q0,useContext:rn,useEffect:kd,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:V0,useMemo:B0,useReducer:Zi,useRef:F0,useState:function(){return Zi(il)},useDebugValue:Cd,useDeferredValue:function(e){var t=an();return G0(t,Je.memoizedState,e)},useTransition:function(){var e=Zi(il)[0],t=an().memoizedState;return[e,t]},useMutableSource:R0,useSyncExternalStore:A0,useId:W0,unstable_isNewReconciler:!1},Ib={readContext:rn,useCallback:q0,useContext:rn,useEffect:kd,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:V0,useMemo:B0,useReducer:Xi,useRef:F0,useState:function(){return Xi(il)},useDebugValue:Cd,useDeferredValue:function(e){var t=an();return Je===null?t.memoizedState=e:G0(t,Je.memoizedState,e)},useTransition:function(){var e=Xi(il)[0],t=an().memoizedState;return[e,t]},useMutableSource:R0,useSyncExternalStore:A0,useId:W0,unstable_isNewReconciler:!1};function fn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nu(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Et(),a=Ps(e),l=Wn(s,a);l.payload=t,n!=null&&(l.callback=n),t=Es(e,l,a),t!==null&&(vn(t,e,a,s),lo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Et(),a=Ps(e),l=Wn(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Es(e,l,a),t!==null&&(vn(t,e,a,s),lo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Et(),s=Ps(e),a=Wn(n,s);a.tag=2,t!=null&&(a.callback=t),t=Es(e,a,s),t!==null&&(vn(t,e,s,n),lo(t,e,s))}};function zf(e,t,n,s,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):t.prototype&&t.prototype.isPureReactComponent?!tl(n,s)||!tl(a,l):!0}function J0(e,t,n){var s=!1,a=Is,l=t.contextType;return typeof l=="object"&&l!==null?l=rn(l):(a=zt(t)?or:xt.current,s=t.contextTypes,l=(s=s!=null)?Qr(e,a):Is),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Vf(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function su(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},yd(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=rn(l):(l=zt(t)?or:xt.current,a.context=Qr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(nu(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),Lo(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ea(e,t){try{var n="",s=t;do n+=cy(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function ec(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lb=typeof WeakMap=="function"?WeakMap:Map;function Z0(e,t,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Vo||(Vo=!0,hu=s),ru(e,t)},n}function X0(e,t,n){n=Wn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){ru(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ru(e,t),typeof s!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Uf(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Lb;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Qb.bind(null,e,t,n),t.then(e,e))}function Hf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qf(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wn(-1,1),t.tag=2,Es(n,t,1))),n.lanes|=1),e)}var Mb=ss.ReactCurrentOwner,Mt=!1;function wt(e,t,n,s){t.child=e===null?E0(t,null,n,s):Zr(t,e.child,n,s)}function Bf(e,t,n,s,a){n=n.render;var l=t.ref;return Br(t,a),s=wd(e,t,n,s,l,a),n=Sd(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xn(e,t,a)):(Le&&n&&md(t),t.flags|=1,wt(e,t,s,a),t.child)}function Gf(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!Id(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,eg(e,t,l,s,a)):(e=fo(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(o,s)&&e.ref===t.ref)return Xn(e,t,a)}return t.flags|=1,e=Os(l,s),e.ref=t.ref,e.return=t,t.child=e}function eg(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(tl(l,s)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Xn(e,t,a)}return au(e,t,n,s,a)}function tg(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Mr,qt),qt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(Mr,qt),qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,Oe(Mr,qt),qt|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,Oe(Mr,qt),qt|=s;return wt(e,t,a,n),t.child}function ng(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function au(e,t,n,s,a){var l=zt(n)?or:xt.current;return l=Qr(t,l),Br(t,a),n=wd(e,t,n,s,l,a),s=Sd(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xn(e,t,a)):(Le&&s&&md(t),t.flags|=1,wt(e,t,n,a),t.child)}function Wf(e,t,n,s,a){if(zt(n)){var l=!0;Oo(t)}else l=!1;if(Br(t,a),t.stateNode===null)co(e,t),J0(t,n,s),su(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rn(d):(d=zt(n)?or:xt.current,d=Qr(t,d));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==s||c!==d)&&Vf(t,o,s,d),vs=!1;var h=t.memoizedState;o.state=h,Lo(t,s,o,a),c=t.memoizedState,i!==s||h!==c||Ft.current||vs?(typeof m=="function"&&(nu(t,n,m,s),c=t.memoizedState),(i=vs||zf(t,n,i,s,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,P0(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:fn(t.type,i),o.props=d,f=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=rn(c):(c=zt(n)?or:xt.current,c=Qr(t,c));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||h!==c)&&Vf(t,o,s,c),vs=!1,h=t.memoizedState,o.state=h,Lo(t,s,o,a);var p=t.memoizedState;i!==f||h!==p||Ft.current||vs?(typeof x=="function"&&(nu(t,n,x,s),p=t.memoizedState),(d=vs||zf(t,n,d,s,h,p,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return lu(e,t,n,s,l,a)}function lu(e,t,n,s,a,l){ng(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Rf(t,n,!1),Xn(e,t,l);s=t.stateNode,Mb.current=t;var i=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Zr(t,e.child,null,l),t.child=Zr(t,null,i,l)):wt(e,t,i,l),t.memoizedState=s.state,a&&Rf(t,n,!0),t.child}function sg(e){var t=e.stateNode;t.pendingContext?Of(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Of(e,t.context,!1),bd(e,t.containerInfo)}function Kf(e,t,n,s,a){return Jr(),hd(a),t.flags|=256,wt(e,t,n,s),t.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function rg(e,t,n){var s=t.pendingProps,a=Fe.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Oe(Fe,a&1),e===null)return eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=xi(o,s,0,null),e=ar(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=iu(n),t.memoizedState=ou,e):Ed(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Db(e,t,o,s,i,a,n);if(l){l=s.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Os(a,c),s.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=Os(i,l):(l=ar(l,o,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=e.child.memoizedState,o=o===null?iu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=ou,s}return l=e.child,e=l.sibling,s=Os(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ed(e,t){return t=xi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ul(e,t,n,s){return s!==null&&hd(s),Zr(t,e.child,null,n),e=Ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Db(e,t,n,s,a,l,o){if(n)return t.flags&256?(t.flags&=-257,s=ec(Error(Q(422))),Ul(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=xi({mode:"visible",children:s.children},a,0,null),l=ar(l,a,o,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&Zr(t,e.child,null,o),t.child.memoizedState=iu(o),t.memoizedState=ou,l);if(!(t.mode&1))return Ul(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var i=s.dgst;return s=i,l=Error(Q(419)),s=ec(l,s,void 0),Ul(e,t,o,s)}if(i=(o&e.childLanes)!==0,Mt||i){if(s=st,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Zn(e,a),vn(s,e,a,-1))}return Td(),s=ec(Error(Q(421))),Ul(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Jb.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Gt=Cs(a.nextSibling),Wt=t,Le=!0,pn=null,e!==null&&(Zt[Xt++]=Bn,Zt[Xt++]=Gn,Zt[Xt++]=ir,Bn=e.id,Gn=e.overflow,ir=t),t=Ed(t,s.children),t.flags|=4096,t)}function Yf(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),tu(e.return,t,n)}function tc(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function ag(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(wt(e,t,s.children,n),s=Fe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yf(e,n,t);else if(e.tag===19)Yf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Oe(Fe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Mo(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),tc(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Mo(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}tc(t,!0,n,null,l);break;case"together":tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ur|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Os(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Os(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fb(e,t,n){switch(t.tag){case 3:sg(t),Jr();break;case 5:O0(t);break;case 1:zt(t.type)&&Oo(t);break;case 4:bd(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Oe(To,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Oe(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?rg(e,t,n):(Oe(Fe,Fe.current&1),e=Xn(e,t,n),e!==null?e.sibling:null);Oe(Fe,Fe.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return ag(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oe(Fe,Fe.current),s)break;return null;case 22:case 23:return t.lanes=0,tg(e,t,n)}return Xn(e,t,n)}var lg,cu,og,ig;lg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cu=function(){};og=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,tr(An.current);var l=null;switch(n){case"input":a=Oc(e,a),s=Oc(e,s),l=[];break;case"select":a=Ve({},a,{value:void 0}),s=Ve({},s,{value:void 0}),l=[];break;case"textarea":a=Tc(e,a),s=Tc(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=$o)}Lc(n,s);var o;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ka.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in s){var c=s[d];if(i=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};ig=function(e,t,n,s){n!==s&&(t.flags|=4)};function _a(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function zb(e,t,n){var s=t.pendingProps;switch(fd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return zt(t.type)&&Po(),ht(t),null;case 3:return s=t.stateNode,Xr(),Te(Ft),Te(xt),jd(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(zl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pn!==null&&(xu(pn),pn=null))),cu(e,t),ht(t),null;case 5:_d(t);var a=tr(ll.current);if(n=t.type,e!==null&&t.stateNode!=null)og(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Q(166));return ht(t),null}if(e=tr(An.current),zl(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[Sn]=t,s[rl]=l,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(a=0;a<$a.length;a++)Re($a[a],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":sf(s,l),Re("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Re("invalid",s);break;case"textarea":af(s,l),Re("invalid",s)}Lc(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?s.textContent!==i&&(l.suppressHydrationWarning!==!0&&Fl(s.textContent,i,e),a=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Fl(s.textContent,i,e),a=["children",""+i]):Ka.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Re("scroll",s)}switch(n){case"input":Ol(s),rf(s,l,!0);break;case"textarea":Ol(s),lf(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=$o)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Sn]=t,e[rl]=s,lg(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mc(n,s),n){case"dialog":Re("cancel",e),Re("close",e),a=s;break;case"iframe":case"object":case"embed":Re("load",e),a=s;break;case"video":case"audio":for(a=0;a<$a.length;a++)Re($a[a],e);a=s;break;case"source":Re("error",e),a=s;break;case"img":case"image":case"link":Re("error",e),Re("load",e),a=s;break;case"details":Re("toggle",e),a=s;break;case"input":sf(e,s),a=Oc(e,s),Re("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ve({},s,{value:void 0}),Re("invalid",e);break;case"textarea":af(e,s),a=Tc(e,s),Re("invalid",e);break;default:a=s}Lc(n,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Fp(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mp(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ya(e,c):typeof c=="number"&&Ya(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ka.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Re("scroll",e):c!=null&&Zu(e,l,c,o))}switch(n){case"input":Ol(e),rf(e,s,!1);break;case"textarea":Ol(e),lf(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ts(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Vr(e,!!s.multiple,l,!1):s.defaultValue!=null&&Vr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=$o)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)ig(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Q(166));if(n=tr(ll.current),tr(An.current),zl(t)){if(s=t.stateNode,n=t.memoizedProps,s[Sn]=t,(l=s.nodeValue!==n)&&(e=Wt,e!==null))switch(e.tag){case 3:Fl(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fl(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Sn]=t,t.stateNode=s}return ht(t),null;case 13:if(Te(Fe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&Gt!==null&&t.mode&1&&!(t.flags&128))k0(),Jr(),t.flags|=98560,l=!1;else if(l=zl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(Q(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Q(317));l[Sn]=t}else Jr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),l=!1}else pn!==null&&(xu(pn),pn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?et===0&&(et=3):Td())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return Xr(),cu(e,t),e===null&&nl(t.stateNode.containerInfo),ht(t),null;case 10:return xd(t.type._context),ht(t),null;case 17:return zt(t.type)&&Po(),ht(t),null;case 19:if(Te(Fe),l=t.memoizedState,l===null)return ht(t),null;if(s=(t.flags&128)!==0,o=l.rendering,o===null)if(s)_a(l,!1);else{if(et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Mo(e),o!==null){for(t.flags|=128,_a(l,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(Fe,Fe.current&1|2),t.child}e=e.sibling}l.tail!==null&&We()>ta&&(t.flags|=128,s=!0,_a(l,!1),t.lanes=4194304)}else{if(!s)if(e=Mo(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_a(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Le)return ht(t),null}else 2*We()-l.renderingStartTime>ta&&n!==1073741824&&(t.flags|=128,s=!0,_a(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=We(),t.sibling=null,n=Fe.current,Oe(Fe,s?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return Ad(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?qt&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Vb(e,t){switch(fd(t),t.tag){case 1:return zt(t.type)&&Po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xr(),Te(Ft),Te(xt),jd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _d(t),null;case 13:if(Te(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Jr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Te(Fe),null;case 4:return Xr(),null;case 10:return xd(t.type._context),null;case 22:case 23:return Ad(),null;case 24:return null;default:return null}}var Hl=!1,gt=!1,Ub=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){He(e,t,s)}else n.current=null}function uu(e,t,n){try{n()}catch(s){He(e,t,s)}}var Qf=!1;function Hb(e,t){if(Wc=ko,e=f0(),dd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,i=-1,c=-1,d=0,m=0,f=e,h=null;t:for(;;){for(var x;f!==n||a!==0&&f.nodeType!==3||(i=o+a),f!==l||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===e)break t;if(h===n&&++d===a&&(i=o),h===l&&++m===s&&(c=o),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kc={focusedElem:e,selectionRange:n},ko=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,v=p.memoizedState,u=t.stateNode,g=u.getSnapshotBeforeUpdate(t.elementType===t.type?y:fn(t.type,y),v);u.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(C){He(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return p=Qf,Qf=!1,p}function za(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&uu(t,n,l)}a=a.next}while(a!==s)}}function pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function du(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cg(e){var t=e.alternate;t!==null&&(e.alternate=null,cg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sn],delete t[rl],delete t[Jc],delete t[Sb],delete t[kb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ug(e){return e.tag===5||e.tag===3||e.tag===4}function Jf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ug(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$o));else if(s!==4&&(e=e.child,e!==null))for(mu(e,t,n),e=e.sibling;e!==null;)mu(e,t,n),e=e.sibling}function fu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}var lt=null,hn=!1;function hs(e,t,n){for(n=n.child;n!==null;)dg(e,t,n),n=n.sibling}function dg(e,t,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(oi,n)}catch{}switch(n.tag){case 5:gt||Lr(n,t);case 6:var s=lt,a=hn;lt=null,hs(e,t,n),lt=s,hn=a,lt!==null&&(hn?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(hn?(e=lt,n=n.stateNode,e.nodeType===8?Ki(e.parentNode,n):e.nodeType===1&&Ki(e,n),Xa(e)):Ki(lt,n.stateNode));break;case 4:s=lt,a=hn,lt=n.stateNode.containerInfo,hn=!0,hs(e,t,n),lt=s,hn=a;break;case 0:case 11:case 14:case 15:if(!gt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&uu(n,t,o),a=a.next}while(a!==s)}hs(e,t,n);break;case 1:if(!gt&&(Lr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(i){He(n,t,i)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:n.mode&1?(gt=(s=gt)||n.memoizedState!==null,hs(e,t,n),gt=s):hs(e,t,n);break;default:hs(e,t,n)}}function Zf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ub),t.forEach(function(s){var a=Zb.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function un(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:lt=i.stateNode,hn=!1;break e;case 3:lt=i.stateNode.containerInfo,hn=!0;break e;case 4:lt=i.stateNode.containerInfo,hn=!0;break e}i=i.return}if(lt===null)throw Error(Q(160));dg(l,o,a),lt=null,hn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){He(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mg(t,e),t=t.sibling}function mg(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(un(t,e),Nn(e),s&4){try{za(3,e,e.return),pi(3,e)}catch(y){He(e,e.return,y)}try{za(5,e,e.return)}catch(y){He(e,e.return,y)}}break;case 1:un(t,e),Nn(e),s&512&&n!==null&&Lr(n,n.return);break;case 5:if(un(t,e),Nn(e),s&512&&n!==null&&Lr(n,n.return),e.flags&32){var a=e.stateNode;try{Ya(a,"")}catch(y){He(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Tp(a,l),Mc(i,o);var d=Mc(i,l);for(o=0;o<c.length;o+=2){var m=c[o],f=c[o+1];m==="style"?Fp(a,f):m==="dangerouslySetInnerHTML"?Mp(a,f):m==="children"?Ya(a,f):Zu(a,m,f,d)}switch(i){case"input":Rc(a,l);break;case"textarea":Ip(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Vr(a,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Vr(a,!!l.multiple,l.defaultValue,!0):Vr(a,!!l.multiple,l.multiple?[]:"",!1))}a[rl]=l}catch(y){He(e,e.return,y)}}break;case 6:if(un(t,e),Nn(e),s&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){He(e,e.return,y)}}break;case 3:if(un(t,e),Nn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(t.containerInfo)}catch(y){He(e,e.return,y)}break;case 4:un(t,e),Nn(e);break;case 13:un(t,e),Nn(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Od=We())),s&4&&Zf(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(d=gt)||m,un(t,e),gt=d):un(t,e),Nn(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(oe=e,m=e.child;m!==null;){for(f=oe=m;oe!==null;){switch(h=oe,x=h.child,h.tag){case 0:case 11:case 14:case 15:za(4,h,h.return);break;case 1:Lr(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){He(s,n,y)}}break;case 5:Lr(h,h.return);break;case 22:if(h.memoizedState!==null){eh(f);continue}}x!==null?(x.return=h,oe=x):eh(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Dp("display",o))}catch(y){He(e,e.return,y)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){He(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:un(t,e),Nn(e),s&4&&Zf(e);break;case 21:break;default:un(t,e),Nn(e)}}function Nn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ug(n)){var s=n;break e}n=n.return}throw Error(Q(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ya(a,""),s.flags&=-33);var l=Jf(e);fu(e,l,a);break;case 3:case 4:var o=s.stateNode.containerInfo,i=Jf(e);mu(e,i,o);break;default:throw Error(Q(161))}}catch(c){He(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qb(e,t,n){oe=e,fg(e)}function fg(e,t,n){for(var s=(e.mode&1)!==0;oe!==null;){var a=oe,l=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Hl;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||gt;i=Hl;var d=gt;if(Hl=o,(gt=c)&&!d)for(oe=a;oe!==null;)o=oe,c=o.child,o.tag===22&&o.memoizedState!==null?th(a):c!==null?(c.return=o,oe=c):th(a);for(;l!==null;)oe=l,fg(l),l=l.sibling;oe=a,Hl=i,gt=d}Xf(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,oe=l):Xf(e)}}function Xf(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||pi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!gt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:fn(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Mf(t,l,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Mf(t,o,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}gt||t.flags&512&&du(t)}catch(h){He(t,t.return,h)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function eh(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function th(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pi(4,t)}catch(c){He(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){He(t,a,c)}}var l=t.return;try{du(t)}catch(c){He(t,l,c)}break;case 5:var o=t.return;try{du(t)}catch(c){He(t,o,c)}}}catch(c){He(t,t.return,c)}if(t===e){oe=null;break}var i=t.sibling;if(i!==null){i.return=t.return,oe=i;break}oe=t.return}}var Bb=Math.ceil,zo=ss.ReactCurrentDispatcher,$d=ss.ReactCurrentOwner,nn=ss.ReactCurrentBatchConfig,Se=0,st=null,Ke=null,it=0,qt=0,Mr=Fs(0),et=0,ul=null,ur=0,gi=0,Pd=0,Va=null,It=null,Od=0,ta=1/0,Un=null,Vo=!1,hu=null,$s=null,ql=!1,js=null,Uo=0,Ua=0,pu=null,uo=-1,mo=0;function Et(){return Se&6?We():uo!==-1?uo:uo=We()}function Ps(e){return e.mode&1?Se&2&&it!==0?it&-it:Eb.transition!==null?(mo===0&&(mo=Jp()),mo):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:r0(e.type)),e):1}function vn(e,t,n,s){if(50<Ua)throw Ua=0,pu=null,Error(Q(185));bl(e,n,s),(!(Se&2)||e!==st)&&(e===st&&(!(Se&2)&&(gi|=n),et===4&&bs(e,it)),Vt(e,s),n===1&&Se===0&&!(t.mode&1)&&(ta=We()+500,mi&&zs()))}function Vt(e,t){var n=e.callbackNode;Ey(e,t);var s=So(e,e===st?it:0);if(s===0)n!==null&&uf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&uf(n),t===1)e.tag===0?Cb(nh.bind(null,e)):N0(nh.bind(null,e)),Nb(function(){!(Se&6)&&zs()}),n=null;else{switch(Zp(s)){case 1:n=sd;break;case 4:n=Yp;break;case 16:n=wo;break;case 536870912:n=Qp;break;default:n=wo}n=_g(n,hg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hg(e,t){if(uo=-1,mo=0,Se&6)throw Error(Q(327));var n=e.callbackNode;if(Gr()&&e.callbackNode!==n)return null;var s=So(e,e===st?it:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ho(e,s);else{t=s;var a=Se;Se|=2;var l=gg();(st!==e||it!==t)&&(Un=null,ta=We()+500,rr(e,t));do try{Kb();break}catch(i){pg(e,i)}while(!0);gd(),zo.current=l,Se=a,Ke!==null?t=0:(st=null,it=0,t=et)}if(t!==0){if(t===2&&(a=Uc(e),a!==0&&(s=a,t=gu(e,a))),t===1)throw n=ul,rr(e,0),bs(e,s),Vt(e,We()),n;if(t===6)bs(e,s);else{if(a=e.current.alternate,!(s&30)&&!Gb(a)&&(t=Ho(e,s),t===2&&(l=Uc(e),l!==0&&(s=l,t=gu(e,l))),t===1))throw n=ul,rr(e,0),bs(e,s),Vt(e,We()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Q(345));case 2:Ys(e,It,Un);break;case 3:if(bs(e,s),(s&130023424)===s&&(t=Od+500-We(),10<t)){if(So(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Et(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qc(Ys.bind(null,e,It,Un),t);break}Ys(e,It,Un);break;case 4:if(bs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-xn(s);l=1<<o,o=t[o],o>a&&(a=o),s&=~l}if(s=a,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Bb(s/1960))-s,10<s){e.timeoutHandle=Qc(Ys.bind(null,e,It,Un),s);break}Ys(e,It,Un);break;case 5:Ys(e,It,Un);break;default:throw Error(Q(329))}}}return Vt(e,We()),e.callbackNode===n?hg.bind(null,e):null}function gu(e,t){var n=Va;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=Ho(e,t),e!==2&&(t=It,It=n,t!==null&&xu(t)),e}function xu(e){It===null?It=e:It.push.apply(It,e)}function Gb(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!_n(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bs(e,t){for(t&=~Pd,t&=~gi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xn(t),s=1<<n;e[n]=-1,t&=~s}}function nh(e){if(Se&6)throw Error(Q(327));Gr();var t=So(e,0);if(!(t&1))return Vt(e,We()),null;var n=Ho(e,t);if(e.tag!==0&&n===2){var s=Uc(e);s!==0&&(t=s,n=gu(e,s))}if(n===1)throw n=ul,rr(e,0),bs(e,t),Vt(e,We()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ys(e,It,Un),Vt(e,We()),null}function Rd(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(ta=We()+500,mi&&zs())}}function dr(e){js!==null&&js.tag===0&&!(Se&6)&&Gr();var t=Se;Se|=1;var n=nn.transition,s=Ce;try{if(nn.transition=null,Ce=1,e)return e()}finally{Ce=s,nn.transition=n,Se=t,!(Se&6)&&zs()}}function Ad(){qt=Mr.current,Te(Mr)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jb(n)),Ke!==null)for(n=Ke.return;n!==null;){var s=n;switch(fd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Po();break;case 3:Xr(),Te(Ft),Te(xt),jd();break;case 5:_d(s);break;case 4:Xr();break;case 13:Te(Fe);break;case 19:Te(Fe);break;case 10:xd(s.type._context);break;case 22:case 23:Ad()}n=n.return}if(st=e,Ke=e=Os(e.current,null),it=qt=t,et=0,ul=null,Pd=gi=ur=0,It=Va=null,er!==null){for(t=0;t<er.length;t++)if(n=er[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,s.next=o}n.pending=s}er=null}return e}function pg(e,t){do{var n=Ke;try{if(gd(),oo.current=Fo,Do){for(var s=ze.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Do=!1}if(cr=0,nt=Je=ze=null,Fa=!1,ol=0,$d.current=null,n===null||n.return===null){et=1,ul=t,Ke=null;break}e:{var l=e,o=n.return,i=n,c=t;if(t=it,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=i,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=Hf(o);if(x!==null){x.flags&=-257,qf(x,o,i,l,t),x.mode&1&&Uf(l,d,t),t=x,c=d;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Uf(l,d,t),Td();break e}c=Error(Q(426))}}else if(Le&&i.mode&1){var v=Hf(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),qf(v,o,i,l,t),hd(ea(c,i));break e}}l=c=ea(c,i),et!==4&&(et=2),Va===null?Va=[l]:Va.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var u=Z0(l,c,t);Lf(l,u);break e;case 1:i=c;var g=l.type,b=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($s===null||!$s.has(b)))){l.flags|=65536,t&=-t,l.lanes|=t;var C=X0(l,i,t);Lf(l,C);break e}}l=l.return}while(l!==null)}vg(n)}catch($){t=$,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function gg(){var e=zo.current;return zo.current=Fo,e===null?Fo:e}function Td(){(et===0||et===3||et===2)&&(et=4),st===null||!(ur&268435455)&&!(gi&268435455)||bs(st,it)}function Ho(e,t){var n=Se;Se|=2;var s=gg();(st!==e||it!==t)&&(Un=null,rr(e,t));do try{Wb();break}catch(a){pg(e,a)}while(!0);if(gd(),Se=n,zo.current=s,Ke!==null)throw Error(Q(261));return st=null,it=0,et}function Wb(){for(;Ke!==null;)xg(Ke)}function Kb(){for(;Ke!==null&&!yy();)xg(Ke)}function xg(e){var t=bg(e.alternate,e,qt);e.memoizedProps=e.pendingProps,t===null?vg(e):Ke=t,$d.current=null}function vg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Vb(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{et=6,Ke=null;return}}else if(n=zb(n,t,qt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);et===0&&(et=5)}function Ys(e,t,n){var s=Ce,a=nn.transition;try{nn.transition=null,Ce=1,Yb(e,t,n,s)}finally{nn.transition=a,Ce=s}return null}function Yb(e,t,n,s){do Gr();while(js!==null);if(Se&6)throw Error(Q(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if($y(e,l),e===st&&(Ke=st=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,_g(wo,function(){return Gr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=nn.transition,nn.transition=null;var o=Ce;Ce=1;var i=Se;Se|=4,$d.current=null,Hb(e,n),mg(n,e),pb(Kc),ko=!!Wc,Kc=Wc=null,e.current=n,qb(n),by(),Se=i,Ce=o,nn.transition=l}else e.current=n;if(ql&&(ql=!1,js=e,Uo=a),l=e.pendingLanes,l===0&&($s=null),Ny(n.stateNode),Vt(e,We()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Vo)throw Vo=!1,e=hu,hu=null,e;return Uo&1&&e.tag!==0&&Gr(),l=e.pendingLanes,l&1?e===pu?Ua++:(Ua=0,pu=e):Ua=0,zs(),null}function Gr(){if(js!==null){var e=Zp(Uo),t=nn.transition,n=Ce;try{if(nn.transition=null,Ce=16>e?16:e,js===null)var s=!1;else{if(e=js,js=null,Uo=0,Se&6)throw Error(Q(331));var a=Se;for(Se|=4,oe=e.current;oe!==null;){var l=oe,o=l.child;if(oe.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(oe=d;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:za(8,m,l)}var f=m.child;if(f!==null)f.return=m,oe=f;else for(;oe!==null;){m=oe;var h=m.sibling,x=m.return;if(cg(m),m===d){oe=null;break}if(h!==null){h.return=x,oe=h;break}oe=x}}}var p=l.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}oe=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,oe=o;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:za(9,l,l.return)}var u=l.sibling;if(u!==null){u.return=l.return,oe=u;break e}oe=l.return}}var g=e.current;for(oe=g;oe!==null;){o=oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,oe=b;else e:for(o=g;oe!==null;){if(i=oe,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:pi(9,i)}}catch($){He(i,i.return,$)}if(i===o){oe=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,oe=C;break e}oe=i.return}}if(Se=a,zs(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(oi,e)}catch{}s=!0}return s}finally{Ce=n,nn.transition=t}}return!1}function sh(e,t,n){t=ea(n,t),t=Z0(e,t,1),e=Es(e,t,1),t=Et(),e!==null&&(bl(e,1,t),Vt(e,t))}function He(e,t,n){if(e.tag===3)sh(e,e,n);else for(;t!==null;){if(t.tag===3){sh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&($s===null||!$s.has(s))){e=ea(n,e),e=X0(t,e,1),t=Es(t,e,1),e=Et(),t!==null&&(bl(t,1,e),Vt(t,e));break}}t=t.return}}function Qb(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Et(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(it&n)===n&&(et===4||et===3&&(it&130023424)===it&&500>We()-Od?rr(e,0):Pd|=n),Vt(e,t)}function yg(e,t){t===0&&(e.mode&1?(t=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):t=1);var n=Et();e=Zn(e,t),e!==null&&(bl(e,t,n),Vt(e,n))}function Jb(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yg(e,n)}function Zb(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Q(314))}s!==null&&s.delete(t),yg(e,n)}var bg;bg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ft.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,Fb(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Le&&t.flags&1048576&&w0(t,Ao,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;co(e,t),e=t.pendingProps;var a=Qr(t,xt.current);Br(t,n),a=wd(null,t,s,e,a,n);var l=Sd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(s)?(l=!0,Oo(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,yd(t),a.updater=hi,t.stateNode=a,a._reactInternals=t,su(t,s,e,n),t=lu(null,t,s,!0,l,n)):(t.tag=0,Le&&l&&md(t),wt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(co(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=e_(s),e=fn(s,e),a){case 0:t=au(null,t,s,e,n);break e;case 1:t=Wf(null,t,s,e,n);break e;case 11:t=Bf(null,t,s,e,n);break e;case 14:t=Gf(null,t,s,fn(s.type,e),n);break e}throw Error(Q(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fn(s,a),au(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fn(s,a),Wf(e,t,s,a,n);case 3:e:{if(sg(t),e===null)throw Error(Q(387));s=t.pendingProps,l=t.memoizedState,a=l.element,P0(e,t),Lo(t,s,null,n);var o=t.memoizedState;if(s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=ea(Error(Q(423)),t),t=Kf(e,t,s,n,a);break e}else if(s!==a){a=ea(Error(Q(424)),t),t=Kf(e,t,s,n,a);break e}else for(Gt=Cs(t.stateNode.containerInfo.firstChild),Wt=t,Le=!0,pn=null,n=E0(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jr(),s===a){t=Xn(e,t,n);break e}wt(e,t,s,n)}t=t.child}return t;case 5:return O0(t),e===null&&eu(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,Yc(s,a)?o=null:l!==null&&Yc(s,l)&&(t.flags|=32),ng(e,t),wt(e,t,o,n),t.child;case 6:return e===null&&eu(t),null;case 13:return rg(e,t,n);case 4:return bd(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Zr(t,null,s,n):wt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fn(s,a),Bf(e,t,s,a,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,Oe(To,s._currentValue),s._currentValue=o,l!==null)if(_n(l.value,o)){if(l.children===a.children&&!Ft.current){t=Xn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===s){if(l.tag===1){c=Wn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),tu(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(Q(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),tu(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}wt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Br(t,n),a=rn(a),s=s(a),t.flags|=1,wt(e,t,s,n),t.child;case 14:return s=t.type,a=fn(s,t.pendingProps),a=fn(s.type,a),Gf(e,t,s,a,n);case 15:return eg(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:fn(s,a),co(e,t),t.tag=1,zt(s)?(e=!0,Oo(t)):e=!1,Br(t,n),J0(t,s,a),su(t,s,a,n),lu(null,t,s,!0,e,n);case 19:return ag(e,t,n);case 22:return tg(e,t,n)}throw Error(Q(156,t.tag))};function _g(e,t){return Kp(e,t)}function Xb(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(e,t,n,s){return new Xb(e,t,n,s)}function Id(e){return e=e.prototype,!(!e||!e.isReactComponent)}function e_(e){if(typeof e=="function")return Id(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ed)return 11;if(e===td)return 14}return 2}function Os(e,t){var n=e.alternate;return n===null?(n=en(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fo(e,t,n,s,a,l){var o=2;if(s=e,typeof e=="function")Id(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Cr:return ar(n.children,a,l,t);case Xu:o=8,a|=8;break;case Cc:return e=en(12,n,t,a|2),e.elementType=Cc,e.lanes=l,e;case Ec:return e=en(13,n,t,a),e.elementType=Ec,e.lanes=l,e;case $c:return e=en(19,n,t,a),e.elementType=$c,e.lanes=l,e;case Op:return xi(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $p:o=10;break e;case Pp:o=9;break e;case ed:o=11;break e;case td:o=14;break e;case xs:o=16,s=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=en(o,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function ar(e,t,n,s){return e=en(7,e,s,t),e.lanes=n,e}function xi(e,t,n,s){return e=en(22,e,s,t),e.elementType=Op,e.lanes=n,e.stateNode={isHidden:!1},e}function nc(e,t,n){return e=en(6,e,null,t),e.lanes=n,e}function sc(e,t,n){return t=en(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function t_(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ld(e,t,n,s,a,l,o,i,c){return e=new t_(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=en(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yd(l),e}function n_(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function jg(e){if(!e)return Is;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(zt(n))return j0(e,n,t)}return t}function Ng(e,t,n,s,a,l,o,i,c){return e=Ld(n,s,!0,e,a,l,o,i,c),e.context=jg(null),n=e.current,s=Et(),a=Ps(n),l=Wn(s,a),l.callback=t??null,Es(n,l,a),e.current.lanes=a,bl(e,a,s),Vt(e,s),e}function vi(e,t,n,s){var a=t.current,l=Et(),o=Ps(a);return n=jg(n),t.context===null?t.context=n:t.pendingContext=n,t=Wn(l,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Es(a,t,o),e!==null&&(vn(e,a,o,l),lo(e,a,o)),o}function qo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Md(e,t){rh(e,t),(e=e.alternate)&&rh(e,t)}function s_(){return null}var wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dd(e){this._internalRoot=e}yi.prototype.render=Dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));vi(e,t,null,null)};yi.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){vi(null,e,null,null)}),t[Jn]=null}};function yi(e){this._internalRoot=e}yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=t0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ys.length&&t!==0&&t<ys[n].priority;n++);ys.splice(n,0,e),n===0&&s0(e)}};function Fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ah(){}function r_(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var d=qo(o);l.call(d)}}var o=Ng(t,s,e,0,null,!1,!1,"",ah);return e._reactRootContainer=o,e[Jn]=o.current,nl(e.nodeType===8?e.parentNode:e),dr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var i=s;s=function(){var d=qo(c);i.call(d)}}var c=Ld(e,0,!1,null,null,!1,!1,"",ah);return e._reactRootContainer=c,e[Jn]=c.current,nl(e.nodeType===8?e.parentNode:e),dr(function(){vi(t,c,n,s)}),c}function _i(e,t,n,s,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=qo(o);i.call(c)}}vi(t,o,e,a)}else o=r_(n,t,e,a,s);return qo(o)}Xp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ea(t.pendingLanes);n!==0&&(rd(t,n|1),Vt(t,We()),!(Se&6)&&(ta=We()+500,zs()))}break;case 13:dr(function(){var s=Zn(e,1);if(s!==null){var a=Et();vn(s,e,1,a)}}),Md(e,1)}};ad=function(e){if(e.tag===13){var t=Zn(e,134217728);if(t!==null){var n=Et();vn(t,e,134217728,n)}Md(e,134217728)}};e0=function(e){if(e.tag===13){var t=Ps(e),n=Zn(e,t);if(n!==null){var s=Et();vn(n,e,t,s)}Md(e,t)}};t0=function(){return Ce};n0=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};Fc=function(e,t,n){switch(t){case"input":if(Rc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=di(s);if(!a)throw Error(Q(90));Ap(s),Rc(s,a)}}}break;case"textarea":Ip(e,n);break;case"select":t=n.value,t!=null&&Vr(e,!!n.multiple,t,!1)}};Up=Rd;Hp=dr;var a_={usingClientEntryPoint:!1,Events:[jl,Or,di,zp,Vp,Rd]},ja={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l_={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gp(e),e===null?null:e.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||s_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{oi=Bl.inject(l_),Rn=Bl}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a_;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(t))throw Error(Q(200));return n_(e,t,null,n)};Yt.createRoot=function(e,t){if(!Fd(e))throw Error(Q(299));var n=!1,s="",a=wg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ld(e,1,!1,null,null,n,!1,s,a),e[Jn]=t.current,nl(e.nodeType===8?e.parentNode:e),new Dd(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Gp(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return dr(e)};Yt.hydrate=function(e,t,n){if(!bi(t))throw Error(Q(200));return _i(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!Fd(e))throw Error(Q(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",o=wg;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Ng(t,null,e,1,n??null,a,!1,l,o),e[Jn]=t.current,nl(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new yi(t)};Yt.render=function(e,t,n){if(!bi(t))throw Error(Q(200));return _i(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!bi(e))throw Error(Q(40));return e._reactRootContainer?(dr(function(){_i(null,null,e,!1,function(){e._reactRootContainer=null,e[Jn]=null})}),!0):!1};Yt.unstable_batchedUpdates=Rd;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!bi(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return _i(e,t,n,!1,s)};Yt.version="18.3.1-next-f1338f8080-20240426";function Sg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sg)}catch(e){console.error(e)}}Sg(),Sp.exports=Yt;var o_=Sp.exports,lh=o_;Sc.createRoot=lh.createRoot,Sc.hydrateRoot=lh.hydrateRoot;const i_={},oh=e=>{let t;const n=new Set,s=(m,f)=>{const h=typeof m=="function"?m(t):m;if(!Object.is(h,t)){const x=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(p=>p(t,x))}},a=()=>t,c={setState:s,getState:a,getInitialState:()=>d,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(i_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(s,a,c);return c},c_=e=>e?oh(e):oh;var kg={exports:{}},Cg={},Eg={exports:{}},$g={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=D;function u_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var d_=typeof Object.is=="function"?Object.is:u_,m_=na.useState,f_=na.useEffect,h_=na.useLayoutEffect,p_=na.useDebugValue;function g_(e,t){var n=t(),s=m_({inst:{value:n,getSnapshot:t}}),a=s[0].inst,l=s[1];return h_(function(){a.value=n,a.getSnapshot=t,rc(a)&&l({inst:a})},[e,n,t]),f_(function(){return rc(a)&&l({inst:a}),e(function(){rc(a)&&l({inst:a})})},[e]),p_(n),n}function rc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!d_(e,n)}catch{return!0}}function x_(e,t){return t()}var v_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?x_:g_;$g.useSyncExternalStore=na.useSyncExternalStore!==void 0?na.useSyncExternalStore:v_;Eg.exports=$g;var y_=Eg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ji=D,b_=y_;function __(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var j_=typeof Object.is=="function"?Object.is:__,N_=b_.useSyncExternalStore,w_=ji.useRef,S_=ji.useEffect,k_=ji.useMemo,C_=ji.useDebugValue;Cg.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var l=w_(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=k_(function(){function c(x){if(!d){if(d=!0,m=x,x=s(x),a!==void 0&&o.hasValue){var p=o.value;if(a(p,x))return f=p}return f=x}if(p=f,j_(m,x))return p;var y=s(x);return a!==void 0&&a(p,y)?(m=x,p):(m=x,f=y)}var d=!1,m,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,s,a]);var i=N_(e,l[0],l[1]);return S_(function(){o.hasValue=!0,o.value=i},[i]),C_(i),i};kg.exports=Cg;var E_=kg.exports;const $_=ai(E_),Pg={},{useDebugValue:P_}=Np,{useSyncExternalStoreWithSelector:O_}=$_;let ih=!1;const R_=e=>e;function A_(e,t=R_,n){(Pg?"production":void 0)!=="production"&&n&&!ih&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ih=!0);const s=O_(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return P_(s),s}const ch=e=>{(Pg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?c_(e):e,n=(s,a)=>A_(t,s,a);return Object.assign(n,t),n},T_=e=>e?ch(e):ch,uh={variables:{},schemas:{},resources:{llms:{},vector_stores:{},genie_rooms:{},tables:{},volumes:{},functions:{},warehouses:{},databases:{},connections:{}},retrievers:{},tools:{},guardrails:{},prompts:{},agents:{},app:void 0},Ie=T_(e=>({config:uh,setConfig:t=>e({config:t}),updateConfig:t=>e(n=>({config:{...n.config,...t}})),addVariable:(t,n)=>e(s=>({config:{...s.config,variables:{...s.config.variables,[t]:n}}})),updateVariable:(t,n)=>e(s=>({config:{...s.config,variables:{...s.config.variables,[t]:n}}})),removeVariable:t=>e(n=>{const s={...n.config.variables};return s==null||delete s[t],{config:{...n.config,variables:s}}}),updateMemory:t=>e(n=>({config:{...n.config,memory:t}})),addDatabase:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,databases:{...(a=s.config.resources)==null?void 0:a.databases,[t]:n}}}}}),updateDatabase:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.databases};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,databases:a||{}}}}}),removeDatabase:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.databases};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,databases:s||{}}}}}),addSchema:(t,n)=>e(s=>({config:{...s.config,schemas:{...s.config.schemas,[t]:n}}})),updateSchema:(t,n)=>e(s=>{const a={...s.config.schemas};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,schemas:a}}}),removeSchema:t=>e(n=>{const s={...n.config.schemas};return s==null||delete s[t],{config:{...n.config,schemas:s}}}),addLLM:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,llms:{...(a=s.config.resources)==null?void 0:a.llms,[t]:n}}}}}),updateLLM:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.llms};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,llms:a||{}}}}}),removeLLM:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.llms};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,llms:s||{}}}}}),addGenieRoom:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,genie_rooms:{...(a=s.config.resources)==null?void 0:a.genie_rooms,[t]:n}}}}}),updateGenieRoom:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.genie_rooms};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,genie_rooms:a||{}}}}}),removeGenieRoom:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.genie_rooms};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,genie_rooms:s||{}}}}}),addTable:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,tables:{...(a=s.config.resources)==null?void 0:a.tables,[t]:n}}}}}),updateTable:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.tables};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,tables:a||{}}}}}),removeTable:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.tables};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,tables:s||{}}}}}),addVolume:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,volumes:{...(a=s.config.resources)==null?void 0:a.volumes,[t]:n}}}}}),updateVolume:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.volumes};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,volumes:a||{}}}}}),removeVolume:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.volumes};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,volumes:s||{}}}}}),addFunction:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,functions:{...(a=s.config.resources)==null?void 0:a.functions,[t]:n}}}}}),updateFunction:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.functions};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,functions:a||{}}}}}),removeFunction:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.functions};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,functions:s||{}}}}}),addWarehouse:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,warehouses:{...(a=s.config.resources)==null?void 0:a.warehouses,[t]:n}}}}}),updateWarehouse:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.warehouses};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,warehouses:a||{}}}}}),removeWarehouse:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.warehouses};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,warehouses:s||{}}}}}),addConnection:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,connections:{...(a=s.config.resources)==null?void 0:a.connections,[t]:n}}}}}),updateConnection:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.connections};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,connections:a||{}}}}}),removeConnection:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.connections};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,connections:s||{}}}}}),addVectorStore:(t,n)=>e(s=>{var a;return{config:{...s.config,resources:{...s.config.resources,vector_stores:{...(a=s.config.resources)==null?void 0:a.vector_stores,[t]:n}}}}}),updateVectorStore:(t,n)=>e(s=>{var l;const a={...(l=s.config.resources)==null?void 0:l.vector_stores};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,resources:{...s.config.resources,vector_stores:a||{}}}}}),removeVectorStore:t=>e(n=>{var a;const s={...(a=n.config.resources)==null?void 0:a.vector_stores};return s==null||delete s[t],{config:{...n.config,resources:{...n.config.resources,vector_stores:s||{}}}}}),addRetriever:(t,n)=>e(s=>({config:{...s.config,retrievers:{...s.config.retrievers,[t]:n}}})),updateRetriever:(t,n)=>e(s=>{const a={...s.config.retrievers};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,retrievers:a}}}),removeRetriever:t=>e(n=>{const s={...n.config.retrievers};return s==null||delete s[t],{config:{...n.config,retrievers:s}}}),addTool:t=>e(n=>({config:{...n.config,tools:{...n.config.tools,[t.name]:t}}})),updateTool:(t,n)=>e(s=>{const a={...s.config.tools};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,tools:a}}}),removeTool:t=>e(n=>{const s={...n.config.tools};return s==null||delete s[t],{config:{...n.config,tools:s}}}),addGuardrail:t=>e(n=>({config:{...n.config,guardrails:{...n.config.guardrails,[t.name]:t}}})),updateGuardrail:(t,n)=>e(s=>{const a={...s.config.guardrails};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,guardrails:a}}}),removeGuardrail:t=>e(n=>{const s={...n.config.guardrails};return s==null||delete s[t],{config:{...n.config,guardrails:s}}}),addPrompt:(t,n)=>e(s=>({config:{...s.config,prompts:{...s.config.prompts,[t]:n}}})),updatePrompt:(t,n)=>e(s=>{const a={...s.config.prompts};return a!=null&&a[t]&&(a[t]={...a[t],...n}),{config:{...s.config,prompts:a}}}),removePrompt:t=>e(n=>{const s={...n.config.prompts};return s==null||delete s[t],{config:{...n.config,prompts:s}}}),addAgent:t=>e(n=>{var l;const s={...n.config.agents,[t.name]:t},a=[...((l=n.config.app)==null?void 0:l.agents)||[],t];return{config:{...n.config,agents:s,app:n.config.app?{...n.config.app,agents:a}:void 0}}}),updateAgent:(t,n)=>e(s=>{var l,o;const a={...s.config.agents};if(a!=null&&a[t]){a[t]={...a[t],...n};const i=((o=(l=s.config.app)==null?void 0:l.agents)==null?void 0:o.map(c=>c.name===t?{...c,...n}:c))||[];return{config:{...s.config,agents:a,app:s.config.app?{...s.config.app,agents:i}:void 0}}}return{config:s.config}}),removeAgent:t=>e(n=>{var l,o;const s={...n.config.agents};s==null||delete s[t];const a=((o=(l=n.config.app)==null?void 0:l.agents)==null?void 0:o.filter(i=>i.name!==t))||[];return{config:{...n.config,agents:s,app:n.config.app?{...n.config.app,agents:a}:void 0}}}),updateApp:t=>e(n=>{var s,a,l;return{config:{...n.config,app:{name:((s=n.config.app)==null?void 0:s.name)||"",registered_model:((a=n.config.app)==null?void 0:a.registered_model)||{name:""},agents:((l=n.config.app)==null?void 0:l.agents)||[],...n.config.app,...t}}}}),reset:()=>e({config:uh})}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(e,t)=>{const n=D.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:i="",children:c,...d},m)=>D.createElement("svg",{ref:m,...I_,width:a,height:a,stroke:s,strokeWidth:o?Number(l)*24/Number(a):l,className:["lucide",`lucide-${L_(e)}`,i].join(" "),...d},[...t.map(([f,h])=>D.createElement(f,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ue("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ue("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ue("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ue("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=ue("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ue("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ue("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=ue("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ue("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ue("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=ue("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=ue("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ue("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ue("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=ue("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ue("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ue("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=ue("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Mg(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Mg(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function qe(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Mg(e))&&(s&&(s+=" "),s+=t);return s}const ac=[{id:"overview",label:"Overview",icon:W_,description:"Getting started"},{id:"variables",label:"Variables",icon:yn,description:"Config variables"},{id:"schemas",label:"Schemas",icon:sn,description:"Unity Catalog schemas",required:!0},{id:"resources",label:"Resources",icon:Lg,description:"Databricks resources",required:!0},{id:"retrievers",label:"Retrievers",icon:ra,description:"Vector search retrievers"},{id:"tools",label:"Tools",icon:dl,description:"Agent tools"},{id:"guardrails",label:"Guardrails",icon:aa,description:"Safety checks"},{id:"memory",label:"Memory",icon:Tg,description:"Persistence & storage"},{id:"prompts",label:"Prompts",icon:mr,description:"MLflow prompts"},{id:"agents",label:"Agents",icon:es,description:"AI agents",required:!0},{id:"app",label:"Application",icon:nr,description:"App settings & orchestration",required:!0}];function X_({activeSection:e,onSectionChange:t,config:n}){const s=l=>{var o,i,c,d,m,f,h,x,p,y;switch(l){case"overview":return 0;case"variables":return Object.keys(n.variables||{}).length;case"schemas":return Object.keys(n.schemas||{}).length;case"resources":return Object.keys(((o=n.resources)==null?void 0:o.llms)||{}).length+Object.keys(((i=n.resources)==null?void 0:i.genie_rooms)||{}).length+Object.keys(((c=n.resources)==null?void 0:c.tables)||{}).length+Object.keys(((d=n.resources)==null?void 0:d.volumes)||{}).length+Object.keys(((m=n.resources)==null?void 0:m.functions)||{}).length+Object.keys(((f=n.resources)==null?void 0:f.warehouses)||{}).length+Object.keys(((h=n.resources)==null?void 0:h.connections)||{}).length;case"retrievers":return Object.keys(n.retrievers||{}).length;case"tools":return Object.keys(n.tools||{}).length;case"guardrails":return Object.keys(n.guardrails||{}).length;case"memory":return((x=n.memory)!=null&&x.checkpointer?1:0)+((p=n.memory)!=null&&p.store?1:0);case"prompts":return Object.keys(n.prompts||{}).length;case"agents":return Object.keys(n.agents||{}).length;case"app":return(y=n.app)!=null&&y.name?1:0;default:return 0}},a=l=>{const o=s(l),i=ac.find(c=>c.id===l);return i!=null&&i.required?o>0:!0};return r.jsxs("aside",{className:"w-64 bg-slate-900 border-r border-slate-800 flex flex-col",children:[r.jsxs("div",{className:"p-4",children:[r.jsx("h2",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3",children:"Configuration"}),r.jsx("nav",{className:"space-y-1",children:ac.map(l=>{const o=l.icon,i=s(l.id),c=a(l.id),d=e===l.id;return r.jsxs("button",{onClick:()=>t(l.id),className:qe("w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-left transition-all duration-200",d?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"text-slate-400 hover:bg-slate-800 hover:text-slate-200 border border-transparent"),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(o,{className:qe("w-5 h-5",d?"text-blue-400":"text-slate-500")}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:l.label}),r.jsx("p",{className:"text-xs text-slate-500",children:l.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[i>0&&r.jsx("span",{className:qe("px-1.5 py-0.5 text-xs rounded",d?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"),children:i}),l.required&&(c?r.jsx(Og,{className:"w-4 h-4 text-emerald-500"}):r.jsx(F_,{className:"w-4 h-4 text-amber-500"}))]})]},l.id)})})]}),r.jsx("div",{className:"mt-auto p-4 border-t border-slate-800",children:r.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[r.jsx("h3",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Configuration Status"}),r.jsx("div",{className:"space-y-1.5",children:ac.filter(l=>l.required).map(l=>{const o=a(l.id);return r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-slate-500",children:l.label}),r.jsx("span",{className:o?"text-emerald-400":"text-amber-400",children:o?" Ready":" Required"})]},l.id)})})]})})]})}const ve=D.forwardRef(({className:e,variant:t="default",children:n,...s},a)=>{const l={default:"bg-slate-800/50 border-slate-700/50",interactive:"bg-slate-800/50 border-slate-700/50 hover:border-slate-600 hover:bg-slate-800/70 cursor-pointer transition-all duration-200",highlight:"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/30"};return r.jsx("div",{ref:a,className:qe("rounded-xl border p-4",l[t],e),...s,children:n})});ve.displayName="Card";const Y=D.forwardRef(({className:e,variant:t="primary",size:n="md",loading:s,children:a,disabled:l,...o},i)=>{const c="inline-flex items-center justify-center font-medium transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",d={primary:"bg-blue-600 text-white hover:bg-blue-500 focus:ring-blue-500 shadow-lg shadow-blue-500/25",secondary:"bg-slate-700 text-slate-200 hover:bg-slate-600 focus:ring-slate-500 border border-slate-600",ghost:"bg-transparent text-slate-300 hover:bg-slate-800 hover:text-white focus:ring-slate-500",danger:"bg-red-600/20 text-red-400 hover:bg-red-600/30 focus:ring-red-500 border border-red-500/30"},m={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-2"};return r.jsxs("button",{ref:i,className:qe(c,d[t],m[n],e),disabled:l||s,...o,children:[s&&r.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})});Y.displayName="Button";const we=D.forwardRef(({className:e,variant:t="default",children:n,...s},a)=>{const l={default:"bg-slate-700 text-slate-300",success:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"bg-amber-500/20 text-amber-400 border-amber-500/30",danger:"bg-red-500/20 text-red-400 border-red-500/30",info:"bg-blue-500/20 text-blue-400 border-blue-500/30"};return r.jsx("span",{ref:a,className:qe("inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium border",l[t],e),...s,children:n})});we.displayName="Badge";const Gl=[{id:"schemas",title:"1. Define Schemas",description:"Set up Unity Catalog schemas for your resources",icon:sn,color:"text-blue-400",isComplete:e=>Object.keys(e.schemas||{}).length>0},{id:"resources",title:"2. Configure Resources",description:"Add LLMs, Genie rooms, tables, and other Databricks resources",icon:Lg,color:"text-emerald-400",isComplete:e=>{const t=e.resources||{};return Object.keys(t.llms||{}).length>0}},{id:"tools",title:"3. Create Tools",description:"Define tools that agents can use to perform tasks",icon:dl,color:"text-amber-400",isComplete:e=>Object.keys(e.tools||{}).length>0},{id:"agents",title:"4. Build Agents",description:"Create AI agents with models, tools, and prompts",icon:es,color:"text-violet-400",isComplete:e=>Object.keys(e.agents||{}).length>0},{id:"app",title:"5. Configure Application",description:"Set up your application and deployment settings",icon:nr,color:"text-rose-400",isComplete:e=>{var t,n,s;return((t=e.app)==null?void 0:t.name)&&((s=(n=e.app)==null?void 0:n.registered_model)==null?void 0:s.name)}}];function ej({onNavigate:e}){var i;const{config:t}=Ie(),n={schemas:Object.keys(t.schemas||{}).length,llms:Object.keys(((i=t.resources)==null?void 0:i.llms)||{}).length,tools:Object.keys(t.tools||{}).length,agents:Object.keys(t.agents||{}).length,prompts:Object.keys(t.prompts||{}).length},s=Gl.filter(c=>c.isComplete(t)).length,a=Gl.length,l=Math.round(s/a*100),o=s===0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"DAO AI Configuration Builder"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Build and configure multi-agent AI systems for Databricks"})]}),r.jsxs(ve,{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 border-slate-700/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx(kt,{className:"w-5 h-5 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-white",children:o?"Get Started":"Configuration Progress"}),r.jsx("p",{className:"text-sm text-slate-400",children:o?"Follow the steps below to build your agent configuration":`${s} of ${a} steps completed`})]})]}),!o&&r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"text-2xl font-bold text-white",children:[l,"%"]}),r.jsx("p",{className:"text-xs text-slate-500",children:"complete"})]})]}),r.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-2 mb-4",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-violet-500 h-2 rounded-full transition-all duration-500",style:{width:`${l}%`}})}),!o&&r.jsxs("div",{className:"grid grid-cols-5 gap-4 pt-2",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-white",children:n.schemas}),r.jsx("p",{className:"text-xs text-slate-500",children:"Schemas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-white",children:n.llms}),r.jsx("p",{className:"text-xs text-slate-500",children:"LLMs"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-white",children:n.tools}),r.jsx("p",{className:"text-xs text-slate-500",children:"Tools"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-white",children:n.agents}),r.jsx("p",{className:"text-xs text-slate-500",children:"Agents"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold text-white",children:n.prompts}),r.jsx("p",{className:"text-xs text-slate-500",children:"Prompts"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:o?"Getting Started":"Configuration Steps"}),Gl.map((c,d)=>{const m=c.icon,f=c.isComplete(t),h=!f&&Gl.slice(0,d).every(x=>x.isComplete(t));return r.jsx(ve,{variant:h?"highlight":"default",className:`transition-all duration-200 ${h?"ring-1 ring-blue-500/50":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${f?"bg-emerald-500/20":h?"bg-blue-500/20":"bg-slate-700/50"}`,children:f?r.jsx(Og,{className:"w-5 h-5 text-emerald-400"}):r.jsx(m,{className:`w-5 h-5 ${h?c.color:"text-slate-500"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:`font-medium ${f?"text-slate-400":"text-white"}`,children:c.title}),r.jsx("p",{className:"text-sm text-slate-500",children:c.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[f&&r.jsx(we,{variant:"success",children:"Complete"}),h&&r.jsx(we,{variant:"info",children:"Next Step"}),r.jsxs(Y,{variant:h?"primary":"secondary",size:"sm",onClick:()=>e(c.id),children:[f?"Edit":h?"Start":"Configure",r.jsx(M_,{className:"w-4 h-4 ml-1"})]})]})]})},c.id)})]}),r.jsxs(ve,{children:[r.jsx("h3",{className:"font-semibold text-white mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{onClick:()=>e("prompts"),className:"flex items-center space-x-3 p-3 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg transition-colors text-left",children:[r.jsx(mr,{className:"w-5 h-5 text-violet-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white",children:"Manage Prompts"}),r.jsx("p",{className:"text-xs text-slate-500",children:"MLflow registry"})]})]}),r.jsxs("button",{onClick:()=>e("memory"),className:"flex items-center space-x-3 p-3 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg transition-colors text-left",children:[r.jsx(sn,{className:"w-5 h-5 text-cyan-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white",children:"Configure Memory"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Persistence options"})]})]}),r.jsxs("button",{onClick:()=>e("app"),className:"flex items-center space-x-3 p-3 bg-slate-800/50 hover:bg-slate-700/50 rounded-lg transition-colors text-left",children:[r.jsx(es,{className:"w-5 h-5 text-amber-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white",children:"Configure Application"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Orchestration & deployment"})]})]})]})]}),r.jsx("div",{className:"text-center text-sm text-slate-500 py-4",children:r.jsx("p",{children:" Tip: Use the YAML preview on the right to see your configuration in real-time"})})]})}const X=D.forwardRef(({className:e,label:t,error:n,hint:s,id:a,...l},o)=>{const i=a||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-"));return r.jsxs("div",{className:"space-y-1.5",children:[t&&r.jsxs("label",{htmlFor:i,className:"block text-sm font-medium text-slate-300",children:[t,l.required&&r.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),r.jsx("input",{ref:o,id:i,className:qe("w-full px-3 py-2 bg-slate-800/50 border rounded-lg text-slate-200 placeholder-slate-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500","transition-all duration-200",n?"border-red-500/50":"border-slate-700",e),...l}),s&&!n&&r.jsx("p",{className:"text-xs text-slate-500",children:s}),n&&r.jsx("p",{className:"text-xs text-red-400",children:n})]})});X.displayName="Input";const ee=D.forwardRef(({className:e,label:t,error:n,hint:s,options:a,placeholder:l,id:o,...i},c)=>{const d=o||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-")),m=a.length===0;return r.jsxs("div",{className:"space-y-1.5",children:[t&&r.jsxs("label",{htmlFor:d,className:"block text-sm font-medium text-slate-300",children:[t,i.required&&r.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),r.jsx("div",{className:"relative",children:m?r.jsxs("div",{className:qe("w-full px-3 py-2 bg-slate-800/50 border rounded-lg appearance-none","transition-all duration-200","border-slate-700 text-sm text-slate-500",e),children:["No options available",r.jsx(Ls,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("select",{ref:c,id:d,className:qe("w-full px-3 py-2 bg-slate-800/50 border rounded-lg text-slate-200 appearance-none","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500","transition-all duration-200 cursor-pointer",n?"border-red-500/50":"border-slate-700",e),...i,children:[l&&r.jsx("option",{value:"",className:"text-slate-500",children:l}),a.map(f=>r.jsx("option",{value:f.value,className:"bg-slate-800",children:f.label},f.value))]}),r.jsx(Ls,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 pointer-events-none"})]})}),s&&!n&&r.jsx("p",{className:"text-xs text-slate-500",children:s}),n&&r.jsx("p",{className:"text-xs text-red-400",children:n})]})});ee.displayName="Select";const lc={name:"",type:"primitive",primitiveValue:"",envName:"",envDefault:"",secretScope:"",secretKey:"",secretDefault:"",compositeOptions:[],compositeDefault:""},tj=[{value:"primitive",label:"Primitive Value"},{value:"env",label:"Environment Variable"},{value:"secret",label:"Databricks Secret"},{value:"composite",label:"Composite (Fallback Chain)"}],nj=e=>{switch(e){case"primitive":return Vd;case"env":return yn;case"secret":return Ig;case"composite":return En;default:return yn}},Dg=e=>"type"in e?e.type:"primitive",sj=e=>{switch(Dg(e)){case"primitive":return`Value: ${e.value}`;case"env":return`Env: ${e.env}`;case"secret":const n=e;return`Secret: ${n.scope}/${n.secret}`;case"composite":return`${e.options.length} fallback option(s)`;default:return""}};function rj(){const{config:e,addVariable:t,removeVariable:n}=Ie(),[s,a]=D.useState(!1),[l,o]=D.useState(lc),i=e.variables||{},c=()=>{switch(l.type){case"primitive":return{type:"primitive",value:l.primitiveValue};case"env":return{type:"env",env:l.envName,...l.envDefault&&{default_value:l.envDefault}};case"secret":return{type:"secret",scope:l.secretScope,secret:l.secretKey,...l.secretDefault&&{default_value:l.secretDefault}};case"composite":return{type:"composite",options:l.compositeOptions.map(x=>x.type==="env"?{type:"env",env:x.envName||""}:x.type==="secret"?{type:"secret",scope:x.scope||"",secret:x.secret||""}:{type:"primitive",value:x.value||""}),...l.compositeDefault&&{default_value:l.compositeDefault}};default:return{type:"primitive",value:""}}},d=()=>{if(!l.name.trim())return;const x=c();t(l.name,x),o(lc),a(!1)},m=x=>{o({...l,compositeOptions:[...l.compositeOptions,{type:x,envName:"",scope:"",secret:"",value:""}]})},f=(x,p)=>{const y=[...l.compositeOptions];y[x]={...y[x],...p},o({...l,compositeOptions:y})},h=x=>{o({...l,compositeOptions:l.compositeOptions.filter((p,y)=>y!==x)})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-white",children:"Variables"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Define reusable configuration variables (env vars, secrets, or values)"})]}),r.jsxs(Y,{onClick:()=>a(!0),disabled:s,children:[r.jsx(ke,{className:"w-4 h-4 mr-2"}),"Add Variable"]})]}),s&&r.jsxs(ve,{className:"p-4 space-y-4 border-blue-500/50",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Variable Name",placeholder:"e.g., client_id, workspace_host",value:l.name,onChange:x=>o({...l,name:x.target.value})}),r.jsx(ee,{label:"Variable Type",value:l.type,onChange:x=>o({...l,type:x.target.value}),options:tj})]}),l.type==="primitive"&&r.jsx(X,{label:"Value",placeholder:"Enter the value",value:l.primitiveValue,onChange:x=>o({...l,primitiveValue:x.target.value})}),l.type==="env"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Environment Variable Name",placeholder:"e.g., DATABRICKS_HOST",value:l.envName,onChange:x=>o({...l,envName:x.target.value})}),r.jsx(X,{label:"Default Value (optional)",placeholder:"Fallback if env var not set",value:l.envDefault,onChange:x=>o({...l,envDefault:x.target.value})})]}),l.type==="secret"&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(X,{label:"Secret Scope",placeholder:"e.g., retail_ai",value:l.secretScope,onChange:x=>o({...l,secretScope:x.target.value})}),r.jsx(X,{label:"Secret Key",placeholder:"e.g., DATABRICKS_TOKEN",value:l.secretKey,onChange:x=>o({...l,secretKey:x.target.value})}),r.jsx(X,{label:"Default Value (optional)",placeholder:"Fallback if secret not found",value:l.secretDefault,onChange:x=>o({...l,secretDefault:x.target.value})})]}),l.type==="composite"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Fallback Options (tried in order)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Y,{size:"sm",variant:"secondary",onClick:()=>m("env"),children:[r.jsx(yn,{className:"w-3 h-3 mr-1"})," Add Env"]}),r.jsxs(Y,{size:"sm",variant:"secondary",onClick:()=>m("secret"),children:[r.jsx(Ig,{className:"w-3 h-3 mr-1"})," Add Secret"]}),r.jsxs(Y,{size:"sm",variant:"secondary",onClick:()=>m("primitive"),children:[r.jsx(Vd,{className:"w-3 h-3 mr-1"})," Add Value"]})]})]}),l.compositeOptions.length===0&&r.jsx("p",{className:"text-sm text-slate-500 italic",children:"Add fallback options. They will be tried in order until one succeeds."}),l.compositeOptions.map((x,p)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg",children:[r.jsxs("span",{className:"text-xs text-slate-500 w-6",children:[p+1,"."]}),x.type==="env"&&r.jsx(X,{className:"flex-1",placeholder:"Environment variable name",value:x.envName||"",onChange:y=>f(p,{envName:y.target.value})}),x.type==="secret"&&r.jsxs(r.Fragment,{children:[r.jsx(X,{className:"flex-1",placeholder:"Scope",value:x.scope||"",onChange:y=>f(p,{scope:y.target.value})}),r.jsx(X,{className:"flex-1",placeholder:"Secret key",value:x.secret||"",onChange:y=>f(p,{secret:y.target.value})})]}),x.type==="primitive"&&r.jsx(X,{className:"flex-1",placeholder:"Value",value:x.value||"",onChange:y=>f(p,{value:y.target.value})}),r.jsx("span",{className:"text-xs text-slate-500 capitalize",children:x.type}),r.jsx("button",{onClick:()=>h(p),className:"text-slate-400 hover:text-red-400",children:r.jsx(Be,{className:"w-4 h-4"})})]},p)),r.jsx(X,{label:"Default Value (optional)",placeholder:"Final fallback if all options fail",value:l.compositeDefault,onChange:x=>o({...l,compositeDefault:x.target.value})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Y,{variant:"secondary",onClick:()=>{a(!1),o(lc)},children:"Cancel"}),r.jsx(Y,{onClick:d,disabled:!l.name.trim(),children:"Add Variable"})]})]}),Object.keys(i).length===0&&!s?r.jsxs(ve,{className:"p-8 text-center",children:[r.jsx("div",{className:"text-slate-400 mb-4",children:r.jsx(yn,{className:"w-12 h-12 mx-auto opacity-50"})}),r.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Variables Defined"}),r.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Variables let you configure values from environment variables, Databricks secrets, or fallback chains. Use them to keep sensitive data out of your config."}),r.jsxs(Y,{onClick:()=>a(!0),children:[r.jsx(ke,{className:"w-4 h-4 mr-2"}),"Add Your First Variable"]})]}):r.jsx("div",{className:"grid gap-4",children:Object.entries(i).map(([x,p])=>{const y=Dg(p),v=nj(y);return r.jsx(ve,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-slate-700/50 rounded-lg",children:r.jsx(v,{className:"w-5 h-5 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-white",children:x}),r.jsx("p",{className:"text-sm text-slate-400",children:sj(p)})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs px-2 py-1 bg-slate-700/50 rounded text-slate-300 capitalize",children:y}),r.jsx("button",{onClick:()=>n(x),className:"text-slate-400 hover:text-red-400 p-1",children:r.jsx(Be,{className:"w-4 h-4"})})]})]})},x)})}),Object.keys(i).length>0&&r.jsxs(ve,{className:"p-4 bg-slate-800/30 border-slate-700/50",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Usage in YAML"}),r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Reference variables using YAML anchors:"}),r.jsx("pre",{className:"text-xs bg-slate-900/50 p-2 rounded overflow-x-auto",children:r.jsx("code",{className:"text-green-400",children:`variables:
  ${Object.keys(i)[0]||"my_var"}: &${Object.keys(i)[0]||"my_var"}
    ...

# Use in config:
tools:
  my_tool:
    function:
      client_id: *${Object.keys(i)[0]||"my_var"}`})})]})]})}function Vs({isOpen:e,onClose:t,title:n,description:s,children:a,size:l="md"}){if(D.useEffect(()=>{const i=c=>{c.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",i),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",i),document.body.style.overflow="unset"}},[e,t]),!e)return null;const o={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:qe("relative w-full bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl animate-fade-in",o[l]),children:[r.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-slate-800",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:n}),s&&r.jsx("p",{className:"mt-1 text-sm text-slate-400",children:s})]}),r.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx(ml,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:a})]})]})}let Dr=null;const Hd="databricks_config";function aj(){const e=window.location.hostname;return e.includes(".databricks")||e.includes(".azuredatabricks.")||e.endsWith(".databricks.com")||e.endsWith(".gcp.databricks.com")||e.endsWith(".cloud.databricks.com")}function lj(){return window.location.origin}let fl=null;function oj(e){fl=e}function Pa(e){console.log("[Config] Setting config:",{host:e.host,source:e.source,isAutoDetected:e.isAutoDetected}),Dr=e;try{localStorage.setItem(Hd,JSON.stringify(e)),console.log("[Config] Saved to localStorage")}catch(t){console.error("[Config] Failed to save to localStorage:",t)}fl?(console.log("[Config] Notifying listeners of config change"),fl()):console.warn("[Config] No config change callback registered")}function sr(){if(Dr)return Dr;try{const e=localStorage.getItem(Hd);if(e)return Dr=JSON.parse(e),Dr}catch{}return null}function Fg(){Dr=null;try{localStorage.removeItem(Hd)}catch{}fl&&fl()}function Us(){return sr()!==null}async function ij(e){const t=e?`/api/auth/login?host=${encodeURIComponent(e)}`:"/api/auth/login";return(await fetch(t,{credentials:"include"})).json()}async function cj(){await fetch("/api/auth/logout",{credentials:"include"}),Fg()}async function uj(){var n;const e=aj(),t=sr();if(t)return console.log("[AutoDetect] Already configured, returning existing config"),{success:!0,host:t.host,hasToken:!0,inDatabricksApp:e,source:t.source};try{console.log("[AutoDetect] Fetching /api/auth/context...");const s=await fetch("/api/auth/context",{credentials:"include"});if(console.log("[AutoDetect] Response status:",s.status,s.ok),s.ok){const a=await s.json();if(console.log("[AutoDetect] Auth context data:",a),a.host&&a.has_token){const l=a.auth_method;return Pa({host:a.host,token:`__${l.toUpperCase()}_TOKEN__`,isAutoDetected:!0,source:l}),{success:!0,host:a.host,hasToken:!0,inDatabricksApp:a.is_databricks_app,user:a.user,source:l,oauth:a.oauth}}return a.host&&!a.has_token?{success:!1,host:a.host,hasToken:!1,inDatabricksApp:a.is_databricks_app,user:a.user,source:null,oauth:a.oauth,error:(n=a.oauth)!=null&&n.configured?'Not authenticated. Click "Login with Databricks" to authenticate.':a.is_databricks_app?"On-behalf-of-user authentication is not enabled. Please configure manual credentials or enable OBO auth for this app.":"Token not found. Configure credentials manually or set DATABRICKS_TOKEN environment variable."}:{success:!1,host:null,hasToken:!1,inDatabricksApp:a.is_databricks_app,oauth:a.oauth,error:"No Databricks host configured."}}}catch{}return e?{success:!1,host:lj(),hasToken:!1,inDatabricksApp:!0,error:"Could not connect to backend. Please ensure the app is running correctly."}:{success:!1,host:null,hasToken:!1,inDatabricksApp:!1,error:"Configure Databricks credentials manually."}}class Vn extends Error{constructor(t,n,s){super(t),this.status=n,this.errorCode=s,this.name="DatabricksApiError"}}const dt={async getConnectionStatus(){const e=sr();if(console.log("[getConnectionStatus] Current config:",e),!e)return console.log("[getConnectionStatus] No config found, returning not connected"),{connected:!1,error:"Not configured"};try{console.log("[getConnectionStatus] Fetching /api/auth/verify...");const t={"Content-Type":"application/json","X-Databricks-Host":e.host};e.token&&!e.token.startsWith("__")&&e.source==="manual"?(console.log("[getConnectionStatus] Using manual token for verification"),t.Authorization=`Bearer ${e.token}`):console.log("[getConnectionStatus] Using auto-detected auth (no Authorization header)");const a=await(await fetch("/api/auth/verify",{credentials:"include",headers:t})).json();return console.log("[getConnectionStatus] Verify response:",a),a.authenticated&&a.user?{connected:!0,user:a.user.userName,display_name:a.user.displayName,host:a.host||e.host,isAutoDetected:e.isAutoDetected,source:a.token_source||e.source}:{connected:!1,error:a.error||a.message||"Authentication failed"}}catch(t){return console.error("[getConnectionStatus] Error:",t),{connected:!1,error:t instanceof Error?t.message:"Unknown error"}}},async listCatalogs(){const e=await fetch("/api/uc/catalogs",{credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:e.statusText}));throw new Vn(n.error||"Failed to list catalogs")}return(await e.json()).catalogs||[]},async listSchemas(e){const t=await fetch(`/api/uc/schemas?catalog=${encodeURIComponent(e)}`,{credentials:"include"});if(!t.ok){const s=await t.json().catch(()=>({error:t.statusText}));throw new Vn(s.error||"Failed to list schemas")}return(await t.json()).schemas||[]},async listTables(e,t){const n=await fetch(`/api/uc/tables?catalog=${encodeURIComponent(e)}&schema=${encodeURIComponent(t)}`,{credentials:"include"});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Vn(a.error||"Failed to list tables")}return(await n.json()).tables||[]},async getTableColumns(e,t,n){const s=await fetch(`/api/uc/table-columns?catalog=${encodeURIComponent(e)}&schema=${encodeURIComponent(t)}&table=${encodeURIComponent(n)}`,{credentials:"include"});if(!s.ok){const l=await s.json().catch(()=>({error:s.statusText}));throw new Vn(l.error||"Failed to get table columns")}return(await s.json()).columns||[]},async listFunctions(e,t){const n=await fetch(`/api/uc/functions?catalog=${encodeURIComponent(e)}&schema=${encodeURIComponent(t)}`,{credentials:"include"});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Vn(a.error||"Failed to list functions")}return(await n.json()).functions||[]},async listVolumes(e,t){const n=await fetch(`/api/uc/volumes?catalog=${encodeURIComponent(e)}&schema=${encodeURIComponent(t)}`,{credentials:"include"});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));throw new Vn(a.error||"Failed to list volumes")}return(await n.json()).volumes||[]},async listDatabases(){try{const e=await fetch("/api/uc/databases",{credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:e.statusText}));return console.error("[listDatabases] Error:",n),[]}return(await e.json()).databases||[]}catch(e){return console.error("[listDatabases] Error:",e),[]}},async listServingEndpoints(){try{const e=await fetch("/api/uc/serving-endpoints",{credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:e.statusText}));throw new Vn(n.error||"Failed to list serving endpoints")}return(await e.json()).endpoints||[]}catch(e){return console.error("[listServingEndpoints] Error:",e),[]}},async listSQLWarehouses(){try{const e=await fetch("/api/uc/sql-warehouses",{credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:e.statusText}));throw new Vn(n.error||"Failed to list SQL warehouses")}return(await e.json()).warehouses||[]}catch(e){return console.error("[listSQLWarehouses] Error:",e),[]}},async listGenieSpaces(){try{const e=await fetch("/api/uc/genie-spaces",{credentials:"include"});return e.ok?((await e.json()).spaces||[]).map(n=>({space_id:n.id||n.space_id||"",title:n.name||n.title||"",description:n.description,owner:n.owner})):[]}catch{return[]}},async listVectorSearchEndpoints(){try{const e=await fetch("/api/uc/vector-search-endpoints",{credentials:"include"});return e.ok?(await e.json()).endpoints||[]:[]}catch{return[]}},async listVectorSearchIndexes(e){try{const t=await fetch(`/api/uc/vector-search-indexes?endpoint=${encodeURIComponent(e)}`,{credentials:"include"});return t.ok?(await t.json()).vector_indexes||[]:[]}catch{return[]}},async listUCConnections(){try{const e=await fetch("/api/uc/connections",{credentials:"include"});return e.ok?(await e.json()).connections||[]:[]}catch{return[]}},async listRegisteredModels(){try{const e=await fetch("/api/uc/registered-models",{credentials:"include"});if(!e.ok){const n=await e.json().catch(()=>({error:e.statusText}));throw new Vn(n.error||"Failed to list registered models")}return(await e.json()).models||[]}catch(e){return console.error("[listRegisteredModels] Error:",e),[]}},async listPrompts(e,t){try{const n=await fetch(`/api/uc/prompts?catalog=${encodeURIComponent(e)}&schema=${encodeURIComponent(t)}`,{credentials:"include"});if(!n.ok){const a=await n.json().catch(()=>({error:n.statusText}));return console.error("[listPrompts] Error:",a),[]}return(await n.json()).prompts||[]}catch(n){return console.error("[listPrompts] Error:",n),[]}},async getPromptDetails(e){try{const t=await fetch(`/api/uc/prompt-details?name=${encodeURIComponent(e)}`,{credentials:"include"});if(!t.ok){const n=await t.json().catch(()=>({error:t.statusText}));return console.error("[getPromptDetails] Error:",n),null}return await t.json()}catch(t){return console.error("[getPromptDetails] Error:",t),null}},async getPromptTemplate(e,t,n){try{let s=`/api/uc/prompt-template?name=${encodeURIComponent(e)}`;t?s+=`&version=${encodeURIComponent(t)}`:n&&(s+=`&alias=${encodeURIComponent(n)}`);const a=await fetch(s,{credentials:"include"});if(!a.ok){const l=await a.json().catch(()=>({error:a.statusText}));return console.error("[getPromptTemplate] Error:",l),null}return await a.json()}catch(s){return console.error("[getPromptTemplate] Error:",s),null}}};let Eu=0;const Go=new Set;function dj(){Eu++,console.log("[Hooks] Config change notified, new version:",Eu,"listeners:",Go.size),Go.forEach(e=>e())}console.log("[Hooks] Registering config change callback");oj(dj);function mj(e){return Go.add(e),()=>Go.delete(e)}function fj(){return Eu}function zg(){return D.useSyncExternalStore(mj,fj)}function vt(e,t=[],n=!1){const s=zg(),[a,l]=D.useState(null),[o,i]=D.useState(!1),[c,d]=D.useState(null),m=D.useCallback(async()=>{const f=Us();if(console.log("[useAsync] Fetch called, isConfigured:",f,"additionalSkip:",n,"configVer:",s),n||!f){console.log("[useAsync] Skipping fetch"),i(!1),l(null);return}i(!0),d(null);try{console.log("[useAsync] Executing fetch function...");const h=await e();console.log("[useAsync] Fetch successful, result:",h),l(h)}catch(h){console.error("[useAsync] Fetch error:",h),d(h instanceof Error?h:new Error(String(h)))}finally{i(!1)}},[n,s,...t]);return D.useEffect(()=>{m()},[m]),{data:a,loading:o,error:c,refetch:m}}function hj(){const[e,t]=D.useState(!0),[n,s]=D.useState(!1),[a,l]=D.useState(null),[o,i]=D.useState(!1),[c,d]=D.useState(!1),[m,f]=D.useState(null),[h,x]=D.useState(void 0),[p,y]=D.useState(0),v=D.useCallback(()=>{y(u=>u+1)},[]);return D.useEffect(()=>{(async()=>{console.log("[useAutoDetectConfig] Starting detection..."),t(!0);const g=await uj();console.log("[useAutoDetectConfig] Detection result:",g),s(g.success),l(g.host),i(g.hasToken),d(g.inDatabricksApp),f(g.error||null),x(g.oauth),t(!1)})()},[p]),{detecting:e,detected:n,autoDetectedHost:a,hasToken:o,inDatabricksApp:c,error:m,oauthInfo:h,redetect:v}}function pj(){const e=zg(),t=Us();console.log("[useConnectionStatus] configured:",t,"configVer:",e);const n=vt(async()=>{console.log("[useConnectionStatus] Calling getConnectionStatus...");const s=await dt.getConnectionStatus();return console.log("[useConnectionStatus] Got status:",s),s},[t,e],!1);return console.log("[useConnectionStatus] Returning:",{...n,configured:t}),{...n,configured:t}}function vr(){return vt(()=>dt.listCatalogs(),[])}function $n(e){return vt(async()=>e?dt.listSchemas(e):[],[e],!e)}function $u(e,t){return vt(async()=>!e||!t?[]:dt.listTables(e,t),[e,t],!e||!t)}function gj(e,t,n){return vt(async()=>!e||!t||!n?[]:dt.getTableColumns(e,t,n),[e,t,n],!e||!t||!n)}function Vg(e,t){return vt(async()=>!e||!t?[]:dt.listFunctions(e,t),[e,t],!e||!t)}function Pu(e,t){return vt(async()=>!e||!t?[]:dt.listVolumes(e,t),[e,t],!e||!t)}function xj(){return vt(()=>dt.listServingEndpoints(),[])}function vj(){return vt(()=>dt.listDatabases(),[])}function yj(){return vt(()=>dt.listSQLWarehouses(),[])}function Ug(){return vt(()=>dt.listGenieSpaces(),[])}function Hg(){return vt(()=>dt.listUCConnections(),[])}function qg(){return vt(()=>dt.listVectorSearchEndpoints(),[])}function Ou(e){return vt(async()=>e?dt.listVectorSearchIndexes(e):[],[e],!e)}function bj(e,t){return vt(async()=>!e||!t?[]:dt.listPrompts(e,t),[e,t],!e||!t)}function _j(e){return vt(async()=>e?dt.getPromptDetails(e):null,[e],!e)}function ho({label:e="Catalog",value:t,onChange:n,hint:s,required:a,disabled:l,placeholder:o="Select a catalog"}){const{data:i,loading:c,error:d}=vr(),m=Us(),f=[{value:"",label:o},...(i||[]).map(h=>({value:h.name,label:h.name}))];return r.jsx(ee,{label:e,value:t,onChange:h=>n(h.target.value),options:f,hint:m?c?"Loading catalogs...":d?"Failed to load catalogs":s:"Connect to Databricks first",required:a,disabled:l||c||!m})}function po({label:e="Schema",value:t,onChange:n,catalog:s,hint:a,required:l,disabled:o,placeholder:i="Select a schema"}){const{data:c,loading:d,error:m}=$n(s),f=Us();D.useEffect(()=>{t&&c&&!c.find(x=>x.name===t)&&n("")},[s,c,t,n]);const h=[{value:"",label:i},...(c||[]).map(x=>({value:x.name,label:x.name}))];return r.jsx(ee,{label:e,value:t,onChange:x=>n(x.target.value),options:h,hint:f?s?d?"Loading schemas...":m?"Failed to load schemas":a:"Select a catalog first":"Connect to Databricks first",required:l,disabled:o||d||!s||!f})}function hh({label:e="Genie Space",value:t,onChange:n,hint:s,required:a,disabled:l,placeholder:o="Select a Genie space"}){const{data:i,loading:c,error:d}=Ug(),m=Us(),f=x=>{let p=x.title;if(x.description){const y=x.description.length>50?x.description.substring(0,50)+"...":x.description;p+=` - ${y}`}return p},h=[{value:"",label:o},...(i||[]).map(x=>({value:x.space_id,label:f(x)}))];return r.jsx(ee,{label:e,value:t,onChange:x=>n(x.target.value),options:h,hint:m?c?"Loading Genie spaces...":d?"Failed to load Genie spaces":s:"Connect to Databricks first",required:a,disabled:l||c||!m})}function ph({label:e="Vector Search Endpoint",value:t,onChange:n,hint:s,required:a,disabled:l,placeholder:o="Select an endpoint"}){const{data:i,loading:c,error:d}=qg(),m=Us(),f=[{value:"",label:o},...(i||[]).map(h=>{var x;return{value:h.name,label:`${h.name}${(x=h.endpoint_status)!=null&&x.state?` (${h.endpoint_status.state})`:""}`}})];return r.jsx(ee,{label:e,value:t,onChange:h=>n(h.target.value),options:f,hint:m?c?"Loading endpoints...":d?"Failed to load endpoints":s:"Connect to Databricks first",required:a,disabled:l||c||!m})}function jj({label:e="UC Connection",value:t,onChange:n,hint:s,required:a,disabled:l,placeholder:o="Select a connection"}){const{data:i,loading:c,error:d}=Hg(),m=Us(),f=[{value:"",label:o},...(i||[]).map(h=>({value:h.name,label:`${h.name}${h.connection_type?` (${h.connection_type})`:""}`}))];return r.jsx(ee,{label:e,value:t,onChange:h=>n(h.target.value),options:f,hint:m?c?"Loading connections...":d?"Failed to load connections":(i==null?void 0:i.length)===0?"No UC connections found":s:"Connect to Databricks first",required:a,disabled:l||c||!m})}function oc(e,t){return`${e}_${t}`.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function Nj(){const{config:e,addSchema:t,removeSchema:n,updateSchema:s}=Ie(),[a,l]=D.useState(!1),[o,i]=D.useState(null),[c,d]=D.useState("select"),[m,f]=D.useState({name:"",catalogName:"",schemaName:""}),h=e.schemas||{},x=Us(),{data:p,loading:y,refetch:v}=vr(),{data:u}=$n(m.catalogName||null),g=()=>{f({name:"",catalogName:"",schemaName:""}),d("select"),i(null)},b=(R,_)=>{i(R),f({name:R,catalogName:_.catalog_name,schemaName:_.schema_name});const k=p==null?void 0:p.some(T=>T.name===_.catalog_name);d(k?"select":"create"),l(!0)},C=R=>{if(R.preventDefault(),m.name&&m.catalogName&&m.schemaName){const _={catalog_name:m.catalogName,schema_name:m.schemaName};o?s(o,_):t(m.name,_),g(),l(!1)}},$=R=>{f({...m,catalogName:R,schemaName:""})},M=c==="create"&&m.catalogName&&m.schemaName&&(u==null?void 0:u.some(R=>R.name===m.schemaName));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Schemas"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Define Unity Catalog schemas for your data and resources"})]}),r.jsxs(Y,{onClick:()=>{g(),l(!0)},children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Schema"]})]}),Object.keys(h).length===0?r.jsxs(ve,{className:"text-center py-12",children:[r.jsx(sn,{className:"w-12 h-12 mx-auto text-slate-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No schemas configured"}),r.jsx("p",{className:"text-slate-500 mb-4",children:"Schemas define where your data and resources are stored in Unity Catalog."}),r.jsxs(Y,{onClick:()=>{g(),l(!0)},children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Your First Schema"]})]}):r.jsx("div",{className:"grid gap-4",children:Object.entries(h).map(([R,_])=>{const k=p==null?void 0:p.some(T=>T.name===_.catalog_name);return r.jsx(ve,{variant:"interactive",className:"group cursor-pointer",onClick:()=>b(R,_),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx(sn,{className:"w-5 h-5 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-white",children:R}),r.jsxs("p",{className:"text-sm text-slate-400",children:[_.catalog_name,".",_.schema_name]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[k?r.jsx(we,{variant:"success",children:"Exists"}):r.jsx(we,{variant:"warning",children:"New"}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:T=>{T.stopPropagation(),b(R,_)},children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"danger",size:"sm",onClick:T=>{T.stopPropagation(),n(R)},children:r.jsx(Be,{className:"w-4 h-4"})})]})]})},R)})}),r.jsx(Vs,{isOpen:a,onClose:()=>{l(!1),g()},title:o?"Edit Schema":"Add Schema",description:"Configure a Unity Catalog schema reference",children:r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsx(X,{label:"Reference Name",placeholder:"e.g., retail_schema",value:m.name,onChange:R=>f({...m,name:R.target.value}),hint:"A unique identifier for this schema in your config",required:!0,disabled:!!o}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema Source"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>d("select"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c==="select"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:[r.jsx(sn,{className:"w-4 h-4 inline mr-2"}),"Select Existing"]}),r.jsxs("button",{type:"button",onClick:()=>d("create"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c==="create"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:[r.jsx(ke,{className:"w-4 h-4 inline mr-2"}),"Create New"]})]})]}),c==="select"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-400",children:"Select from existing Unity Catalog"}),r.jsxs("button",{type:"button",onClick:()=>v(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:y,children:[r.jsx($t,{className:`w-3 h-3 ${y?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),!x&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 text-amber-400 text-sm",children:"Connect to Databricks first to browse existing catalogs and schemas."}),r.jsx(ho,{label:"Catalog Name",value:m.catalogName,onChange:$,hint:"Select a Unity Catalog catalog",required:!0}),r.jsx(po,{label:"Schema Name",value:m.schemaName,onChange:R=>f({...m,schemaName:R,name:m.name||oc(m.catalogName,R)}),catalog:m.catalogName||null,hint:"Select a schema within the catalog",required:!0})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:r.jsxs("p",{className:"text-sm text-green-400",children:[r.jsx("strong",{children:"Note:"})," When you deploy your dao-ai agent, it will create these Unity Catalog resources if they don't exist. Make sure you have the appropriate permissions."]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:["Catalog Name ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:m.catalogName,onChange:R=>f({...m,catalogName:R.target.value}),placeholder:"e.g., retail_catalog",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),p&&p.length>0&&r.jsxs("select",{value:"",onChange:R=>{R.target.value&&f({...m,catalogName:R.target.value})},className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-400 cursor-pointer hover:border-slate-600",children:[r.jsx("option",{value:"",children:"Pick existing..."}),p.map(R=>r.jsx("option",{value:R.name,children:R.name},R.name))]})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter a new catalog name or pick an existing one"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:["Schema Name ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:m.schemaName,onChange:R=>{const _=R.target.value;f({...m,schemaName:_,name:m.name||oc(m.catalogName,_)})},placeholder:"e.g., hardware_store",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),m.catalogName&&u&&u.length>0&&r.jsxs("select",{value:"",onChange:R=>{R.target.value&&f({...m,schemaName:R.target.value,name:m.name||oc(m.catalogName,R.target.value)})},className:"px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-400 cursor-pointer hover:border-slate-600",children:[r.jsx("option",{value:"",children:"Pick existing..."}),u.map(R=>r.jsx("option",{value:R.name,children:R.name},R.name))]})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter a new schema name or pick an existing one"})]}),M&&r.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsx("p",{className:"text-sm text-blue-400",children:" This schema already exists in Unity Catalog"})})]})]}),m.catalogName&&m.schemaName&&r.jsxs("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Full schema path:"}),r.jsxs("code",{className:"text-sm text-white font-mono",children:[m.catalogName,".",m.schemaName]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:()=>{l(!1),g()},children:"Cancel"}),r.jsx(Y,{type:"submit",children:o?"Save Changes":"Add Schema"})]})]})})]})}const gh={ready:"bg-green-500",transitioning:"bg-yellow-500",stopped:"bg-red-500",unknown:"bg-slate-500"};function wl({value:e,onChange:t,options:n,placeholder:s="Select...",disabled:a=!1,className:l=""}){const[o,i]=D.useState(!1),c=D.useRef(null),d=n.find(x=>x.value===e);D.useEffect(()=>{const x=p=>{c.current&&!c.current.contains(p.target)&&i(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),D.useEffect(()=>{const x=p=>{p.key==="Escape"&&i(!1)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[]);const m=x=>{x&&!x.startsWith("__header")&&(t(x),i(!1))},f=[];let h="";return n.forEach(x=>{x.value.startsWith("__header")?(h=x.label,f.push({group:h,items:[]})):f.length>0?f[f.length-1].items.push(x):(f.length===0&&f.push({group:"",items:[]}),f[0].items.push(x))}),r.jsxs("div",{ref:c,className:`relative ${l}`,children:[r.jsxs("button",{type:"button",onClick:()=>!a&&i(!o),disabled:a,className:`
          w-full flex items-center justify-between px-3 py-2
          bg-slate-800 border border-slate-700 rounded-lg
          text-left text-sm
          ${a?"opacity-50 cursor-not-allowed":"hover:border-slate-600 cursor-pointer"}
          focus:outline-none focus:ring-2 focus:ring-blue-500
          transition-colors
        `,children:[r.jsxs("span",{className:"flex items-center gap-2 truncate",children:[(d==null?void 0:d.status)&&r.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${gh[d.status]}`}),r.jsx("span",{className:d?"text-white":"text-slate-400",children:(d==null?void 0:d.label)||s})]}),r.jsx(Ls,{className:`w-4 h-4 text-slate-400 transition-transform ${o?"rotate-180":""}`})]}),o&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:f.map((x,p)=>r.jsxs("div",{children:[x.group&&r.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold text-slate-500 bg-slate-900/50 sticky top-0",children:x.group.replace(/^\s*/,"").replace(/\s*$/,"")}),x.items.map(y=>r.jsxs("button",{type:"button",onClick:()=>m(y.value),disabled:y.disabled,className:`
                    w-full flex items-center gap-2 px-3 py-2 text-sm text-left
                    ${y.disabled?"opacity-50 cursor-not-allowed":"hover:bg-slate-700/50 cursor-pointer"}
                    ${y.value===e?"bg-blue-500/20 text-blue-400":"text-slate-200"}
                    transition-colors
                  `,children:[y.status&&r.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${gh[y.status]}`}),r.jsx("span",{className:"truncate flex-1",children:y.label}),y.value===e&&r.jsx(zd,{className:"w-4 h-4 text-blue-400 flex-shrink-0"})]},y.value))]},p))})]})}function fr(e,t){return typeof e=="string"&&e.startsWith(t)}function Bt(e){return typeof e=="string"?e:""}const wj=[{id:"llms",label:"LLMs",icon:_u,description:"Language models"},{id:"genie_rooms",label:"Genie Rooms",icon:sa,description:"AI-powered data assistants"},{id:"warehouses",label:"SQL Warehouses",icon:sn,description:"SQL compute resources"},{id:"tables",label:"Tables",icon:Su,description:"Unity Catalog tables"},{id:"volumes",label:"Volumes",icon:ju,description:"Unity Catalog volumes"},{id:"functions",label:"Functions",icon:bu,description:"Unity Catalog functions"},{id:"connections",label:"Connections",icon:Nu,description:"External connections"},{id:"databases",label:"Databases",icon:Bo,description:"Lakebase/PostgreSQL backends"},{id:"vector_stores",label:"Vector Stores",icon:En,description:"Vector search indexes"}],xh=[{value:"databricks-claude-3-7-sonnet",label:"Claude 3.7 Sonnet"},{value:"databricks-claude-sonnet-4",label:"Claude Sonnet 4"},{value:"databricks-meta-llama-3-3-70b-instruct",label:"Llama 3.3 70B Instruct"},{value:"databricks-meta-llama-3-1-405b-instruct",label:"Llama 3.1 405B Instruct"},{value:"databricks-meta-llama-3-1-8b-instruct",label:"Llama 3.1 8B Instruct"},{value:"databricks-dbrx-instruct",label:"DBRX Instruct"},{value:"databricks-gte-large-en",label:"GTE Large (Embeddings)"}];function Me(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")}function Sj(){const{config:e}=Ie(),t=e.resources,[n,s]=D.useState("llms"),[a,l]=D.useState(!1),[o,i]=D.useState(null),c=()=>{l(!1),i(null)},d=()=>{switch(n){case"llms":return r.jsx(Cj,{});case"genie_rooms":return r.jsx(Ej,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"warehouses":return r.jsx($j,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"tables":return r.jsx(Pj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"volumes":return r.jsx(Oj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"functions":return r.jsx(Rj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"connections":return r.jsx(Aj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"databases":return r.jsx(Dj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});case"vector_stores":return r.jsx(zj,{showForm:a,setShowForm:l,editingKey:o,setEditingKey:i,onClose:c});default:return null}},m=f=>{switch(f){case"llms":return Object.keys((t==null?void 0:t.llms)||{}).length;case"genie_rooms":return Object.keys((t==null?void 0:t.genie_rooms)||{}).length;case"tables":return Object.keys((t==null?void 0:t.tables)||{}).length;case"volumes":return Object.keys((t==null?void 0:t.volumes)||{}).length;case"functions":return Object.keys((t==null?void 0:t.functions)||{}).length;case"warehouses":return Object.keys((t==null?void 0:t.warehouses)||{}).length;case"connections":return Object.keys((t==null?void 0:t.connections)||{}).length;case"databases":return Object.keys((t==null?void 0:t.databases)||{}).length;case"vector_stores":return Object.keys((t==null?void 0:t.vector_stores)||{}).length;default:return 0}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Resources"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure Databricks resources that can be referenced in tools, agents, and other parts of your configuration."})]}),r.jsx(ve,{className:"p-4 bg-blue-900/20 border-blue-500/30",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ud,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-blue-300",children:[r.jsx("p",{className:"font-medium",children:"Resource References"}),r.jsxs("p",{className:"mt-1 text-blue-400/80",children:["Resources defined here can be referenced by their ",r.jsx("strong",{children:"reference name"}),' (the key) in tools and other configuration sections. For example, a Genie room named "retail_genie" can be used in tools to create Genie-powered assistants.']})]})]})}),r.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-700 pb-4",children:wj.map(f=>{const h=f.icon,x=m(f.id);return r.jsxs("button",{onClick:()=>{s(f.id),l(!1),i(null)},className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${n===f.id?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-slate-800/50 text-slate-400 hover:bg-slate-800 hover:text-slate-300"}`,children:[r.jsx(h,{className:"w-4 h-4"}),r.jsx("span",{children:f.label}),x>0&&r.jsx(we,{variant:"default",className:"ml-1",children:x})]},f.id)})}),r.jsx("div",{children:d()})]})}function kj({index:e,fallback:t,isReference:n,refKey:s,hasConfiguredLLMs:a,llms:l,endpoints:o,editingKey:i,formDataName:c,onUpdate:d,onRemove:m,getEndpointStatus:f}){const[h,x]=D.useState(n?"reference":"endpoint"),p=Object.entries(l).filter(([u])=>u!==i&&u!==c).map(([u,g])=>({value:`ref:${u}`,label:`*${u}  ${g.name}`})),y=o.map(u=>({value:u.name,label:u.name,status:f(u.state)})),v=u=>{x(u),d("")};return r.jsxs("div",{className:"p-3 bg-slate-900/50 rounded-lg border border-slate-700 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:["Fallback #",e+1]}),r.jsx(Y,{variant:"ghost",size:"sm",type:"button",onClick:m,children:r.jsx(Be,{className:"w-3 h-3 text-red-400"})})]}),a&&r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>v("reference"),className:`flex-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${h==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured LLM"}),r.jsx("button",{type:"button",onClick:()=>v("endpoint"),className:`flex-1 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${h==="endpoint"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Endpoint"})]}),h==="reference"&&a?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:t,onChange:u=>d(u.target.value),options:[{value:"",label:"Select a configured LLM..."},...p]}),n&&s&&l[s]&&r.jsxs("div",{className:"p-2 bg-slate-800/50 rounded text-xs",children:[r.jsx("span",{className:"text-blue-400",children:"YAML output:"})," ",r.jsxs("code",{className:"text-slate-300",children:["*",s]}),r.jsxs("span",{className:"text-slate-500 ml-2",children:[" ",l[s].name]})]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx(wl,{value:fr(t,"ref:")?"":Bt(t),onChange:d,options:[{value:"",label:"Select an endpoint..."},...y],placeholder:"Select an endpoint..."}),t&&!fr(t,"ref:")&&r.jsxs("div",{className:"p-2 bg-slate-800/50 rounded text-xs",children:[r.jsx("span",{className:"text-green-400",children:"YAML output:"})," ",r.jsx("code",{className:"text-slate-300",children:t})]})]})]})}function Cj(){var T;const{config:e,addLLM:t,removeLLM:n,updateLLM:s}=Ie(),[a,l]=D.useState(!1),[o,i]=D.useState(null),[c,d]=D.useState("preset"),[m,f]=D.useState(!1),[h,x]=D.useState({name:"",modelName:"",customModelName:"",temperature:"0.1",maxTokens:"8192",onBehalfOfUser:!1,fallbacks:[]}),{data:p,loading:y,refetch:v}=xj(),u=((T=e.resources)==null?void 0:T.llms)||{},g=()=>{x({name:"",modelName:"",customModelName:"",temperature:"0.1",maxTokens:"8192",onBehalfOfUser:!1,fallbacks:[]}),d("preset"),f(!1),i(null)},b=(w,F)=>{i(w);const L=(F.fallbacks||[]).map(A=>{const H=typeof A=="string"?A:A.name;return Object.keys(u).includes(H)&&H!==w?`ref:${H}`:H});x({name:w,modelName:F.name,customModelName:F.name,temperature:String(F.temperature??.1),maxTokens:String(F.max_tokens??8192),onBehalfOfUser:F.on_behalf_of_user??!1,fallbacks:L}),xh.some(A=>A.value===F.name)?d("preset"):p!=null&&p.some(A=>A.name===F.name)?d("endpoint"):d("custom"),f(!!(F.on_behalf_of_user||F.fallbacks&&F.fallbacks.length>0)),l(!0)},C=w=>{w.preventDefault();let F="";switch(c){case"preset":F=h.modelName;break;case"endpoint":F=h.modelName;break;case"custom":F=h.customModelName;break}if(h.name&&F){const L={name:F,temperature:parseFloat(h.temperature),max_tokens:parseInt(h.maxTokens)};h.onBehalfOfUser&&(L.on_behalf_of_user=!0),h.fallbacks.length>0&&(L.fallbacks=h.fallbacks),o?o!==h.name?(n(o),t(h.name,L)):s(o,L):t(h.name,L),g(),l(!1)}},$=()=>{x({...h,fallbacks:[...h.fallbacks,""]})},M=(w,F)=>{const L=[...h.fallbacks];L[w]=F,x({...h,fallbacks:L})},R=w=>{x({...h,fallbacks:h.fallbacks.filter((F,L)=>L!==w)})},_=w=>{var L;switch((L=w==null?void 0:w.ready)==null?void 0:L.toUpperCase()){case"READY":return"ready";case"NOT_READY":return"transitioning";default:return"unknown"}},k=[{value:"",label:y?"Loading endpoints...":"Select an endpoint..."},...(p||[]).map(w=>({value:w.name,label:w.name,status:_(w.state)}))];return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(_u,{className:"w-5 h-5 text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Language Models"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>l(!0),children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add LLM"]})]}),Object.keys(u).length>0?r.jsx("div",{className:"space-y-2",children:Object.entries(u).map(([w,F])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700 cursor-pointer hover:bg-slate-800/70 transition-colors",onClick:()=>b(w,F),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(_u,{className:"w-4 h-4 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:w}),r.jsx("p",{className:"text-xs text-slate-500",children:F.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[F.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),F.fallbacks&&F.fallbacks.length>0&&r.jsxs(we,{variant:"warning",title:`${F.fallbacks.length} fallback(s)`,children:[r.jsx(En,{className:"w-3 h-3 mr-1"}),F.fallbacks.length]}),r.jsxs(we,{variant:"info",children:["temp: ",F.temperature??.1]}),r.jsxs(we,{variant:"default",children:["tokens: ",F.max_tokens??8192]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),n(w)},children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},w))}):r.jsx("p",{className:"text-slate-500 text-sm",children:"No LLMs configured. Add language models that will power your AI agents."}),r.jsx(Vs,{isOpen:a,onClose:()=>{l(!1),g()},title:o?"Edit Language Model":"Add Language Model",description:"Configure an LLM for your agents to use",children:r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsx(X,{label:"Reference Name",placeholder:"e.g., default_llm",value:h.name,onChange:w=>x({...h,name:w.target.value}),hint:o?"Changing this will update all references in the YAML":"A unique identifier for this LLM in your config",required:!0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Model Source"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>d("preset"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c==="preset"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Preset Models"}),r.jsx("button",{type:"button",onClick:()=>d("endpoint"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c==="endpoint"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Serving Endpoint"}),r.jsx("button",{type:"button",onClick:()=>d("custom"),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c==="custom"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Custom"})]})]}),c==="preset"&&r.jsx(ee,{label:"Model",options:[{value:"",label:"Select a model..."},...xh],value:h.modelName,onChange:w=>x({...h,modelName:w.target.value,name:h.name||Me(w.target.value)}),required:!0}),c==="endpoint"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Serving Endpoint"}),r.jsxs("button",{type:"button",onClick:()=>v(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:y,children:[r.jsx($t,{className:`w-3 h-3 ${y?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),r.jsx(wl,{options:k,value:h.modelName,onChange:w=>x({...h,modelName:w,name:h.name||Me(w)}),disabled:y,placeholder:"Select an endpoint..."}),y&&r.jsx("p",{className:"text-xs text-slate-500",children:"Loading endpoints from Databricks..."})]}),c==="custom"&&r.jsx(X,{label:"Custom Model Name",placeholder:"e.g., my-custom-endpoint",value:h.customModelName,onChange:w=>x({...h,customModelName:w.target.value}),hint:"Enter the name of your custom model endpoint",required:!0}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Temperature",type:"number",step:"0.1",min:"0",max:"2",value:h.temperature,onChange:w=>x({...h,temperature:w.target.value}),hint:"0.0 = deterministic, 2.0 = creative"}),r.jsx(X,{label:"Max Tokens",type:"number",min:"1",max:"128000",value:h.maxTokens,onChange:w=>x({...h,maxTokens:w.target.value}),hint:"Maximum response length"})]}),r.jsxs("button",{type:"button",onClick:()=>f(!m),className:"flex items-center space-x-2 text-sm text-slate-400 hover:text-white transition-colors",children:[m?r.jsx(Ni,{className:"w-4 h-4"}):r.jsx(Ls,{className:"w-4 h-4"}),r.jsx("span",{children:"Advanced Options"}),(h.onBehalfOfUser||h.fallbacks.length>0)&&r.jsxs(we,{variant:"info",className:"ml-2",children:[(h.onBehalfOfUser?1:0)+(h.fallbacks.length>0?1:0)," configured"]})]}),m&&r.jsxs("div",{className:"space-y-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",id:"onBehalfOfUser",checked:h.onBehalfOfUser,onChange:w=>x({...h,onBehalfOfUser:w.target.checked}),className:"mt-1 rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"onBehalfOfUser",className:"block text-sm font-medium text-slate-300 cursor-pointer",children:"On Behalf of User"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"When enabled, API calls will use the requesting user's credentials."})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Fallback Models"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Alternative models to try if the primary model fails."})]}),r.jsxs(Y,{variant:"secondary",size:"sm",type:"button",onClick:$,children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Fallback"]})]}),h.fallbacks.length>0?r.jsx("div",{className:"space-y-3",children:h.fallbacks.map((w,F)=>{const L=Bt(w),A=fr(L,"ref:"),H=A?L.slice(4):null,ie=Object.keys(u).filter(te=>te!==o&&te!==h.name).length>0;return r.jsx(kj,{index:F,fallback:w,isReference:A,refKey:H,hasConfiguredLLMs:ie,llms:u,endpoints:p||[],editingKey:o,formDataName:h.name,onUpdate:te=>M(F,te),onRemove:()=>R(F),getEndpointStatus:_},F)})}):r.jsx("p",{className:"text-xs text-slate-500 italic",children:"No fallbacks configured."})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:()=>{l(!1),g()},children:"Cancel"}),r.jsx(Y,{type:"submit",children:o?"Save Changes":"Add LLM"})]})]})})]})}function Ej({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var M;const{config:l,addGenieRoom:o,updateGenieRoom:i,removeGenieRoom:c}=Ie(),d=((M=l.resources)==null?void 0:M.genie_rooms)||{},m=l.variables||{},{data:f,loading:h,refetch:x}=Ug(),[p,y]=D.useState("select"),[v,u]=D.useState({refName:"",name:"",description:"",space_id:"",space_id_variable:"",on_behalf_of_user:!1}),g=R=>{const _=d[R],k=Bt(_.space_id),T=fr(k,"*"),w=f==null?void 0:f.some(F=>F.space_id===k);y(T?"variable":w?"select":"manual"),u({refName:R,name:_.name,description:_.description||"",space_id:T?"":k,space_id_variable:T?k.substring(1):"",on_behalf_of_user:_.on_behalf_of_user||!1}),s(R),t(!0)},b=()=>{let R=v.space_id;p==="variable"&&v.space_id_variable&&(R=`*${v.space_id_variable}`);const _={name:v.name,description:v.description||void 0,space_id:R,on_behalf_of_user:v.on_behalf_of_user};n?(n!==v.refName&&c(n),i(v.refName,_)):o(v.refName,_),y("select"),u({refName:"",name:"",description:"",space_id:"",space_id_variable:"",on_behalf_of_user:!1}),a()},C=R=>{c(R)},$=[{value:"",label:h?"Loading Genie spaces...":"Select a Genie space..."},...(f||[]).map(R=>({value:R.space_id,label:`${R.title}${R.description?` - ${R.description.substring(0,50)}${R.description.length>50?"...":""}`:""}`}))];return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sa,{className:"w-5 h-5 text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Genie Rooms"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{y("select"),u({refName:"",name:"",description:"",space_id:"",space_id_variable:"",on_behalf_of_user:!1}),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Genie Room"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([R,_])=>{var k;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sa,{className:"w-4 h-4 text-purple-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:R}),r.jsxs("p",{className:"text-xs text-slate-500",children:[_.name,"  Space ID: ",(k=_.space_id)==null?void 0:k.substring(0,12),"..."]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[_.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>g(R),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>C(R),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},R)})}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No Genie rooms configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Genie Room"]}),r.jsx(X,{label:"Reference Name",value:v.refName,onChange:R=>u({...v,refName:R.target.value}),placeholder:"retail_genie",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Genie Space"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{y("select"),u({...v,space_id:"",space_id_variable:"",name:"",description:""})},className:`px-2 py-1 text-xs rounded ${p==="select"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"}),r.jsx("button",{type:"button",onClick:()=>{y("manual"),u({...v,space_id:"",space_id_variable:"",name:"",description:""})},className:`px-2 py-1 text-xs rounded ${p==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"}),r.jsxs("button",{type:"button",onClick:()=>{y("variable"),u({...v,space_id:"",space_id_variable:"",name:"",description:""})},className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${p==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]})]})]}),p==="select"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(ee,{value:v.space_id,onChange:R=>{const _=R.target.value,k=f==null?void 0:f.find(F=>F.space_id===_),T=(k==null?void 0:k.title)||"",w=(k==null?void 0:k.description)||"";u({...v,space_id:_,space_id_variable:"",refName:n?v.refName:Me(T),name:T,description:w})},options:$})}),r.jsx("button",{type:"button",onClick:()=>x(),className:"p-2 text-slate-400 hover:text-white",disabled:h,children:r.jsx($t,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Select from ",(f==null?void 0:f.length)||0," available Genie spaces. Display Name and Description will auto-fill."]})]}),p==="manual"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{value:v.space_id,onChange:R=>{const _=R.target.value;u({...v,space_id:_,space_id_variable:"",refName:n?v.refName:Me(_)})},placeholder:"01f0d05d42ed11eeae85802c1d5bcccd"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Enter the Genie space ID directly. You can find this in the Genie room URL."})]}),p==="variable"&&r.jsxs("div",{className:"space-y-2",children:[Object.keys(m).length>0?r.jsx(ee,{value:v.space_id_variable,onChange:R=>{const _=R.target.value;u({...v,space_id_variable:_,space_id:"",refName:n?v.refName:Me(_||"genie")})},options:[{value:"",label:"Select a variable..."},...Object.keys(m).map(R=>({value:R,label:R}))]}):r.jsx(X,{value:v.space_id_variable,onChange:R=>{const _=R.target.value;u({...v,space_id_variable:_,space_id:"",refName:n?v.refName:Me(_||"genie")})},placeholder:"genie_space_id"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Reference a variable containing the Genie space ID. The value will be resolved at runtime."})]})]}),r.jsx(X,{label:"Display Name",value:v.name,onChange:R=>u({...v,name:R.target.value}),placeholder:"Retail Analytics Genie",required:!0}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Description"}),r.jsx("textarea",{value:v.description,onChange:R=>u({...v,description:R.target.value}),placeholder:"Query retail data using natural language",rows:3,className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.on_behalf_of_user,onChange:R=>u({...v,on_behalf_of_user:R.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"}),r.jsx("span",{className:"text-xs text-slate-500",children:"(Use requesting user's credentials)"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:b,disabled:!v.refName||!v.name||p==="select"&&!v.space_id||p==="manual"&&!v.space_id||p==="variable"&&!v.space_id_variable,children:n?"Update":"Add"})]})]})]})}function $j({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var R;const{config:l,addWarehouse:o,updateWarehouse:i,removeWarehouse:c}=Ie(),d=((R=l.resources)==null?void 0:R.warehouses)||{},m=l.variables||{},{data:f,loading:h,refetch:x}=yj(),[p,y]=D.useState("select"),[v,u]=D.useState({refName:"",name:"",description:"",warehouse_id:"",warehouse_id_variable:"",on_behalf_of_user:!1}),g=_=>{const k=d[_],T=Bt(k.warehouse_id),w=fr(T,"__REF__"),F=w?T.substring(7):"",L=w?"":T;let A="manual";w?A="variable":f!=null&&f.some(H=>H.id===T)&&(A="select"),y(A),u({refName:_,name:k.name,description:k.description||"",warehouse_id:L,warehouse_id_variable:F,on_behalf_of_user:k.on_behalf_of_user||!1}),s(_),t(!0)},b=()=>{let _=v.warehouse_id;p==="variable"&&v.warehouse_id_variable&&(_=`__REF__${v.warehouse_id_variable}`);const k={name:v.name,description:v.description||void 0,warehouse_id:_,on_behalf_of_user:v.on_behalf_of_user};n?(n!==v.refName&&c(n),i(v.refName,k)):o(v.refName,k),u({refName:"",name:"",description:"",warehouse_id:"",warehouse_id_variable:"",on_behalf_of_user:!1}),y("select"),a()},C=_=>{c(_)},$=_=>{switch(_==null?void 0:_.toUpperCase()){case"RUNNING":return"ready";case"STARTING":case"STOPPING":case"RESTARTING":return"transitioning";case"STOPPED":case"DELETED":case"DELETING":return"stopped";default:return"unknown"}},M=[{value:"",label:h?"Loading...":"Select a SQL warehouse..."},...(f||[]).map(_=>({value:_.id,label:_.name,status:$(_.state)}))];return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sn,{className:"w-5 h-5 text-emerald-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"SQL Warehouses"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{u({refName:"",name:"",description:"",warehouse_id:"",warehouse_id_variable:"",on_behalf_of_user:!1}),y("select"),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Warehouse"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([_,k])=>{const T=Bt(k.warehouse_id),w=fr(T,"__REF__"),F=w?`$${T.substring(7)}`:`${T==null?void 0:T.substring(0,12)}...`;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sn,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:_}),r.jsxs("p",{className:"text-xs text-slate-500",children:[k.name,"  ",w?"Var: ":"ID: ",F]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[k.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>g(_),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>C(_),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},_)})}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No SQL warehouses configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," SQL Warehouse"]}),r.jsx(X,{label:"Reference Name",value:v.refName,onChange:_=>u({...v,refName:_.target.value}),placeholder:"main_warehouse",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Warehouse ID"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{y("select"),u({...v,warehouse_id_variable:""})},className:`px-2 py-1 text-xs rounded ${p==="select"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"}),r.jsx("button",{type:"button",onClick:()=>{y("manual"),u({...v,warehouse_id_variable:""})},className:`px-2 py-1 text-xs rounded ${p==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"}),r.jsxs("button",{type:"button",onClick:()=>{y("variable"),u({...v,warehouse_id:""})},className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${p==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]})]})]}),p==="select"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(wl,{value:v.warehouse_id,onChange:_=>{const k=f==null?void 0:f.find(w=>w.id===_),T=(k==null?void 0:k.name)||"";u({...v,warehouse_id:_,warehouse_id_variable:"",refName:n?v.refName:Me(T),name:T||v.name||""})},options:M,placeholder:"Select a SQL warehouse..."})}),r.jsx("button",{type:"button",onClick:()=>x(),className:"p-2 text-slate-400 hover:text-white",disabled:h,children:r.jsx($t,{className:`w-4 h-4 ${h?"animate-spin":""}`})})]}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Select from ",(f==null?void 0:f.length)||0," available SQL warehouses. Display Name will auto-fill."]})]}),p==="manual"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(X,{value:v.warehouse_id,onChange:_=>{const k=_.target.value;u({...v,warehouse_id:k,warehouse_id_variable:"",refName:n?v.refName:Me(k)})},placeholder:"abc123def456"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Enter the warehouse ID directly. You can find this in the SQL warehouse settings."})]}),p==="variable"&&r.jsxs("div",{className:"space-y-2",children:[Object.keys(m).length>0?r.jsx(ee,{value:v.warehouse_id_variable,onChange:_=>{const k=_.target.value;u({...v,warehouse_id_variable:k,warehouse_id:"",refName:n?v.refName:Me(k||"warehouse")})},options:[{value:"",label:"Select a variable..."},...Object.keys(m).map(_=>({value:_,label:_}))]}):r.jsx(X,{value:v.warehouse_id_variable,onChange:_=>{const k=_.target.value;u({...v,warehouse_id_variable:k,warehouse_id:"",refName:n?v.refName:Me(k||"warehouse")})},placeholder:"warehouse_id"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Reference a variable containing the warehouse ID. The value will be resolved at runtime."})]})]}),r.jsx(X,{label:"Display Name",value:v.name,onChange:_=>u({...v,name:_.target.value}),placeholder:"Main Analytics Warehouse",required:!0}),r.jsx(X,{label:"Description",value:v.description,onChange:_=>u({...v,description:_.target.value}),placeholder:"Primary warehouse for analytics queries"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.on_behalf_of_user,onChange:_=>u({...v,on_behalf_of_user:_.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"}),r.jsx("span",{className:"text-xs text-slate-500",children:"(Use requesting user's credentials)"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:b,disabled:!v.refName||!v.name||p==="select"&&!v.warehouse_id||p==="manual"&&!v.warehouse_id||p==="variable"&&!v.warehouse_id_variable,children:n?"Update":"Add"})]})]})]})}function Pj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var w,F,L;const{config:l,addTable:o,updateTable:i,removeTable:c}=Ie(),d=((w=l.resources)==null?void 0:w.tables)||{},m=l.schemas||{},{data:f}=vr(),[h,x]=D.useState("reference"),[p,y]=D.useState({schemaRef:"",catalog_name:"",schema_name:"",source:"reference"}),[v,u]=D.useState({refName:"",schemaRef:"",catalog_name:"",schema_name:"",name:"",on_behalf_of_user:!1}),{data:g,loading:b}=$n(v.catalog_name||null),{data:C,loading:$}=$u(h==="reference"&&v.schemaRef?(F=m[v.schemaRef])==null?void 0:F.catalog_name:v.catalog_name||null,h==="reference"&&v.schemaRef?(L=m[v.schemaRef])==null?void 0:L.schema_name:v.schema_name||null),M=A=>{var z,q,U;const H=d[A],te=H.schema&&Object.entries(m).some(([,O])=>{var V,I;return O.catalog_name===((V=H.schema)==null?void 0:V.catalog_name)&&O.schema_name===((I=H.schema)==null?void 0:I.schema_name)})?(z=Object.entries(m).find(([,O])=>{var V,I;return O.catalog_name===((V=H.schema)==null?void 0:V.catalog_name)&&O.schema_name===((I=H.schema)==null?void 0:I.schema_name)}))==null?void 0:z[0]:"";x(te?"reference":"direct"),u({refName:A,schemaRef:te||"",catalog_name:((q=H.schema)==null?void 0:q.catalog_name)||"",schema_name:((U=H.schema)==null?void 0:U.schema_name)||"",name:H.name||"",on_behalf_of_user:H.on_behalf_of_user||!1}),s(A),t(!0)},R=()=>{const A={name:v.name||void 0,on_behalf_of_user:v.on_behalf_of_user};if(h==="reference"&&v.schemaRef){const H=m[v.schemaRef];H&&(A.schema={catalog_name:H.catalog_name,schema_name:H.schema_name})}else v.catalog_name&&v.schema_name&&(A.schema={catalog_name:v.catalog_name,schema_name:v.schema_name});n?(n!==v.refName&&c(n),i(v.refName,A)):o(v.refName,A),y({schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,source:h}),u({refName:"",schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,name:"",on_behalf_of_user:!1}),a()},_=A=>{c(A)},k=Object.keys(m).length>0,T=h==="reference"?!!v.schemaRef:!!v.catalog_name&&!!v.schema_name;return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Su,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Tables"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{u({refName:"",schemaRef:p.schemaRef,catalog_name:p.catalog_name,schema_name:p.schema_name,name:"",on_behalf_of_user:!1}),x(p.source),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Table"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([A,H])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Su,{className:"w-4 h-4 text-cyan-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:A}),r.jsx("p",{className:"text-xs text-slate-500",children:H.schema?`${H.schema.catalog_name}.${H.schema.schema_name}${H.name?`.${H.name}`:".*"}`:H.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[H.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>M(A),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>_(A),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},A))}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No tables configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Table"]}),r.jsx(X,{label:"Reference Name",value:v.refName,onChange:A=>u({...v,refName:A.target.value}),placeholder:"sales_data",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),k&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema Source"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{x("reference"),u({...v,catalog_name:"",schema_name:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured Schema"}),r.jsx("button",{type:"button",onClick:()=>{x("direct"),u({...v,schemaRef:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="direct"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Catalog/Schema"})]})]}),h==="reference"&&k?r.jsx(ee,{label:"Schema Reference",value:v.schemaRef,onChange:A=>{const H=A.target.value,ie=m[H],te=ie?Me(`${ie.catalog_name}_${ie.schema_name}_tables`):"";u({...v,schemaRef:H,name:"",refName:v.refName||te})},options:[{value:"",label:"Select a configured schema..."},...Object.entries(m).map(([A,H])=>({value:A,label:`${A} (${H.catalog_name}.${H.schema_name})`}))],hint:"Reference a schema defined in the Schemas section"}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Catalog",value:v.catalog_name,onChange:A=>u({...v,catalog_name:A.target.value,schema_name:"",name:""}),options:[{value:"",label:"Select catalog..."},...(f||[]).map(A=>({value:A.name,label:A.name}))]}),r.jsx(ee,{label:"Schema",value:v.schema_name,onChange:A=>{const H=A.target.value,ie=H?Me(`${v.catalog_name}_${H}_tables`):"";u({...v,schema_name:H,name:"",refName:v.refName||ie})},options:[{value:"",label:b?"Loading schemas...":"Select schema..."},...(g||[]).map(A=>({value:A.name,label:A.name}))],disabled:!v.catalog_name||b})]}),h==="reference"&&v.schemaRef&&m[v.schemaRef]&&r.jsxs("div",{className:"p-2 bg-slate-900/50 rounded text-xs text-slate-400",children:["Using schema: ",r.jsxs("span",{className:"text-slate-300",children:[m[v.schemaRef].catalog_name,".",m[v.schemaRef].schema_name]})]}),r.jsx(ee,{label:"Table",value:v.name,onChange:A=>{const H=A.target.value;u(ie=>{let te="";if(H)te=Me(H);else if(h==="reference"&&ie.schemaRef){const q=m[ie.schemaRef];q&&(te=Me(`${q.catalog_name}_${q.schema_name}_tables`))}else ie.catalog_name&&ie.schema_name&&(te=Me(`${ie.catalog_name}_${ie.schema_name}_tables`));const z=n&&ie.refName;return{...ie,name:H,refName:z?ie.refName:te}})},options:[{value:"",label:$?"Loading tables...":"All tables (*)"},...(C||[]).map(A=>({value:A.name,label:A.name}))],disabled:!T||$,hint:"Leave empty for all tables in schema"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.on_behalf_of_user,onChange:A=>u({...v,on_behalf_of_user:A.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:R,disabled:!v.refName||!T,children:n?"Update":"Add"})]})]})]})}function Oj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var w,F,L;const{config:l,addVolume:o,updateVolume:i,removeVolume:c}=Ie(),d=((w=l.resources)==null?void 0:w.volumes)||{},m=l.schemas||{},{data:f}=vr(),[h,x]=D.useState("reference"),[p,y]=D.useState({schemaRef:"",catalog_name:"",schema_name:"",source:"reference"}),[v,u]=D.useState({refName:"",schemaRef:"",catalog_name:"",schema_name:"",name:"",on_behalf_of_user:!1}),{data:g,loading:b}=$n(v.catalog_name||null),{data:C,loading:$}=Pu(h==="reference"&&v.schemaRef?(F=m[v.schemaRef])==null?void 0:F.catalog_name:v.catalog_name||null,h==="reference"&&v.schemaRef?(L=m[v.schemaRef])==null?void 0:L.schema_name:v.schema_name||null),M=A=>{var z,q,U;const H=d[A],te=H.schema&&Object.entries(m).some(([,O])=>{var V,I;return O.catalog_name===((V=H.schema)==null?void 0:V.catalog_name)&&O.schema_name===((I=H.schema)==null?void 0:I.schema_name)})?(z=Object.entries(m).find(([,O])=>{var V,I;return O.catalog_name===((V=H.schema)==null?void 0:V.catalog_name)&&O.schema_name===((I=H.schema)==null?void 0:I.schema_name)}))==null?void 0:z[0]:"";x(te?"reference":"direct"),u({refName:A,schemaRef:te||"",catalog_name:((q=H.schema)==null?void 0:q.catalog_name)||"",schema_name:((U=H.schema)==null?void 0:U.schema_name)||"",name:H.name||"",on_behalf_of_user:H.on_behalf_of_user||!1}),s(A),t(!0)},R=()=>{const A={name:v.name,on_behalf_of_user:v.on_behalf_of_user};if(h==="reference"&&v.schemaRef){const H=m[v.schemaRef];H&&(A.schema={catalog_name:H.catalog_name,schema_name:H.schema_name})}else v.catalog_name&&v.schema_name&&(A.schema={catalog_name:v.catalog_name,schema_name:v.schema_name});n?(n!==v.refName&&c(n),i(v.refName,A)):o(v.refName,A),y({schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,source:h}),u({refName:"",schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,name:"",on_behalf_of_user:!1}),a()},_=A=>{c(A)},k=Object.keys(m).length>0,T=h==="reference"?!!v.schemaRef:!!v.catalog_name&&!!v.schema_name;return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ju,{className:"w-5 h-5 text-amber-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Volumes"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{u({refName:"",schemaRef:p.schemaRef,catalog_name:p.catalog_name,schema_name:p.schema_name,name:"",on_behalf_of_user:!1}),x(p.source),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Volume"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([A,H])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ju,{className:"w-4 h-4 text-amber-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:A}),r.jsx("p",{className:"text-xs text-slate-500",children:H.schema?`${H.schema.catalog_name}.${H.schema.schema_name}.${H.name}`:H.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[H.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>M(A),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>_(A),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},A))}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No volumes configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Volume"]}),r.jsx(X,{label:"Reference Name",value:v.refName,onChange:A=>u({...v,refName:A.target.value}),placeholder:"data_volume",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),k&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema Source"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{x("reference"),u({...v,catalog_name:"",schema_name:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured Schema"}),r.jsx("button",{type:"button",onClick:()=>{x("direct"),u({...v,schemaRef:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="direct"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Catalog/Schema"})]})]}),h==="reference"&&k?r.jsx(ee,{label:"Schema Reference",value:v.schemaRef,onChange:A=>{const H=A.target.value;u({...v,schemaRef:H,name:""})},options:[{value:"",label:"Select a configured schema..."},...Object.entries(m).map(([A,H])=>({value:A,label:`${A} (${H.catalog_name}.${H.schema_name})`}))],hint:"Reference a schema defined in the Schemas section"}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Catalog",value:v.catalog_name,onChange:A=>u({...v,catalog_name:A.target.value,schema_name:"",name:""}),options:[{value:"",label:"Select catalog..."},...(f||[]).map(A=>({value:A.name,label:A.name}))]}),r.jsx(ee,{label:"Schema",value:v.schema_name,onChange:A=>u({...v,schema_name:A.target.value,name:""}),options:[{value:"",label:b?"Loading schemas...":"Select schema..."},...(g||[]).map(A=>({value:A.name,label:A.name}))],disabled:!v.catalog_name||b})]}),h==="reference"&&v.schemaRef&&m[v.schemaRef]&&r.jsxs("div",{className:"p-2 bg-slate-900/50 rounded text-xs text-slate-400",children:["Using schema: ",r.jsxs("span",{className:"text-slate-300",children:[m[v.schemaRef].catalog_name,".",m[v.schemaRef].schema_name]})]}),r.jsx(ee,{label:"Volume",value:v.name,onChange:A=>{const H=A.target.value;u({...v,name:H,refName:v.refName||Me(H)})},options:[{value:"",label:$?"Loading volumes...":"Select volume..."},...(C||[]).map(A=>({value:A.name,label:A.name}))],disabled:!T||$}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.on_behalf_of_user,onChange:A=>u({...v,on_behalf_of_user:A.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:R,disabled:!v.refName||!v.name||!T,children:n?"Update":"Add"})]})]})]})}function Rj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var H,ie,te;const{config:l,addFunction:o,updateFunction:i,removeFunction:c}=Ie(),d=((H=l.resources)==null?void 0:H.functions)||{},m=l.schemas||{},{data:f}=vr(),[h,x]=D.useState("reference"),[p,y]=D.useState({schemaRef:"",catalog_name:"",schema_name:"",source:"reference"}),[v,u]=D.useState({refName:"",schemaRef:"",catalog_name:"",schema_name:"",name:"",on_behalf_of_user:!1}),{data:g,loading:b}=$n(v.catalog_name||null),C=h==="reference"&&v.schemaRef?(ie=m[v.schemaRef])==null?void 0:ie.catalog_name:v.catalog_name,$=h==="reference"&&v.schemaRef?(te=m[v.schemaRef])==null?void 0:te.schema_name:v.schema_name,{data:M,loading:R}=Vg(C||null,$||null),_=Object.values(d).filter(z=>{var q,U;return((q=z.schema)==null?void 0:q.catalog_name)===C&&((U=z.schema)==null?void 0:U.schema_name)===$}).map(z=>z.name).filter(Boolean),k=(M||[]).filter(z=>{var q;return n?!_.includes(z.name)||z.name===((q=d[n])==null?void 0:q.name):!_.includes(z.name)}),T=z=>{var V,I,j;const q=d[z],O=q.schema&&Object.entries(m).some(([,E])=>{var S,G;return E.catalog_name===((S=q.schema)==null?void 0:S.catalog_name)&&E.schema_name===((G=q.schema)==null?void 0:G.schema_name)})?(V=Object.entries(m).find(([,E])=>{var S,G;return E.catalog_name===((S=q.schema)==null?void 0:S.catalog_name)&&E.schema_name===((G=q.schema)==null?void 0:G.schema_name)}))==null?void 0:V[0]:"";x(O?"reference":"direct"),u({refName:z,schemaRef:O||"",catalog_name:((I=q.schema)==null?void 0:I.catalog_name)||"",schema_name:((j=q.schema)==null?void 0:j.schema_name)||"",name:q.name||"",on_behalf_of_user:q.on_behalf_of_user||!1}),s(z),t(!0)},w=()=>{const z={name:v.name||void 0,on_behalf_of_user:v.on_behalf_of_user};if(h==="reference"&&v.schemaRef){const q=m[v.schemaRef];q&&(z.schema={catalog_name:q.catalog_name,schema_name:q.schema_name})}else v.catalog_name&&v.schema_name&&(z.schema={catalog_name:v.catalog_name,schema_name:v.schema_name});n?(n!==v.refName&&c(n),i(v.refName,z)):o(v.refName,z),y({schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,source:h}),u({refName:"",schemaRef:v.schemaRef,catalog_name:v.catalog_name,schema_name:v.schema_name,name:"",on_behalf_of_user:!1}),a()},F=z=>{c(z)},L=Object.keys(m).length>0,A=h==="reference"?!!v.schemaRef:!!v.catalog_name&&!!v.schema_name;return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(bu,{className:"w-5 h-5 text-pink-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Functions"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{u({refName:"",schemaRef:p.schemaRef,catalog_name:p.catalog_name,schema_name:p.schema_name,name:"",on_behalf_of_user:!1}),x(p.source),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Function"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([z,q])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(bu,{className:"w-4 h-4 text-pink-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:z}),r.jsx("p",{className:"text-xs text-slate-500",children:q.schema?`${q.schema.catalog_name}.${q.schema.schema_name}${q.name?`.${q.name}`:".*"}`:q.name})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[q.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>T(z),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>F(z),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},z))}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No functions configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Function"]}),r.jsx(X,{label:"Reference Name",value:v.refName,onChange:z=>u({...v,refName:z.target.value}),placeholder:"uc_functions",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),L&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema Source"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{x("reference"),u({...v,catalog_name:"",schema_name:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured Schema"}),r.jsx("button",{type:"button",onClick:()=>{x("direct"),u({...v,schemaRef:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${h==="direct"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Catalog/Schema"})]})]}),h==="reference"&&L?r.jsx(ee,{label:"Schema Reference",value:v.schemaRef,onChange:z=>{u({...v,schemaRef:z.target.value,name:""})},options:[{value:"",label:"Select a configured schema..."},...Object.entries(m).map(([z,q])=>({value:z,label:`${z} (${q.catalog_name}.${q.schema_name})`}))],hint:"Reference a schema defined in the Schemas section"}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Catalog",value:v.catalog_name,onChange:z=>u({...v,catalog_name:z.target.value,schema_name:"",name:""}),options:[{value:"",label:"Select catalog..."},...(f||[]).map(z=>({value:z.name,label:z.name}))]}),r.jsx(ee,{label:"Schema",value:v.schema_name,onChange:z=>{u({...v,schema_name:z.target.value,name:""})},options:[{value:"",label:b?"Loading schemas...":"Select schema..."},...(g||[]).map(z=>({value:z.name,label:z.name}))],disabled:!v.catalog_name||b})]}),h==="reference"&&v.schemaRef&&m[v.schemaRef]&&r.jsxs("div",{className:"p-2 bg-slate-900/50 rounded text-xs text-slate-400",children:["Using schema: ",r.jsxs("span",{className:"text-slate-300",children:[m[v.schemaRef].catalog_name,".",m[v.schemaRef].schema_name]})]}),r.jsx(ee,{label:"Function",value:v.name,onChange:z=>{const q=z.target.value;u(U=>{let O="";if(q)O=Me(q);else if(h==="reference"&&U.schemaRef){const I=m[U.schemaRef];I&&(O=Me(`${I.catalog_name}_${I.schema_name}_functions`))}else U.catalog_name&&U.schema_name&&(O=Me(`${U.catalog_name}_${U.schema_name}_functions`));const V=n&&U.refName;return{...U,name:q,refName:V?U.refName:O}})},options:[{value:"",label:R?"Loading functions...":"All functions (*)"},...k.map(z=>({value:z.name,label:z.name}))],disabled:!A||R,hint:"Leave empty for all functions in schema"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v.on_behalf_of_user,onChange:z=>u({...v,on_behalf_of_user:z.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:w,disabled:!v.refName||!A,children:n?"Update":"Add"})]})]})]})}function Aj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var u;const{config:l,addConnection:o,updateConnection:i,removeConnection:c}=Ie(),d=((u=l.resources)==null?void 0:u.connections)||{},{data:m,loading:f}=Hg(),[h,x]=D.useState({refName:"",name:"",on_behalf_of_user:!1}),p=g=>{const b=d[g];x({refName:g,name:b.name,on_behalf_of_user:b.on_behalf_of_user||!1}),s(g),t(!0)},y=()=>{const g={name:h.name,on_behalf_of_user:h.on_behalf_of_user};n?(n!==h.refName&&c(n),i(h.refName,g)):o(h.refName,g),x({refName:"",name:"",on_behalf_of_user:!1}),a()},v=g=>{c(g)};return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Nu,{className:"w-5 h-5 text-indigo-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Connections"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{x({refName:"",name:"",on_behalf_of_user:!1}),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Connection"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([g,b])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Nu,{className:"w-4 h-4 text-indigo-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:g}),r.jsxs("p",{className:"text-xs text-slate-500",children:["UC Connection: ",b.name]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[b.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>p(g),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>v(g),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},g))}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No connections configured."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Connection"]}),r.jsx(X,{label:"Reference Name",value:h.refName,onChange:g=>x({...h,refName:g.target.value}),placeholder:"external_api",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),r.jsx(ee,{label:"Unity Catalog Connection",value:h.name,onChange:g=>{x({...h,name:g.target.value,refName:h.refName||Me(g.target.value)})},options:[{value:"",label:f?"Loading connections...":"Select a connection..."},...(m||[]).map(g=>({value:g.name,label:`${g.name}${g.connection_type?` (${g.connection_type})`:""}`}))],hint:"Select from available Unity Catalog connections",required:!0}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:h.on_behalf_of_user,onChange:g=>x({...h,on_behalf_of_user:g.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:y,disabled:!h.refName||!h.name,children:n?"Update":"Add"})]})]})]})}const ic={refName:"",name:"",instanceSource:"existing",instance_name:"",description:"",capacity:"CU_2",max_pool_size:10,timeout_seconds:10,authMethod:"oauth",clientIdSource:"variable",clientSecretSource:"variable",workspaceHostSource:"variable",client_id:"",client_secret:"",workspace_host:"",clientIdVariable:"",clientSecretVariable:"",workspaceHostVariable:"",userSource:"manual",passwordSource:"variable",user:"",password:"",userVariable:"",passwordVariable:"",on_behalf_of_user:!1},Tj=[{value:"CU_1",label:"CU_1 (Small)"},{value:"CU_2",label:"CU_2 (Large)"}],Ij=[{value:"oauth",label:"OAuth2 (Service Principal)"},{value:"user",label:"User/Password"}],Lj=e=>`*${e}`,Mj=e=>"env"in e?`env: ${e.env}`:"scope"in e&&"secret"in e?`secret: ${e.scope}/${e.secret}`:"value"in e?`value: ${String(e.value)}`:"options"in e?`composite (${e.options.length} options)`:"unknown";function Na({label:e,source:t,onSourceChange:n,manualValue:s,onManualChange:a,variableValue:l,onVariableChange:o,placeholder:i,isPassword:c=!1,hint:d,variableNames:m,variables:f}){return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:e}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>n("variable"),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${t==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]}),r.jsx("button",{type:"button",onClick:()=>n("manual"),className:`px-2 py-1 text-xs rounded ${t==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"})]})]}),t==="variable"?r.jsx(ee,{value:l,onChange:h=>o(h.target.value),options:[{value:"",label:"Select a variable..."},...m.map(h=>({value:h,label:`${h} (${Mj(f[h])})`}))],hint:m.length===0?"Define variables in the Variables section first":d}):r.jsx(X,{value:s,onChange:h=>a(h.target.value),placeholder:i,type:c?"password":"text",hint:d})]})}function Dj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var R;const{config:l,addDatabase:o,updateDatabase:i,removeDatabase:c}=Ie(),d=((R=l.resources)==null?void 0:R.databases)||{},m=l.variables||{},f=Object.keys(m),{data:h,loading:x,refetch:p}=vj(),y=_=>{switch(_==null?void 0:_.toUpperCase()){case"AVAILABLE":case"RUNNING":return"ready";case"CREATING":case"STARTING":case"STOPPING":case"PROVISIONING":case"UPDATING":return"transitioning";case"STOPPED":case"FAILED":case"DELETED":case"DELETING":return"stopped";default:return"unknown"}},v=[{value:"",label:x?"Loading...":"Select an instance..."},...(h||[]).map(_=>({value:_.name,label:_.name,status:y(_.state)}))],[u,g]=D.useState(ic),b=_=>{const k=d[_];if(k){const T=F=>fr(F,"*"),w=F=>{const L=Bt(F);return L.startsWith("*")?L.slice(1):""};g({refName:_,name:k.name,instanceSource:"existing",instance_name:k.instance_name||"",description:k.description||"",capacity:k.capacity||"CU_2",max_pool_size:k.max_pool_size||10,timeout_seconds:k.timeout_seconds||10,authMethod:k.client_id?"oauth":"user",clientIdSource:T(k.client_id)?"variable":"manual",clientSecretSource:T(k.client_secret)?"variable":"manual",workspaceHostSource:T(k.workspace_host)?"variable":"manual",client_id:T(k.client_id)?"":Bt(k.client_id),client_secret:T(k.client_secret)?"":Bt(k.client_secret),workspace_host:T(k.workspace_host)?"":Bt(k.workspace_host),clientIdVariable:w(k.client_id),clientSecretVariable:w(k.client_secret),workspaceHostVariable:w(k.workspace_host),userSource:T(k.user)?"variable":"manual",passwordSource:T(k.password)?"variable":"manual",user:T(k.user)?"":Bt(k.user),password:T(k.password)?"":Bt(k.password),userVariable:w(k.user),passwordVariable:w(k.password),on_behalf_of_user:k.on_behalf_of_user||!1}),s(_),t(!0)}},C=_=>{c(_)},$=(_,k,T)=>_==="variable"&&T?Lj(T):k,M=()=>{const _={name:u.name,instance_name:u.instance_name||void 0,description:u.description||void 0,capacity:u.capacity,max_pool_size:u.max_pool_size,timeout_seconds:u.timeout_seconds,on_behalf_of_user:u.on_behalf_of_user||void 0};if(u.authMethod==="oauth"){const k=$(u.clientIdSource,u.client_id,u.clientIdVariable),T=$(u.clientSecretSource,u.client_secret,u.clientSecretVariable),w=$(u.workspaceHostSource,u.workspace_host,u.workspaceHostVariable);k&&(_.client_id=k),T&&(_.client_secret=T),w&&(_.workspace_host=w)}else{const k=$(u.userSource,u.user,u.userVariable),T=$(u.passwordSource,u.password,u.passwordVariable);k&&(_.user=k),T&&(_.password=T)}n?n!==u.refName?(c(n),o(u.refName,_)):i(n,_):o(u.refName,_),t(!1),s(null),g(ic),a()};return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Bo,{className:"w-5 h-5 text-emerald-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Databases (Lakebase/PostgreSQL)"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{g(ic),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Database"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([_,k])=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Bo,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:_}),r.jsxs("p",{className:"text-xs text-slate-500",children:[k.instance_name||k.name||"Default instance","  ",k.capacity||"CU_2",k.client_id?"  OAuth":k.user?"  User auth":""]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[k.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>b(_),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>C(_),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},_))}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No databases configured. Add a database for PostgreSQL/Lakebase memory storage."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Database"]}),r.jsx(X,{label:"Reference Name",value:u.refName,onChange:_=>g({...u,refName:_.target.value}),placeholder:"retail_database",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-slate-300 font-medium flex items-center",children:[r.jsx(z_,{className:"w-4 h-4 mr-2 text-emerald-400"}),"Lakebase Instance"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>g({...u,instanceSource:"existing"}),className:`px-2 py-1 text-xs rounded ${u.instanceSource==="existing"?"bg-emerald-500/30 text-emerald-300":"bg-slate-700 text-slate-400"}`,children:"Use Existing"}),r.jsx("button",{type:"button",onClick:()=>g({...u,instanceSource:"new"}),className:`px-2 py-1 text-xs rounded ${u.instanceSource==="new"?"bg-emerald-500/30 text-emerald-300":"bg-slate-700 text-slate-400"}`,children:"Create New"})]})]}),u.instanceSource==="existing"?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1.5",children:"Select Lakebase Instance"}),r.jsx(wl,{value:u.instance_name,onChange:_=>{g({...u,instance_name:_,name:_||u.name,refName:n?u.refName:Me(_)})},options:v,placeholder:"Select an instance..."})]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>p(),disabled:x,className:"mt-6",children:x?r.jsx(tn,{className:"w-4 h-4 animate-spin"}):r.jsx($t,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Or enter instance name manually:"}),r.jsx(X,{value:u.instance_name,onChange:_=>g({...u,instance_name:_.target.value}),placeholder:"my-lakebase-instance"})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsx(X,{label:"New Instance Name",value:u.instance_name,onChange:_=>{const k=_.target.value;g({...u,instance_name:k,name:k||u.name,refName:n?u.refName:Me(k)})},placeholder:"my-new-lakebase",hint:"Name for the new Lakebase instance to create"}),r.jsx(ee,{label:"Capacity",value:u.capacity,onChange:_=>g({...u,capacity:_.target.value}),options:Tj,hint:"CU_1 = Small (dev/test), CU_2 = Large (production)"}),r.jsx("p",{className:"text-xs text-amber-400",children:"Note: Instance will be created when the agent is deployed with this configuration."})]})]}),r.jsx(X,{label:"Display Name",value:u.name,onChange:_=>g({...u,name:_.target.value}),placeholder:"Retail Database"}),r.jsx(X,{label:"Description",value:u.description,onChange:_=>g({...u,description:_.target.value}),placeholder:"Database for agent memory and checkpoints"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Max Pool Size",type:"number",value:u.max_pool_size,onChange:_=>g({...u,max_pool_size:parseInt(_.target.value)||10})}),r.jsx(X,{label:"Timeout (seconds)",type:"number",value:u.timeout_seconds,onChange:_=>g({...u,timeout_seconds:parseInt(_.target.value)||10})})]}),r.jsx(ee,{label:"Authentication Method",value:u.authMethod,onChange:_=>g({...u,authMethod:_.target.value}),options:Ij}),u.authMethod==="oauth"?r.jsxs("div",{className:"space-y-4 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"OAuth2 / Service Principal Credentials"}),r.jsx(Na,{label:"Client ID",source:u.clientIdSource,onSourceChange:_=>g({...u,clientIdSource:_}),manualValue:u.client_id,onManualChange:_=>g({...u,client_id:_}),variableValue:u.clientIdVariable,onVariableChange:_=>g({...u,clientIdVariable:_}),placeholder:"your-service-principal-client-id",variableNames:f,variables:m}),r.jsx(Na,{label:"Client Secret",source:u.clientSecretSource,onSourceChange:_=>g({...u,clientSecretSource:_}),manualValue:u.client_secret,onManualChange:_=>g({...u,client_secret:_}),variableValue:u.clientSecretVariable,onVariableChange:_=>g({...u,clientSecretVariable:_}),placeholder:"your-client-secret",isPassword:!0,variableNames:f,variables:m}),r.jsx(Na,{label:"Workspace Host (Optional)",source:u.workspaceHostSource,onSourceChange:_=>g({...u,workspaceHostSource:_}),manualValue:u.workspace_host,onManualChange:_=>g({...u,workspace_host:_}),variableValue:u.workspaceHostVariable,onVariableChange:_=>g({...u,workspaceHostVariable:_}),placeholder:"https://your-workspace.cloud.databricks.com",hint:"Only required if connecting from outside the workspace",variableNames:f,variables:m})]}):r.jsxs("div",{className:"space-y-4 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"User/Password Credentials"}),r.jsx(Na,{label:"Username",source:u.userSource,onSourceChange:_=>g({...u,userSource:_}),manualValue:u.user,onManualChange:_=>g({...u,user:_}),variableValue:u.userVariable,onVariableChange:_=>g({...u,userVariable:_}),placeholder:"postgres",variableNames:f,variables:m}),r.jsx(Na,{label:"Password",source:u.passwordSource,onSourceChange:_=>g({...u,passwordSource:_}),manualValue:u.password,onManualChange:_=>g({...u,password:_}),variableValue:u.passwordVariable,onVariableChange:_=>g({...u,passwordVariable:_}),placeholder:"your-password",isPassword:!0,variableNames:f,variables:m})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.on_behalf_of_user,onChange:_=>g({...u,on_behalf_of_user:_.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:M,disabled:!u.refName||!u.name,children:n?"Update":"Add"})]})]})]})}const cc={refName:"",endpoint_name:"",endpoint_type:"STANDARD",indexSchemaSource:"direct",indexSchemaRefName:"",index_catalog:"",index_schema:"",indexNameSource:"select",index_name:"",sourceSchemaSource:"direct",sourceSchemaRefName:"",source_catalog:"",source_schema:"",source_table:"",primary_key:"",embedding_source_column:"",columns:[],doc_uri:"",embedding_model:"databricks-gte-large-en",sourcePathEnabled:!1,sourcePathSchemaSource:"direct",sourcePathSchemaRef:"",sourcePathVolumeCatalog:"",sourcePathVolumeSchema:"",sourcePathVolumeName:"",sourcePathPath:"",checkpointPathEnabled:!1,checkpointPathSchemaSource:"direct",checkpointPathSchemaRef:"",checkpointPathVolumeCatalog:"",checkpointPathVolumeSchema:"",checkpointPathVolumeName:"",checkpointPathPath:"",on_behalf_of_user:!1};function Fj({formData:e,setFormData:t,configuredSchemas:n,configuredSchemaOptions:s,catalogs:a,sourcePathSchemas:l,sourcePathVolumes:o,sourcePathVolumesLoading:i,checkpointPathSchemas:c,checkpointPathVolumes:d,checkpointPathVolumesLoading:m}){const f=Object.keys(n).length>0;return r.jsxs("div",{className:"space-y-4 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsxs("p",{className:"text-sm text-slate-300 font-medium",children:["Volume Paths ",r.jsx("span",{className:"text-slate-500 font-normal",children:"(Optional)"})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-800/30 rounded border border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Source Path"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.sourcePathEnabled,onChange:h=>t(x=>({...x,sourcePathEnabled:h.target.checked,sourcePathSchemaSource:f?"reference":"direct"})),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx("span",{className:"text-xs text-slate-400",children:"Enable"})]})]}),e.sourcePathEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs text-slate-400",children:"Schema"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[f&&r.jsx("button",{type:"button",onClick:()=>t(h=>({...h,sourcePathSchemaSource:"reference",sourcePathVolumeCatalog:"",sourcePathVolumeSchema:"",sourcePathVolumeName:""})),className:`px-2 py-1 text-xs rounded ${e.sourcePathSchemaSource==="reference"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Configured"}),r.jsx("button",{type:"button",onClick:()=>t(h=>({...h,sourcePathSchemaSource:"direct",sourcePathSchemaRef:"",sourcePathVolumeName:""})),className:`px-2 py-1 text-xs rounded ${e.sourcePathSchemaSource==="direct"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]}),e.sourcePathSchemaSource==="reference"?r.jsx(ee,{value:e.sourcePathSchemaRef,onChange:h=>{const x=h.target.value,p=n[x];t(y=>({...y,sourcePathSchemaRef:x,sourcePathVolumeCatalog:(p==null?void 0:p.catalog_name)||"",sourcePathVolumeSchema:(p==null?void 0:p.schema_name)||"",sourcePathVolumeName:""}))},options:[{value:"",label:"Select configured schema..."},...s],hint:"Select a previously configured schema"}):r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ee,{value:e.sourcePathVolumeCatalog,onChange:h=>t(x=>({...x,sourcePathVolumeCatalog:h.target.value,sourcePathVolumeSchema:"",sourcePathVolumeName:""})),options:[{value:"",label:"Catalog..."},...(a||[]).map(h=>({value:h.name,label:h.name}))]}),r.jsx(ee,{value:e.sourcePathVolumeSchema,onChange:h=>t(x=>({...x,sourcePathVolumeSchema:h.target.value,sourcePathVolumeName:""})),options:[{value:"",label:"Schema..."},...(l||[]).map(h=>({value:h.name,label:h.name}))],disabled:!e.sourcePathVolumeCatalog})]}),r.jsx(ee,{label:"Volume",value:e.sourcePathVolumeName,onChange:h=>t(x=>({...x,sourcePathVolumeName:h.target.value})),options:[{value:"",label:i?"Loading volumes...":"Select volume..."},...(o||[]).map(h=>({value:h.name,label:h.name}))],disabled:!e.sourcePathVolumeSchema||i,hint:"Select a volume from the schema"}),r.jsx(X,{label:"Path",value:e.sourcePathPath,onChange:h=>t(x=>({...x,sourcePathPath:h.target.value})),placeholder:"/path/to/source/data",hint:"Path within the volume for source data files"})]})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-800/30 rounded border border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Checkpoint Path"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:e.checkpointPathEnabled,onChange:h=>t(x=>({...x,checkpointPathEnabled:h.target.checked,checkpointPathSchemaSource:f?"reference":"direct"})),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx("span",{className:"text-xs text-slate-400",children:"Enable"})]})]}),e.checkpointPathEnabled&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs text-slate-400",children:"Schema"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[f&&r.jsx("button",{type:"button",onClick:()=>t(h=>({...h,checkpointPathSchemaSource:"reference",checkpointPathVolumeCatalog:"",checkpointPathVolumeSchema:"",checkpointPathVolumeName:""})),className:`px-2 py-1 text-xs rounded ${e.checkpointPathSchemaSource==="reference"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Configured"}),r.jsx("button",{type:"button",onClick:()=>t(h=>({...h,checkpointPathSchemaSource:"direct",checkpointPathSchemaRef:"",checkpointPathVolumeName:""})),className:`px-2 py-1 text-xs rounded ${e.checkpointPathSchemaSource==="direct"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]}),e.checkpointPathSchemaSource==="reference"?r.jsx(ee,{value:e.checkpointPathSchemaRef,onChange:h=>{const x=h.target.value,p=n[x];t(y=>({...y,checkpointPathSchemaRef:x,checkpointPathVolumeCatalog:(p==null?void 0:p.catalog_name)||"",checkpointPathVolumeSchema:(p==null?void 0:p.schema_name)||"",checkpointPathVolumeName:""}))},options:[{value:"",label:"Select configured schema..."},...s],hint:"Select a previously configured schema"}):r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(ee,{value:e.checkpointPathVolumeCatalog,onChange:h=>t(x=>({...x,checkpointPathVolumeCatalog:h.target.value,checkpointPathVolumeSchema:"",checkpointPathVolumeName:""})),options:[{value:"",label:"Catalog..."},...(a||[]).map(h=>({value:h.name,label:h.name}))]}),r.jsx(ee,{value:e.checkpointPathVolumeSchema,onChange:h=>t(x=>({...x,checkpointPathVolumeSchema:h.target.value,checkpointPathVolumeName:""})),options:[{value:"",label:"Schema..."},...(c||[]).map(h=>({value:h.name,label:h.name}))],disabled:!e.checkpointPathVolumeCatalog})]}),r.jsx(ee,{label:"Volume",value:e.checkpointPathVolumeName,onChange:h=>t(x=>({...x,checkpointPathVolumeName:h.target.value})),options:[{value:"",label:m?"Loading volumes...":"Select volume..."},...(d||[]).map(h=>({value:h.name,label:h.name}))],disabled:!e.checkpointPathVolumeSchema||m,hint:"Select a volume from the schema"}),r.jsx(X,{label:"Path",value:e.checkpointPathPath,onChange:h=>t(x=>({...x,checkpointPathPath:h.target.value})),placeholder:"/path/to/checkpoints",hint:"Path within the volume for vector index checkpoints"})]})]})]})}function zj({showForm:e,setShowForm:t,editingKey:n,setEditingKey:s,onClose:a}){var de,ye,De;const{config:l,addVectorStore:o,updateVectorStore:i,removeVectorStore:c}=Ie(),d=((de=l.resources)==null?void 0:de.vector_stores)||{},m=((ye=l.resources)==null?void 0:ye.llms)||{},f=l.schemas||{},h=((De=l.resources)==null?void 0:De.volumes)||{},{data:x,loading:p,refetch:y}=qg(),{data:v}=vr(),[u,g]=D.useState(cc),[b,C]=D.useState(""),{data:$}=$n(u.index_catalog||null),{data:M}=$n(u.source_catalog||null),{data:R,loading:_}=$u(u.source_catalog||null,u.source_schema||null),{data:k,loading:T}=$u(u.index_catalog||null,u.index_schema||null),{data:w,loading:F,refetch:L}=gj(u.source_catalog||null,u.source_schema||null,u.source_table||null),A=(w||[]).map(K=>({value:K.name,label:`${K.name}${K.type_text?` (${K.type_text})`:""}`})),{data:H,loading:ie,refetch:te}=Ou(u.endpoint_name||null),{data:z}=$n(u.sourcePathVolumeCatalog||null),{data:q,loading:U}=Pu(u.sourcePathVolumeCatalog||null,u.sourcePathVolumeSchema||null),{data:O}=$n(u.checkpointPathVolumeCatalog||null),{data:V,loading:I}=Pu(u.checkpointPathVolumeCatalog||null,u.checkpointPathVolumeSchema||null),j=Object.entries(f).map(([K,Z])=>({value:K,label:`${K} (${Z.catalog_name}.${Z.schema_name})`})),E=K=>{var re,N,P,B,ae,_e,W,se,ne,ce,ge,Ee,Ue,tt,Rt,Ut,jn,as,ls,os,is,cs,us,ds,ms,fs,bt;const Z=d[K];if(Z){const At=Object.entries(f).find(([on,_t])=>{var Ht,cn,jt,Nt;return _t.catalog_name===((cn=(Ht=Z.index)==null?void 0:Ht.schema)==null?void 0:cn.catalog_name)&&_t.schema_name===((Nt=(jt=Z.index)==null?void 0:jt.schema)==null?void 0:Nt.schema_name)}),mt=Object.entries(f).find(([on,_t])=>{var Ht,cn,jt,Nt;return _t.catalog_name===((cn=(Ht=Z.source_table)==null?void 0:Ht.schema)==null?void 0:cn.catalog_name)&&_t.schema_name===((Nt=(jt=Z.source_table)==null?void 0:jt.schema)==null?void 0:Nt.schema_name)}),Qe=Z.source_path;let rt=!1,Hs="direct",El="",qs="",Dn="",Hm="",qm="";if(Qe!=null&&Qe.volume){rt=!0,qm=Qe.path||"";let on="",_t="",Ht="";if(typeof Qe.volume=="string"){const jt=Bt(Qe.volume),Nt=jt.startsWith("*")?jt.slice(1):jt,zn=h[Nt];zn&&(on=((re=zn.schema)==null?void 0:re.catalog_name)||"",_t=((N=zn.schema)==null?void 0:N.schema_name)||"",Ht=zn.name)}else on=((B=(P=Qe.volume)==null?void 0:P.schema)==null?void 0:B.catalog_name)||"",_t=((_e=(ae=Qe.volume)==null?void 0:ae.schema)==null?void 0:_e.schema_name)||"",Ht=((W=Qe.volume)==null?void 0:W.name)||"";const cn=Object.entries(f).find(([jt,Nt])=>Nt.catalog_name===on&&Nt.schema_name===_t);cn?(Hs="reference",El=cn[0]):Hs="direct",qs=on,Dn=_t,Hm=Ht}const Fn=Z.checkpoint_path;let Bm=!1,Oi="direct",Gm="",Wm="",Km="",Ym="",Qm="";if(Fn!=null&&Fn.volume){Bm=!0,Qm=Fn.path||"";let on="",_t="",Ht="";if(typeof Fn.volume=="string"){const jt=Bt(Fn.volume),Nt=jt.startsWith("*")?jt.slice(1):jt,zn=h[Nt];zn&&(on=((se=zn.schema)==null?void 0:se.catalog_name)||"",_t=((ne=zn.schema)==null?void 0:ne.schema_name)||"",Ht=zn.name)}else on=((ge=(ce=Fn.volume)==null?void 0:ce.schema)==null?void 0:ge.catalog_name)||"",_t=((Ue=(Ee=Fn.volume)==null?void 0:Ee.schema)==null?void 0:Ue.schema_name)||"",Ht=((tt=Fn.volume)==null?void 0:tt.name)||"";const cn=Object.entries(f).find(([jt,Nt])=>Nt.catalog_name===on&&Nt.schema_name===_t);cn?(Oi="reference",Gm=cn[0]):Oi="direct",Wm=on,Km=_t,Ym=Ht}g({refName:K,endpoint_name:((Rt=Z.endpoint)==null?void 0:Rt.name)||"",endpoint_type:((Ut=Z.endpoint)==null?void 0:Ut.type)||"STANDARD",indexSchemaSource:At?"reference":"direct",indexSchemaRefName:At?At[0]:"",index_catalog:((as=(jn=Z.index)==null?void 0:jn.schema)==null?void 0:as.catalog_name)||"",index_schema:((os=(ls=Z.index)==null?void 0:ls.schema)==null?void 0:os.schema_name)||"",indexNameSource:"select",index_name:((is=Z.index)==null?void 0:is.name)||"",sourceSchemaSource:mt?"reference":"direct",sourceSchemaRefName:mt?mt[0]:"",source_catalog:((us=(cs=Z.source_table)==null?void 0:cs.schema)==null?void 0:us.catalog_name)||"",source_schema:((ms=(ds=Z.source_table)==null?void 0:ds.schema)==null?void 0:ms.schema_name)||"",source_table:((fs=Z.source_table)==null?void 0:fs.name)||"",primary_key:Z.primary_key||"",embedding_source_column:Z.embedding_source_column||"",columns:Z.columns||[],doc_uri:Z.doc_uri||"",embedding_model:((bt=Z.embedding_model)==null?void 0:bt.name)||"databricks-gte-large-en",sourcePathEnabled:rt,sourcePathSchemaSource:Hs,sourcePathSchemaRef:El,sourcePathVolumeCatalog:qs,sourcePathVolumeSchema:Dn,sourcePathVolumeName:Hm,sourcePathPath:qm,checkpointPathEnabled:Bm,checkpointPathSchemaSource:Oi,checkpointPathSchemaRef:Gm,checkpointPathVolumeCatalog:Wm,checkpointPathVolumeSchema:Km,checkpointPathVolumeName:Ym,checkpointPathPath:Qm,on_behalf_of_user:Z.on_behalf_of_user||!1}),C((Z.columns||[]).join(", ")),s(K),t(!0)}},S=K=>{c(K)},G=()=>{const K=b.split(",").map(re=>re.trim()).filter(re=>re),Z={source_table:{schema:{catalog_name:u.source_catalog,schema_name:u.source_schema},name:u.source_table},embedding_source_column:u.embedding_source_column,primary_key:u.primary_key||void 0,columns:K.length>0?K:void 0,doc_uri:u.doc_uri||void 0,on_behalf_of_user:u.on_behalf_of_user||void 0};if(u.endpoint_name&&(Z.endpoint={name:u.endpoint_name,type:u.endpoint_type}),(u.index_name||u.index_catalog||u.index_schema)&&(Z.index={schema:{catalog_name:u.index_catalog||u.source_catalog,schema_name:u.index_schema||u.source_schema},name:u.index_name||`${u.source_table}_index`}),u.embedding_model&&(Z.embedding_model={name:u.embedding_model}),u.sourcePathEnabled&&u.sourcePathVolumeName){const re={volume:{...u.sourcePathSchemaSource==="reference"&&u.sourcePathSchemaRef?{_schemaRef:u.sourcePathSchemaRef}:{schema:{catalog_name:u.sourcePathVolumeCatalog,schema_name:u.sourcePathVolumeSchema}},name:u.sourcePathVolumeName}};u.sourcePathPath&&(re.path=u.sourcePathPath),Z.source_path=re}if(u.checkpointPathEnabled&&u.checkpointPathVolumeName){const re={volume:{...u.checkpointPathSchemaSource==="reference"&&u.checkpointPathSchemaRef?{_schemaRef:u.checkpointPathSchemaRef}:{schema:{catalog_name:u.checkpointPathVolumeCatalog,schema_name:u.checkpointPathVolumeSchema}},name:u.checkpointPathVolumeName}};u.checkpointPathPath&&(re.path=u.checkpointPathPath),Z.checkpoint_path=re}n?n!==u.refName?(c(n),o(u.refName,Z)):i(n,Z):o(u.refName,Z),t(!1),s(null),g(cc),C(""),a()},J=[{value:"",label:p?"Loading...":"Select an endpoint..."},...(x||[]).map(K=>{var N;const Z=(N=K.endpoint_status)==null?void 0:N.state;let re="unknown";return Z==="ONLINE"?re="ready":Z==="PROVISIONING"||Z==="SCALING"?re="transitioning":(Z==="OFFLINE"||Z==="FAILED")&&(re="stopped"),{value:K.name,label:K.name,status:re}})],he=[{value:"",label:"Select embedding model..."},{value:"databricks-gte-large-en",label:"GTE Large (Embeddings)"},{value:"databricks-bge-large-en",label:"BGE Large (Embeddings)"},...Object.entries(m).map(([K,Z])=>({value:Z.name,label:`${K} (${Z.name})`}))];return r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(En,{className:"w-5 h-5 text-violet-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Vector Stores"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>{const K=Object.keys(f).length>0;g({...cc,indexSchemaSource:K?"reference":"direct",sourceSchemaSource:K?"reference":"direct",sourcePathSchemaSource:K?"reference":"direct",checkpointPathSchemaSource:K?"reference":"direct"}),C(""),s(null),t(!0)},children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Vector Store"]})]}),Object.keys(d).length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:Object.entries(d).map(([K,Z])=>{var re,N;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(En,{className:"w-4 h-4 text-violet-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-200",children:K}),r.jsxs("p",{className:"text-xs text-slate-500",children:[((re=Z.endpoint)==null?void 0:re.name)||"No endpoint","  ",((N=Z.index)==null?void 0:N.name)||"No index"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[Z.on_behalf_of_user&&r.jsxs(we,{variant:"success",title:"On Behalf of User",children:[r.jsx(rs,{className:"w-3 h-3 mr-1"}),"OBO"]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>E(K),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>S(K),children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]})]},K)})}),Object.keys(d).length===0&&!e&&r.jsx("p",{className:"text-slate-500 text-sm",children:"No vector stores configured. Add a vector store to enable semantic search."}),e&&r.jsxs("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("h4",{className:"font-medium text-slate-200",children:[n?"Edit":"New"," Vector Store"]}),r.jsx(X,{label:"Reference Name",value:u.refName,onChange:K=>g({...u,refName:K.target.value}),placeholder:"products_vector_store",hint:n?"Changing this will update all references in the YAML":"Unique key to reference this resource",required:!0}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-slate-300 font-medium",children:["Vector Search Endpoint ",r.jsx("span",{className:"text-slate-500 font-normal",children:"(Optional)"})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Auto-detected if not specified"})]}),r.jsxs("button",{type:"button",onClick:()=>y(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:p,children:[r.jsx($t,{className:`w-3 h-3 ${p?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),r.jsx(wl,{options:J,value:u.endpoint_name,onChange:K=>{const Z=x==null?void 0:x.find(N=>N.name===K),re=(Z==null?void 0:Z.endpoint_type)==="OPTIMIZED_STORAGE"?"OPTIMIZED_STORAGE":"STANDARD";g({...u,endpoint_name:K,endpoint_type:K?re:u.endpoint_type})},placeholder:"Select an endpoint (or leave empty for auto-detection)..."}),r.jsx(ee,{label:"Endpoint Type",value:u.endpoint_type,onChange:K=>g({...u,endpoint_type:K.target.value}),options:[{value:"STANDARD",label:"Standard"},{value:"OPTIMIZED_STORAGE",label:"Optimized Storage"}],hint:u.endpoint_name?"Auto-detected from selected endpoint":"Only used if endpoint is specified",disabled:!!u.endpoint_name})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-slate-300 font-medium",children:["Vector Search Index ",r.jsx("span",{className:"text-slate-500 font-normal",children:"(Optional)"})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Auto-generated from source table name if not specified"})]}),u.endpoint_name&&r.jsxs("button",{type:"button",onClick:()=>te(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:ie,children:[r.jsx($t,{className:`w-3 h-3 ${ie?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),u.endpoint_name&&H&&H.length>0&&r.jsx(ee,{label:"Select Existing Index (Optional)",value:H.some(K=>K.name===`${u.index_catalog}.${u.index_schema}.${u.index_name}`)?`${u.index_catalog}.${u.index_schema}.${u.index_name}`:"",onChange:K=>{const Z=K.target.value;if(Z){const re=H.find(P=>P.name===Z),N=Z.split(".");if(N.length>=3){const P=N.slice(2).join("_");g(B=>{const ae={...B,indexSchemaSource:"direct",indexSchemaRefName:"",index_catalog:N[0],index_schema:N[1],index_name:N.slice(2).join("."),refName:n?B.refName:Me(P)};if(re!=null&&re.delta_sync_index_spec){const _e=re.delta_sync_index_spec;if(_e.source_table){const W=_e.source_table.split(".");W.length>=3&&(ae.sourceSchemaSource="direct",ae.sourceSchemaRefName="",ae.source_catalog=W[0],ae.source_schema=W[1],ae.source_table=W.slice(2).join("."))}if(_e.embedding_source_columns&&_e.embedding_source_columns.length>0){const W=_e.embedding_source_columns[0];ae.embedding_source_column=W.name||"",W.embedding_model_endpoint_name&&(ae.embedding_model=W.embedding_model_endpoint_name)}_e.columns_to_sync&&_e.columns_to_sync.length>0&&(ae.columns=_e.columns_to_sync,C(_e.columns_to_sync.join(", ")))}return re!=null&&re.primary_key&&(ae.primary_key=re.primary_key),ae})}}},options:[{value:"",label:ie?"Loading...":"Or configure manually below..."},...(H||[]).map(K=>{var Z;return{value:K.name,label:`${K.name}${(Z=K.delta_sync_index_spec)!=null&&Z.source_table?` ( ${K.delta_sync_index_spec.source_table})`:""}`}})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Index Schema"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>g({...u,indexSchemaSource:"reference"}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${u.indexSchemaSource==="reference"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(En,{className:"w-3 h-3"}),r.jsx("span",{children:"Configured"})]}),r.jsx("button",{type:"button",onClick:()=>g({...u,indexSchemaSource:"direct"}),className:`px-2 py-1 text-xs rounded ${u.indexSchemaSource==="direct"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]}),u.indexSchemaSource==="reference"?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:u.indexSchemaRefName,onChange:K=>{const Z=K.target.value,re=f[Z];g({...u,indexSchemaRefName:Z,index_catalog:(re==null?void 0:re.catalog_name)||"",index_schema:(re==null?void 0:re.schema_name)||""})},options:[{value:"",label:"Select configured schema..."},...j]}),j.length===0&&r.jsx("p",{className:"text-xs text-amber-400",children:'No schemas configured. Add one in Schemas section or switch to "Select".'})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(ee,{label:"Catalog",value:u.index_catalog,onChange:K=>g({...u,index_catalog:K.target.value,index_schema:"",indexSchemaRefName:""}),options:[{value:"",label:"Select catalog..."},...(v||[]).map(K=>({value:K.name,label:K.name}))]}),r.jsx(ee,{label:"Schema",value:u.index_schema,onChange:K=>g({...u,index_schema:K.target.value,indexSchemaRefName:""}),options:[{value:"",label:"Select schema..."},...($||[]).map(K=>({value:K.name,label:K.name}))],disabled:!u.index_catalog})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Index Name"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>g({...u,indexNameSource:"select",index_name:""}),className:`px-2 py-1 text-xs rounded ${u.indexNameSource==="select"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"}),r.jsx("button",{type:"button",onClick:()=>g({...u,indexNameSource:"manual"}),className:`px-2 py-1 text-xs rounded ${u.indexNameSource==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"})]})]}),u.indexNameSource==="select"?r.jsx(ee,{value:u.index_name,onChange:K=>{const Z=K.target.value;g(re=>({...re,index_name:Z,refName:n?re.refName:Z?Me(Z):re.refName}))},options:[{value:"",label:T?"Loading tables...":"Select a table..."},...(k||[]).map(K=>({value:K.name,label:K.name}))],disabled:!u.index_catalog||!u.index_schema||T,hint:"Select a table from the index schema"}):r.jsx(X,{value:u.index_name,onChange:K=>g({...u,index_name:K.target.value}),placeholder:"products_index",hint:"Enter a custom index name"})]})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"Source Table"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Source Schema"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>g({...u,sourceSchemaSource:"reference"}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${u.sourceSchemaSource==="reference"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(En,{className:"w-3 h-3"}),r.jsx("span",{children:"Configured"})]}),r.jsx("button",{type:"button",onClick:()=>g({...u,sourceSchemaSource:"direct"}),className:`px-2 py-1 text-xs rounded ${u.sourceSchemaSource==="direct"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]}),u.sourceSchemaSource==="reference"?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:u.sourceSchemaRefName,onChange:K=>{const Z=K.target.value,re=f[Z];g({...u,sourceSchemaRefName:Z,source_catalog:(re==null?void 0:re.catalog_name)||"",source_schema:(re==null?void 0:re.schema_name)||"",source_table:"",embedding_source_column:"",primary_key:"",doc_uri:"",columns:[]}),C("")},options:[{value:"",label:"Select configured schema..."},...j]}),j.length===0&&r.jsx("p",{className:"text-xs text-amber-400",children:'No schemas configured. Add one in Schemas section or switch to "Select".'})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(ee,{label:"Catalog",value:u.source_catalog,onChange:K=>{g({...u,source_catalog:K.target.value,source_schema:"",source_table:"",sourceSchemaRefName:"",embedding_source_column:"",primary_key:"",doc_uri:"",columns:[]}),C("")},options:[{value:"",label:"Select catalog..."},...(v||[]).map(K=>({value:K.name,label:K.name}))]}),r.jsx(ee,{label:"Schema",value:u.source_schema,onChange:K=>{g({...u,source_schema:K.target.value,source_table:"",sourceSchemaRefName:"",embedding_source_column:"",primary_key:"",doc_uri:"",columns:[]}),C("")},options:[{value:"",label:"Select schema..."},...(M||[]).map(K=>({value:K.name,label:K.name}))],disabled:!u.source_catalog})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(ee,{label:"Table",value:u.source_table,onChange:K=>{g({...u,source_table:K.target.value,embedding_source_column:"",primary_key:"",doc_uri:"",columns:[]}),C("")},options:[{value:"",label:_?"Loading...":"Select table..."},...(R||[]).map(K=>({value:K.name,label:K.name}))],disabled:!u.source_schema&&!u.sourceSchemaRefName||_})}),u.source_table&&r.jsxs("button",{type:"button",onClick:()=>L(),className:"mt-6 text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:F,children:[r.jsx($t,{className:`w-3 h-3 ${F?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"Embedding Configuration"}),F&&r.jsxs("span",{className:"text-xs text-slate-400 flex items-center space-x-1",children:[r.jsx(tn,{className:"w-3 h-3 animate-spin"}),r.jsx("span",{children:"Loading columns..."})]})]}),r.jsx(ee,{label:"Embedding Model",value:u.embedding_model,onChange:K=>g({...u,embedding_model:K.target.value}),options:he,hint:"Model used to create embeddings"}),r.jsx(ee,{label:"Embedding Source Column",value:u.embedding_source_column,onChange:K=>g({...u,embedding_source_column:K.target.value}),options:[{value:"",label:F?"Loading columns...":A.length>0?"Select column...":"Select a table first..."},...A],hint:"Column containing text to embed (typically text/string columns)",disabled:!u.source_table||F}),r.jsx(ee,{label:"Primary Key",value:u.primary_key,onChange:K=>g({...u,primary_key:K.target.value}),options:[{value:"",label:F?"Loading columns...":A.length>0?"Select primary key column...":"Select a table first..."},...A],hint:"Primary key column for the source table",disabled:!u.source_table||F})]}),r.jsxs("div",{className:"space-y-3 p-3 bg-slate-900/50 rounded border border-slate-600",children:[r.jsx("p",{className:"text-sm text-slate-300 font-medium",children:"Columns to Include"}),u.source_table&&A.length>0?r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-2 bg-slate-800/50 rounded border border-slate-700",children:A.map(K=>{const Z=b.split(",").map(re=>re.trim()).includes(K.value);return r.jsx("button",{type:"button",onClick:()=>{const re=b.split(",").map(N=>N.trim()).filter(N=>N);C(Z?re.filter(N=>N!==K.value).join(", "):[...re,K.value].join(", "))},className:`px-2 py-1 text-xs rounded transition-colors ${Z?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:K.value},K.value)})}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Click columns to select/deselect. Selected: ",b.split(",").filter(K=>K.trim()).length||0]})]}):r.jsx(X,{label:"",value:b,onChange:K=>C(K.target.value),placeholder:"id, name, description, category",hint:"Select a table to see available columns, or enter comma-separated column names"})]}),r.jsx(ee,{label:"Document URI Column (Optional)",value:u.doc_uri,onChange:K=>g({...u,doc_uri:K.target.value}),options:[{value:"",label:A.length>0?"None (no document URIs)":"Select a table first..."},...A],hint:"Column containing document URIs for linking",disabled:!u.source_table||F}),r.jsx(Fj,{formData:u,setFormData:g,configuredSchemas:f,configuredSchemaOptions:j,catalogs:v,sourcePathSchemas:z,sourcePathVolumes:q,sourcePathVolumesLoading:U,checkpointPathSchemas:O,checkpointPathVolumes:V,checkpointPathVolumesLoading:I}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.on_behalf_of_user,onChange:K=>g({...u,on_behalf_of_user:K.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx(Ln,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm text-slate-300",children:"On Behalf of User"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx(Y,{variant:"secondary",onClick:a,children:"Cancel"}),r.jsx(Y,{onClick:G,disabled:!u.refName||!u.source_table||!u.embedding_source_column,children:n?"Update":"Add"})]})]})]})}const Vj=[{value:"",label:"= (equals)"},{value:" NOT",label:"!= (not equals)"},{value:" <",label:"< (less than)"},{value:" <=",label:"<= (less or equal)"},{value:" >",label:"> (greater than)"},{value:" >=",label:">= (greater or equal)"},{value:" LIKE",label:"LIKE (pattern match)"}];function vh(){return`filter_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}function Uj(e){return e.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}const Hj=[{value:"ms-marco-TinyBERT-L-2-v2",label:"TinyBERT L-2 (fastest)"},{value:"ms-marco-MiniLM-L-6-v2",label:"MiniLM L-6"},{value:"ms-marco-MiniLM-L-12-v2",label:"MiniLM L-12 (balanced)"},{value:"rank-T5-flan",label:"T5-flan (most accurate)"}],qj=[{value:"ANN",label:"ANN (Approximate Nearest Neighbor)"},{value:"HYBRID",label:"Hybrid"}];function Bj(){var k;const{config:e,addRetriever:t,updateRetriever:n,removeRetriever:s}=Ie(),[a,l]=D.useState(!1),[o,i]=D.useState(null),[c,d]=D.useState({refName:"",vectorStoreRef:"",columns:"",numResults:"10",queryType:"ANN",filters:[],enableRerank:!1,rerankModel:"ms-marco-MiniLM-L-12-v2",rerankTopN:"",rerankCacheDir:"/tmp/flashrank_cache",rerankColumns:""}),m=e.retrievers||{},f=((k=e.resources)==null?void 0:k.vector_stores)||{},h=Object.keys(f).length>0,x=Object.entries(f).map(([T,w])=>({value:T,label:`${T} (${w.embedding_source_column||"no column"})`})),p=()=>{d({refName:"",vectorStoreRef:"",columns:"",numResults:"10",queryType:"ANN",filters:[],enableRerank:!1,rerankModel:"ms-marco-MiniLM-L-12-v2",rerankTopN:"",rerankCacheDir:"/tmp/flashrank_cache",rerankColumns:""}),i(null)},y=T=>{var O,V,I,j,E,S,G;const w=m[T];let F="";if(w.vector_store){const J=Object.entries(f).find(([,he])=>{var de,ye;return he.embedding_source_column===w.vector_store.embedding_source_column&&((de=he.source_table)==null?void 0:de.name)===((ye=w.vector_store.source_table)==null?void 0:ye.name)});J&&(F=J[0])}let L=!1,A="ms-marco-MiniLM-L-12-v2",H="",ie="/tmp/flashrank_cache",te="";w.rerank&&(L=!0,typeof w.rerank=="object"&&(A=w.rerank.model||A,H=((O=w.rerank.top_n)==null?void 0:O.toString())||"",ie=w.rerank.cache_dir||ie,te=((V=w.rerank.columns)==null?void 0:V.join(", "))||""));const z=F?f[F]:null,q=new Set;z&&(z.columns&&Array.isArray(z.columns)&&z.columns.forEach(J=>q.add(J)),z.embedding_source_column&&q.add(z.embedding_source_column),z.primary_key&&q.add(z.primary_key),z.doc_uri&&q.add(z.doc_uri));const U=[];(I=w.search_parameters)!=null&&I.filters&&Object.entries(w.search_parameters.filters).forEach(([J,he])=>{let de=J,ye="";const De=[" NOT"," <="," >="," <"," >"," LIKE"];for(const Z of De)if(J.endsWith(Z)){de=J.slice(0,-Z.length),ye=Z;break}const K=q.has(de)?"select":"manual";U.push({id:vh(),columnSource:K,column:de,operator:ye,value:String(he)})}),d({refName:T,vectorStoreRef:F,columns:((j=w.columns)==null?void 0:j.join(", "))||"",numResults:((S=(E=w.search_parameters)==null?void 0:E.num_results)==null?void 0:S.toString())||"10",queryType:((G=w.search_parameters)==null?void 0:G.query_type)||"ANN",filters:U,enableRerank:L,rerankModel:A,rerankTopN:H,rerankCacheDir:ie,rerankColumns:te}),i(T),l(!0)},v=T=>{if(T.preventDefault(),!c.refName||!c.vectorStoreRef)return;const w=f[c.vectorStoreRef];if(!w)return;const F=c.columns.split(",").map(te=>te.trim()).filter(te=>te.length>0),L={};c.filters.forEach(te=>{if(te.column&&te.value){const z=te.operator?`${te.column}${te.operator}`:te.column;let q=te.value;te.value==="true"?q=!0:te.value==="false"?q=!1:!isNaN(Number(te.value))&&te.value.trim()!==""&&(q=Number(te.value)),L[z]=q}});const A={num_results:parseInt(c.numResults)||10,filters:Object.keys(L).length>0?L:void 0,query_type:c.queryType};let H;if(c.enableRerank){const te=c.rerankColumns.split(",").map(z=>z.trim()).filter(z=>z.length>0);H={model:c.rerankModel,top_n:c.rerankTopN?parseInt(c.rerankTopN):void 0,cache_dir:c.rerankCacheDir||void 0,columns:te.length>0?te:void 0}}const ie={vector_store:w,columns:F.length>0?F:void 0,search_parameters:A,rerank:H};o&&o!==c.refName?(s(o),t(c.refName,ie)):o?n(c.refName,ie):t(c.refName,ie),p(),l(!1)},u=T=>{const{name:w,value:F,type:L}=T.target;d(L==="checkbox"?A=>({...A,[w]:T.target.checked}):A=>({...A,[w]:F}))},g=T=>{d(w=>{var L;const F={...w,vectorStoreRef:T};return!w.columns&&((L=f[T])!=null&&L.columns)&&(F.columns=f[T].columns.join(", ")),!w.refName&&T&&(F.refName=`${Uj(T)}_retriever`),F})},C=(()=>{if(!c.vectorStoreRef)return[];const T=f[c.vectorStoreRef];if(!T)return[];const w=new Set;return T.columns&&Array.isArray(T.columns)&&T.columns.forEach(F=>w.add(F)),T.embedding_source_column&&w.add(T.embedding_source_column),T.primary_key&&w.add(T.primary_key),T.doc_uri&&w.add(T.doc_uri),Array.from(w).sort()})(),$=C.length>0,M=()=>{d(T=>({...T,filters:[...T.filters,{id:vh(),columnSource:$?"select":"manual",column:"",operator:"",value:""}]}))},R=(T,w,F)=>{d(L=>({...L,filters:L.filters.map(A=>A.id!==T?A:w==="columnSource"?{...A,columnSource:F,column:""}:{...A,[w]:F})}))},_=T=>{d(w=>({...w,filters:w.filters.filter(F=>F.id!==T)}))};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold text-slate-100 flex items-center gap-2",children:[r.jsx(ra,{className:"w-5 h-5 text-blue-400"}),"Retrievers"]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Configure vector search retrievers for semantic search and information retrieval"})]})}),!h&&r.jsx(ve,{className:"bg-amber-500/10 border-amber-500/30",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-amber-500/20 flex items-center justify-center",children:r.jsx(En,{className:"w-4 h-4 text-amber-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-amber-200",children:"No Vector Stores Configured"}),r.jsx("p",{className:"text-xs text-amber-300/70 mt-1",children:"Retrievers require a vector store. Configure at least one vector store in the Resources section first."})]})]})}),r.jsxs(Y,{onClick:()=>{p(),l(!0)},variant:"primary",size:"sm",disabled:!h,className:"self-start",children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Retriever"]}),r.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([T,w])=>{var F,L,A,H;return r.jsx(ve,{className:"hover:border-slate-700 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-sm font-medium text-slate-200",children:T}),r.jsxs(we,{variant:"info",children:[r.jsx(mh,{className:"w-3 h-3 mr-1"}),((F=w.search_parameters)==null?void 0:F.num_results)||10," results"]}),((L=w.search_parameters)==null?void 0:L.filters)&&Object.keys(w.search_parameters.filters).length>0&&r.jsxs(we,{variant:"warning",children:[Object.keys(w.search_parameters.filters).length," filter",Object.keys(w.search_parameters.filters).length!==1?"s":""]}),w.rerank&&r.jsxs(we,{variant:"success",children:[r.jsx($t,{className:"w-3 h-3 mr-1"}),"Reranking"]})]}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-slate-400",children:[r.jsxs("p",{children:[r.jsx("span",{className:"text-slate-500",children:"Query Type:"})," ",((A=w.search_parameters)==null?void 0:A.query_type)||"ANN"]}),w.columns&&w.columns.length>0&&r.jsxs("p",{children:[r.jsx("span",{className:"text-slate-500",children:"Columns:"})," ",w.columns.slice(0,3).join(", "),w.columns.length>3&&` +${w.columns.length-3} more`]}),((H=w.search_parameters)==null?void 0:H.filters)&&Object.keys(w.search_parameters.filters).length>0&&r.jsxs("p",{children:[r.jsx("span",{className:"text-slate-500",children:"Filters:"})," ",Object.entries(w.search_parameters.filters).slice(0,2).map(([ie,te])=>`${ie}=${te}`).join(", "),Object.keys(w.search_parameters.filters).length>2&&` +${Object.keys(w.search_parameters.filters).length-2} more`]}),w.rerank&&typeof w.rerank=="object"&&r.jsxs("p",{children:[r.jsx("span",{className:"text-slate-500",children:"Rerank Model:"})," ",w.rerank.model,w.rerank.top_n&&` (top ${w.rerank.top_n})`]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>y(T),children:[r.jsx(ln,{className:"w-4 h-4 mr-1"}),"Edit"]}),r.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>s(T),className:"text-red-400 hover:text-red-300",children:[r.jsx(Be,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})},T)}),Object.keys(m).length===0&&h&&r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(ra,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No retrievers configured yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Add a retriever to enable semantic search capabilities for your agents"})]})]}),r.jsx(Vs,{isOpen:a,onClose:()=>{p(),l(!1)},title:o?"Edit Retriever":"Add Retriever",size:"lg",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300 border-b border-slate-700 pb-2",children:"Basic Configuration"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Reference Name",name:"refName",value:c.refName,onChange:u,placeholder:"products_retriever",hint:"Unique identifier for this retriever",required:!0}),r.jsx(ee,{label:"Vector Store",value:c.vectorStoreRef,onChange:T=>g(T.target.value),options:[{value:"",label:"Select a vector store..."},...x],hint:"Select a configured vector store",required:!0})]}),r.jsx(X,{label:"Return Columns",name:"columns",value:c.columns,onChange:u,placeholder:"product_id, name, description",hint:"Comma-separated list of columns to return in search results"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300 border-b border-slate-700 pb-2",children:"Search Parameters"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Number of Results",name:"numResults",type:"number",value:c.numResults,onChange:u,placeholder:"10",hint:"Maximum number of results to return"}),r.jsx(ee,{label:"Query Type",value:c.queryType,onChange:T=>d(w=>({...w,queryType:T.target.value})),options:qj,hint:"Search algorithm to use"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 pb-2",children:[r.jsxs("h3",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[r.jsx(mh,{className:"w-4 h-4"}),"Filters (Optional)"]}),r.jsxs(Y,{type:"button",variant:"ghost",size:"sm",onClick:M,children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Filter"]})]}),c.filters.length===0?r.jsx("div",{className:"text-xs text-slate-500 italic py-2",children:"No filters configured. Add filters to narrow down search results based on column values."}):r.jsx("div",{className:"space-y-3",children:c.filters.map(T=>r.jsxs("div",{className:"flex items-start gap-2 p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Column"}),r.jsxs("div",{className:"flex",children:[r.jsx("button",{type:"button",onClick:()=>R(T.id,"columnSource","select"),className:`px-2 py-0.5 text-[10px] rounded-l border transition-colors ${T.columnSource==="select"?"bg-blue-600 border-blue-600 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:bg-slate-700"} ${$?"":"opacity-50 cursor-not-allowed"}`,disabled:!$,title:$?"Select from available columns":"No columns available",children:"Select"}),r.jsx("button",{type:"button",onClick:()=>R(T.id,"columnSource","manual"),className:`px-2 py-0.5 text-[10px] rounded-r border-t border-r border-b transition-colors ${T.columnSource==="manual"?"bg-blue-600 border-blue-600 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:bg-slate-700"}`,children:"Manual"})]})]}),T.columnSource==="select"&&$?r.jsxs("select",{value:T.column,onChange:w=>R(T.id,"column",w.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select column..."}),C.map(w=>r.jsx("option",{value:w,children:w},w))]}):r.jsx("input",{type:"text",value:T.column,onChange:w=>R(T.id,"column",w.target.value),placeholder:"column_name",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Operator"}),r.jsx("select",{value:T.operator,onChange:w=>R(T.id,"operator",w.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Vj.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Value"}),r.jsx("input",{type:"text",value:T.value,onChange:w=>R(T.id,"value",w.target.value),placeholder:"filter value",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Strings, numbers, or booleans (true/false)"})]})]}),r.jsx("button",{type:"button",onClick:()=>_(T.id),className:"mt-4 p-1.5 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded transition-colors",title:"Remove filter",children:r.jsx(ml,{className:"w-4 h-4"})})]},T.id))}),r.jsx("p",{className:"text-xs text-slate-500",children:"Filters restrict search results to rows matching the specified conditions. Use column names from your source table. Values are automatically parsed as numbers or booleans when applicable."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 pb-2",children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Reranking (Optional)"}),r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("input",{type:"checkbox",name:"enableRerank",checked:c.enableRerank,onChange:u,className:"rounded border-slate-600 bg-slate-700 text-blue-500 focus:ring-blue-500 focus:ring-offset-slate-800"}),r.jsx("span",{className:"text-slate-400",children:"Enable reranking"})]})]}),c.enableRerank&&r.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-slate-700",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Rerank Model",value:c.rerankModel,onChange:T=>d(w=>({...w,rerankModel:T.target.value})),options:Hj,hint:"FlashRank model for reranking"}),r.jsx(X,{label:"Top N Results",name:"rerankTopN",type:"number",value:c.rerankTopN,onChange:u,placeholder:"5",hint:"Number of results after reranking (leave empty to use search num_results)"})]}),r.jsx(X,{label:"Rerank Columns",name:"rerankColumns",value:c.rerankColumns,onChange:u,placeholder:"name, description, category",hint:"Columns to use for reranking (comma-separated)"}),r.jsx(X,{label:"Cache Directory",name:"rerankCacheDir",value:c.rerankCacheDir,onChange:u,placeholder:"/tmp/flashrank_cache",hint:"Directory to cache downloaded model weights"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-700",children:[r.jsx(Y,{type:"button",variant:"ghost",onClick:()=>{p(),l(!1)},children:"Cancel"}),r.jsxs(Y,{type:"submit",variant:"primary",children:[o?"Update":"Add"," Retriever"]})]})]})})]})}const Tn=D.forwardRef(({className:e,label:t,error:n,hint:s,id:a,...l},o)=>{const i=a||(t==null?void 0:t.toLowerCase().replace(/\s+/g,"-"));return r.jsxs("div",{className:"space-y-1.5",children:[t&&r.jsxs("label",{htmlFor:i,className:"block text-sm font-medium text-slate-300",children:[t,l.required&&r.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),r.jsx("textarea",{ref:o,id:i,className:qe("w-full px-3 py-2 bg-slate-800/50 border rounded-lg text-slate-200 placeholder-slate-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500","transition-all duration-200 resize-none font-mono text-sm",n?"border-red-500/50":"border-slate-700",e),...l}),s&&!n&&r.jsx("p",{className:"text-xs text-slate-500",children:s}),n&&r.jsx("p",{className:"text-xs text-red-400",children:n})]})});Tn.displayName="Textarea";function Bs({label:e,resourceType:t,configuredOptions:n,configuredValue:s,onConfiguredChange:a,source:l,onSourceChange:o,children:i,hint:c}){return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:e}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>o("configured"),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${l==="configured"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(En,{className:"w-3 h-3"}),r.jsx("span",{children:"Configured"})]}),r.jsx("button",{type:"button",onClick:()=>o("select"),className:`px-2 py-1 text-xs rounded ${l==="select"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]}),l==="configured"?r.jsxs("div",{className:"space-y-1",children:[r.jsx(ee,{options:[{value:"",label:`Select configured ${t}...`},...n],value:s,onChange:d=>a(d.target.value)}),n.length===0&&r.jsxs("p",{className:"text-xs text-amber-400",children:["No ",t,'s configured. Add one in Resources section or switch to "Select".']})]}):i,c&&r.jsx("p",{className:"text-xs text-slate-500",children:c})]})}const Gj=[{value:"factory",label:"Factory Function"},{value:"python",label:"Python Function"},{value:"unity_catalog",label:"Unity Catalog Function"},{value:"mcp",label:"MCP Server"}],Wj=[{value:"dao_ai.tools.create_genie_tool",label:"Genie Tool",description:"Query data using natural language via Databricks Genie",icon:sa},{value:"dao_ai.tools.create_vector_search_tool",label:"Vector Search Tool",description:"Semantic search over documents using vector embeddings",icon:ra},{value:"dao_ai.tools.search_tool",label:"Web Search Tool",description:"Search the web for information",icon:B_},{value:"dao_ai.tools.create_send_slack_message_tool",label:"Slack Message Tool",description:"Send messages to Slack channels",icon:sa},{value:"dao_ai.tools.create_uc_tools",label:"Unity Catalog Tools",description:"Execute Unity Catalog functions",icon:sn},{value:"dao_ai.tools.create_agent_endpoint_tool",label:"Agent Endpoint Tool",description:"Call another deployed agent endpoint",icon:es},{value:"dao_ai.tools.current_time_tool",label:"Current Time Tool",description:"Get the current date and time",icon:yu},{value:"dao_ai.tools.time_in_timezone_tool",label:"Time in Timezone Tool",description:"Get time in a specific timezone",icon:yu},{value:"databricks_langchain.vector_search_retriever_tool.VectorSearchRetrieverTool",label:"Databricks Vector Search Retriever",description:"Native Databricks vector search retriever tool",icon:ra},{value:"custom",label:"Custom Factory...",description:"Specify a custom factory function path",icon:dl}],Kj=[{value:"url",label:"Direct URL",description:"Connect to any MCP server via URL"},{value:"genie",label:"Genie Room",description:"Databricks Genie MCP server"},{value:"vector_search",label:"Vector Search",description:"Databricks Vector Search MCP server"},{value:"functions",label:"UC Functions",description:"Unity Catalog Functions MCP server"},{value:"sql",label:"SQL (DBSQL)",description:"Databricks SQL MCP server"},{value:"connection",label:"UC Connection",description:"External MCP server via UC Connection"}],yh={sourceType:"url",url:"",genieSource:"select",genieRefName:"",genieSpaceId:"",genieName:"",genieDescription:"",vectorStoreSource:"select",vectorStoreRefName:"",vectorEndpoint:"",vectorIndex:"",vectorCatalog:"",vectorSchema:"",schemaSource:"select",schemaRefName:"",functionsCatalog:"",functionsSchema:"",connectionSource:"select",connectionRefName:"",connectionName:"",warehouseSource:"select",warehouseRefName:"",warehouseId:"",useCredentials:!0,clientIdSource:"variable",clientIdVar:"",clientIdManual:"",clientSecretSource:"variable",clientSecretVar:"",clientSecretManual:"",workspaceHostSource:"variable",workspaceHostVar:"",workspaceHostManual:""},bh={enabled:!1,reviewPrompt:"Please review the tool call",allowAccept:!0,allowEdit:!0,allowRespond:!0,allowDecline:!0,declineMessage:"Tool call declined by user",customActions:[]};function Wl(e){const t=e.split(".");let n=t[t.length-1];return n=n.replace(/^create_/,"").replace(/_tool$/,""),n.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}function Yj(){var De,K,Z,re;const{config:e,addTool:t,removeTool:n}=Ie(),[s,a]=D.useState(!1),[l,o]=D.useState({name:"",type:"factory",functionName:"",customFunctionName:"",args:"{}",genieSource:"configured",genieRefName:"",genieSpaceId:"",warehouseSource:"configured",warehouseRefName:"",warehouseId:"",retrieverSource:"configured",retrieverRefName:"",vectorEndpoint:"",vectorIndex:"",schemaSource:"configured",schemaRefName:"",ucCatalog:"",ucSchema:"",functionSource:"configured",functionRefName:"",ucFunction:""}),[i,c]=D.useState(yh),[d,m]=D.useState(bh),[f,h]=D.useState(!1),x=((De=e.resources)==null?void 0:De.genie_rooms)||{},p=((K=e.resources)==null?void 0:K.vector_stores)||{},y=e.retrievers||{},v=e.schemas||{},u=((Z=e.resources)==null?void 0:Z.functions)||{},g=((re=e.resources)==null?void 0:re.connections)||{},b=Object.entries(x).map(([N,P])=>({value:N,label:`${N} (${P.name||P.space_id})`})),C=Object.entries(p).map(([N,P])=>({value:N,label:`${N} (${P.embedding_source_column||N})`})),$=Object.entries(y).map(([N,P])=>{var B;return{value:N,label:`${N} (${((B=P.search_parameters)==null?void 0:B.num_results)||10} results)`}}),M=Object.entries(v).map(([N,P])=>({value:N,label:`${N} (${P.catalog_name}.${P.schema_name})`})),R=Object.entries(u).map(([N,P])=>({value:N,label:`${N} (${P.name})`})),_=Object.entries(g).map(([N,P])=>({value:N,label:`${N} (${P.name})`})),k=e.tools||{},T=e.variables||{},w=Object.keys(T),{data:F,loading:L,refetch:A}=Vg(l.ucCatalog||null,l.ucSchema||null),{data:H,loading:ie,refetch:te}=Ou(l.vectorEndpoint||null),{data:z,loading:q,refetch:U}=Ou(i.vectorEndpoint||null),O=()=>{if(!d.enabled)return;const N={review_prompt:d.reviewPrompt,interrupt_config:{allow_accept:d.allowAccept,allow_edit:d.allowEdit,allow_respond:d.allowRespond,allow_decline:d.allowDecline},decline_message:d.declineMessage};return d.customActions.length>0&&(N.custom_actions={},d.customActions.forEach(P=>{P.key&&P.value&&(N.custom_actions[P.key]=P.value)})),N},V=()=>{const N={type:"mcp",name:l.name};switch(i.useCredentials&&(i.clientIdSource==="variable"&&i.clientIdVar?N.client_id=`*${i.clientIdVar}`:i.clientIdSource==="manual"&&i.clientIdManual&&(N.client_id=i.clientIdManual),i.clientSecretSource==="variable"&&i.clientSecretVar?N.client_secret=`*${i.clientSecretVar}`:i.clientSecretSource==="manual"&&i.clientSecretManual&&(N.client_secret=i.clientSecretManual),i.workspaceHostSource==="variable"&&i.workspaceHostVar?N.workspace_host=`*${i.workspaceHostVar}`:i.workspaceHostSource==="manual"&&i.workspaceHostManual&&(N.workspace_host=i.workspaceHostManual)),i.sourceType){case"url":N.url=i.url;break;case"genie":N.genie_room={name:i.genieName||"Genie Room",space_id:i.genieSpaceId,description:i.genieDescription||void 0};break;case"vector_search":N.vector_search={source_table:{schema:{catalog_name:i.vectorCatalog,schema_name:i.vectorSchema}},embedding_source_column:"content",index:{name:i.vectorIndex},endpoint:{name:i.vectorEndpoint}};break;case"functions":N.functions={catalog_name:i.functionsCatalog,schema_name:i.functionsSchema};break;case"sql":N.sql=!0;break;case"connection":i.connectionSource==="configured"&&i.connectionRefName?N.connection=`*${i.connectionRefName}`:i.connectionName&&(N.connection={name:i.connectionName});break}return N},I=N=>{N.preventDefault();const P=l.functionName==="custom"?l.customFunctionName:l.functionName;if(!l.name)return;let B;const ae=O();if(l.type==="factory"){let _e={};if(l.functionName==="dao_ai.tools.create_genie_tool")l.genieSource==="configured"&&l.genieRefName?_e={name:l.name,description:"Tool for querying via Genie",genie_room:`__REF__${l.genieRefName}`}:_e={name:l.name,description:"Tool for querying via Genie",genie_room:{space_id:l.genieSpaceId}};else if(l.functionName==="dao_ai.tools.create_vector_search_tool"||l.functionName==="databricks_langchain.vector_search_retriever_tool.VectorSearchRetrieverTool")l.retrieverSource==="configured"&&l.retrieverRefName?_e={name:l.name,description:"Search using vector embeddings",retriever:`__REF__${l.retrieverRefName}`}:_e={name:l.name,description:"Search using vector embeddings",index_name:l.vectorIndex};else try{_e=JSON.parse(l.args||"{}")}catch{}B={type:"factory",name:P||l.functionName,args:_e,...ae&&{human_in_the_loop:ae}}}else if(l.type==="python")B={type:"python",name:P,...ae&&{human_in_the_loop:ae}};else if(l.type==="unity_catalog")l.functionSource==="configured"&&l.functionRefName?B={type:"unity_catalog",__MERGE__:l.functionRefName,...ae&&{human_in_the_loop:ae}}:B={type:"unity_catalog",schema:{catalog_name:l.ucCatalog,schema_name:l.ucSchema},name:l.ucFunction.split(".").pop()||l.ucFunction,...ae&&{human_in_the_loop:ae}};else if(l.type==="mcp"){if(i.sourceType==="connection"&&!(i.connectionSource==="configured"&&i.connectionRefName||i.connectionSource==="select"&&i.connectionName))return;B=V(),ae&&(B.human_in_the_loop=ae)}else B=P;t({name:l.name,function:B}),j(),a(!1)},j=()=>{o({name:"",type:"factory",functionName:"",customFunctionName:"",args:"{}",genieSource:"configured",genieRefName:"",genieSpaceId:"",warehouseSource:"configured",warehouseRefName:"",warehouseId:"",retrieverSource:"configured",retrieverRefName:"",vectorEndpoint:"",vectorIndex:"",schemaSource:"configured",schemaRefName:"",ucCatalog:"",ucSchema:"",functionSource:"configured",functionRefName:"",ucFunction:""});const N=Object.keys(g).length>0,P=Object.keys(v).length>0,B=Object.keys(x).length>0,ae=Object.keys(p).length>0;c({...yh,connectionSource:N?"configured":"select",schemaSource:P?"configured":"select",genieSource:B?"configured":"select",vectorStoreSource:ae?"configured":"select"}),m(bh),h(!1)},E=N=>{var P;return typeof N.function=="string"?"string":((P=N.function)==null?void 0:P.type)||"unknown"},S=N=>{var P;return typeof N.function=="string"?!1:!!((P=N.function)!=null&&P.human_in_the_loop)},G=N=>{const P=E(N);if(P==="mcp")return K_;if(P==="unity_catalog")return sn;if(typeof N.function=="object"&&N.function.name){if(N.function.name.includes("genie"))return sa;if(N.function.name.includes("vector")||N.function.name.includes("search"))return ra;if(N.function.name.includes("time"))return yu;if(N.function.name.includes("agent"))return es}return dl},J=[{value:"",label:"Select a function..."},...(F||[]).map(N=>({value:N.full_name,label:`${N.name}${N.comment?` - ${N.comment}`:""}`}))],he=[{value:"",label:"Select an index..."},...(H||[]).map(N=>({value:N.name,label:`${N.name}${N.index_type?` (${N.index_type})`:""}`}))],de=[{value:"",label:"Select an index..."},...(z||[]).map(N=>({value:N.name,label:`${N.name}${N.index_type?` (${N.index_type})`:""}`}))],ye=N=>N?"env"in N?`env: ${N.env}`:"scope"in N&&"secret"in N?`secret: ${N.scope}/${N.secret}`:"value"in N?`value: ${String(N.value)}`:"options"in N?`composite (${N.options.length} options)`:"unknown":"unknown";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Tools"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure tools that agents can use to perform tasks"})]}),r.jsxs(Y,{onClick:()=>a(!0),children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Tool"]})]}),Object.keys(k).length===0?r.jsxs(ve,{className:"text-center py-12",children:[r.jsx(dl,{className:"w-12 h-12 mx-auto text-slate-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No tools configured"}),r.jsx("p",{className:"text-slate-500 mb-4",children:"Tools enable agents to interact with external systems and data."}),r.jsxs(Y,{onClick:()=>a(!0),children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Your First Tool"]})]}):r.jsx("div",{className:"grid gap-4",children:Object.entries(k).map(([N,P])=>{const B=G(P);return r.jsx(ve,{variant:"interactive",className:"group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-500/20 flex items-center justify-center",children:r.jsx(B,{className:"w-5 h-5 text-amber-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-white",children:P.name}),r.jsx("p",{className:"text-sm text-slate-400 font-mono",children:typeof P.function=="object"?P.function.name:P.function})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[S(P)&&r.jsxs(we,{variant:"success",title:"Human In The Loop Enabled",children:[r.jsx(Ln,{className:"w-3 h-3 mr-1"}),"HITL"]}),r.jsx(we,{variant:"warning",children:E(P)}),r.jsx(Y,{variant:"danger",size:"sm",onClick:()=>n(N),children:r.jsx(Be,{className:"w-4 h-4"})})]})]})},N)})}),r.jsx(Vs,{isOpen:s,onClose:()=>{a(!1),j()},title:"Add Tool",description:"Configure a tool for your agents",size:"lg",children:r.jsxs("form",{onSubmit:I,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Tool Name",placeholder:"e.g., genie_tool",value:l.name,onChange:N=>o({...l,name:N.target.value}),required:!0}),r.jsx(ee,{label:"Tool Type",options:Gj,value:l.type,onChange:N=>o({...l,type:N.target.value})})]}),l.type==="factory"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Factory Function"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Wj.map(N=>{const P=N.icon,B=l.functionName===N.value;return r.jsxs("button",{type:"button",onClick:()=>o({...l,functionName:N.value,name:l.name||Wl(N.value)}),className:`p-3 rounded-lg border text-left transition-all ${B?"border-blue-500 bg-blue-500/10":"border-slate-700 hover:border-slate-600 bg-slate-800/50"}`,children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(P,{className:`w-4 h-4 ${B?"text-blue-400":"text-slate-400"}`}),r.jsx("span",{className:`text-sm font-medium ${B?"text-white":"text-slate-300"}`,children:N.label})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:N.description})]},N.value)})})]}),l.functionName==="dao_ai.tools.create_genie_tool"&&r.jsxs("div",{className:"space-y-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Genie Tool Configuration"}),r.jsx(Bs,{label:"Genie Room",resourceType:"Genie room",configuredOptions:b,configuredValue:l.genieRefName,onConfiguredChange:N=>o({...l,genieRefName:N,genieSpaceId:""}),source:l.genieSource,onSourceChange:N=>o({...l,genieSource:N}),children:r.jsx(hh,{value:l.genieSpaceId,onChange:N=>o({...l,genieSpaceId:N,genieRefName:""}),required:!0})})]}),(l.functionName==="dao_ai.tools.create_vector_search_tool"||l.functionName==="databricks_langchain.vector_search_retriever_tool.VectorSearchRetrieverTool")&&r.jsxs("div",{className:"space-y-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Vector Search Configuration"}),r.jsx(Bs,{label:"Retriever",resourceType:"Retriever",configuredOptions:$,configuredValue:l.retrieverRefName,onConfiguredChange:N=>o({...l,retrieverRefName:N,vectorEndpoint:"",vectorIndex:""}),source:l.retrieverSource,onSourceChange:N=>o({...l,retrieverSource:N}),hint:l.retrieverSource==="configured"?"Use a pre-configured retriever from the Retrievers section":void 0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(ph,{label:"Vector Search Endpoint",value:l.vectorEndpoint,onChange:N=>o({...l,vectorEndpoint:N,vectorIndex:"",retrieverRefName:""}),required:!0}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Vector Index"}),l.vectorEndpoint&&r.jsxs("button",{type:"button",onClick:()=>te(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:ie,children:[r.jsx($t,{className:`w-3 h-3 ${ie?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),r.jsx(ee,{options:he,value:l.vectorIndex,onChange:N=>o({...l,vectorIndex:N.target.value}),disabled:!l.vectorEndpoint||ie,required:!0})]})]})})]}),l.functionName==="custom"&&r.jsx(X,{label:"Custom Factory Function",placeholder:"e.g., my_package.tools.my_factory",value:l.customFunctionName,onChange:N=>o({...l,customFunctionName:N.target.value}),required:!0}),(l.functionName==="custom"||l.functionName==="dao_ai.tools.search_tool"||l.functionName==="dao_ai.tools.create_send_slack_message_tool"||l.functionName==="dao_ai.tools.create_agent_endpoint_tool")&&r.jsx(Tn,{label:"Arguments (JSON)",placeholder:'{"key": "value"}',value:l.args,onChange:N=>o({...l,args:N.target.value}),rows:6,hint:"JSON object passed to the factory function"})]}),l.type==="python"&&r.jsx(X,{label:"Python Function Path",placeholder:"e.g., my_package.tools.my_function",value:l.functionName,onChange:N=>{const P=N.target.value;o({...l,functionName:P,name:l.name||Wl(P)})},hint:"Fully qualified Python function path",required:!0}),l.type==="unity_catalog"&&r.jsxs("div",{className:"space-y-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Unity Catalog Function"}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Function Source"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>o({...l,functionSource:"configured",ucCatalog:"",ucSchema:"",ucFunction:""}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${l.functionSource==="configured"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(En,{className:"w-3 h-3"}),r.jsx("span",{children:"Configured"})]}),r.jsx("button",{type:"button",onClick:()=>o({...l,functionSource:"select",functionRefName:""}),className:`px-2 py-1 text-xs rounded ${l.functionSource==="select"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Select"})]})]})}),l.functionSource==="configured"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{options:[{value:"",label:"Select a configured function..."},...R],value:l.functionRefName,onChange:N=>{const P=N.target.value,B=u[P];o({...l,functionRefName:P,ucFunction:"",ucCatalog:"",ucSchema:"",name:l.name||Wl((B==null?void 0:B.name)||P)})}}),R.length===0&&r.jsx("p",{className:"text-xs text-amber-400",children:'No functions configured. Add one in Resources  Functions or switch to "Select".'}),r.jsx("p",{className:"text-xs text-slate-500",children:"Select a pre-configured function from the Resources section"})]}),l.functionSource==="select"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx(Bs,{label:"Schema",resourceType:"schema",configuredOptions:M,configuredValue:l.schemaRefName,onConfiguredChange:N=>{const P=v[N];o({...l,schemaRefName:N,ucCatalog:(P==null?void 0:P.catalog_name)||"",ucSchema:(P==null?void 0:P.schema_name)||"",ucFunction:""})},source:l.schemaSource,onSourceChange:N=>o({...l,schemaSource:N}),children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ho,{label:"Catalog",value:l.ucCatalog,onChange:N=>o({...l,ucCatalog:N,ucSchema:"",ucFunction:"",schemaRefName:""}),required:!0}),r.jsx(po,{label:"Schema",value:l.ucSchema,onChange:N=>o({...l,ucSchema:N,ucFunction:"",schemaRefName:""}),catalog:l.ucCatalog||null,required:!0})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Function"}),l.ucCatalog&&l.ucSchema||l.schemaRefName?r.jsxs("button",{type:"button",onClick:()=>A(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:L,children:[r.jsx($t,{className:`w-3 h-3 ${L?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]}):null]}),r.jsx(ee,{options:J,value:l.ucFunction,onChange:N=>{const P=N.target.value;o({...l,ucFunction:P,functionRefName:"",name:l.name||Wl(P)})},disabled:(!l.ucCatalog||!l.ucSchema)&&!l.schemaRefName||L,required:!0}),L&&r.jsx("p",{className:"text-xs text-slate-500",children:"Loading functions..."}),!l.ucCatalog&&!l.ucSchema&&!l.schemaRefName&&r.jsx("p",{className:"text-xs text-slate-500",children:"Select a schema first to browse functions"})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{type:"button",onClick:()=>h(!f),className:"flex items-center space-x-2 text-sm text-slate-400 hover:text-white transition-colors w-full",children:[f?r.jsx(Ni,{className:"w-4 h-4"}):r.jsx(Ls,{className:"w-4 h-4"}),r.jsx(Ln,{className:"w-4 h-4"}),r.jsx("span",{children:"Human In The Loop"}),d.enabled&&r.jsx(we,{variant:"success",className:"ml-2",children:"Enabled"})]}),f&&r.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",id:"hitlEnabled",checked:d.enabled,onChange:N=>m({...d,enabled:N.target.checked}),className:"mt-1 rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hitlEnabled",className:"block text-sm font-medium text-slate-300 cursor-pointer",children:"Require Human Approval"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Pause execution and request human review before this tool runs."})]})]}),d.enabled&&r.jsxs(r.Fragment,{children:[r.jsx(X,{label:"Review Prompt",value:d.reviewPrompt,onChange:N=>m({...d,reviewPrompt:N.target.value}),placeholder:"Please review the tool call",hint:"Message shown to the reviewer"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Allowed Actions"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d.allowAccept,onChange:N=>m({...d,allowAccept:N.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-green-500 focus:ring-green-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"Accept"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d.allowEdit,onChange:N=>m({...d,allowEdit:N.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"Edit"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d.allowRespond,onChange:N=>m({...d,allowRespond:N.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-yellow-500 focus:ring-yellow-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"Respond"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d.allowDecline,onChange:N=>m({...d,allowDecline:N.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-red-500 focus:ring-red-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"Decline"})]})]})]}),r.jsx(X,{label:"Decline Message",value:d.declineMessage,onChange:N=>m({...d,declineMessage:N.target.value}),placeholder:"Tool call declined by user",hint:"Message returned when the user declines"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Custom Actions"}),r.jsxs(Y,{variant:"secondary",size:"sm",type:"button",onClick:()=>m({...d,customActions:[...d.customActions,{key:"",value:""}]}),children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Action"]})]}),d.customActions.map((N,P)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(X,{placeholder:"Action key",value:N.key,onChange:B=>{const ae=[...d.customActions];ae[P].key=B.target.value,m({...d,customActions:ae})},className:"flex-1"}),r.jsx(X,{placeholder:"Action description",value:N.value,onChange:B=>{const ae=[...d.customActions];ae[P].value=B.target.value,m({...d,customActions:ae})},className:"flex-1"}),r.jsx(Y,{variant:"ghost",size:"sm",type:"button",onClick:()=>{m({...d,customActions:d.customActions.filter((B,ae)=>ae!==P)})},children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]},P)),r.jsx("p",{className:"text-xs text-slate-500",children:"Custom actions allow you to define additional buttons/responses for the reviewer."})]})]})]})]}),l.type==="mcp"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"MCP Server Type"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Kj.map(N=>{const P=i.sourceType===N.value;return r.jsxs("button",{type:"button",onClick:()=>c({...i,sourceType:N.value}),className:`p-3 rounded-lg border text-left transition-all ${P?"border-purple-500 bg-purple-500/10":"border-slate-700 hover:border-slate-600 bg-slate-800/50"}`,children:[r.jsx("span",{className:`text-sm font-medium ${P?"text-white":"text-slate-300"}`,children:N.label}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:N.description})]},N.value)})})]}),r.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[i.sourceType==="url"&&r.jsx(X,{label:"MCP Server URL",placeholder:"https://your-workspace.databricks.net/api/2.0/mcp/...",value:i.url,onChange:N=>c({...i,url:N.target.value}),hint:"Full URL to the MCP server endpoint",required:!0}),i.sourceType==="genie"&&r.jsxs(r.Fragment,{children:[r.jsx(Bs,{label:"Genie Room",resourceType:"Genie room",configuredOptions:b,configuredValue:i.genieRefName,onConfiguredChange:N=>{const P=x[N];c({...i,genieRefName:N,genieSpaceId:"",genieName:(P==null?void 0:P.name)||N,genieDescription:(P==null?void 0:P.description)||""})},source:i.genieSource,onSourceChange:N=>c({...i,genieSource:N}),children:r.jsx(hh,{value:i.genieSpaceId,onChange:N=>c({...i,genieSpaceId:N,genieRefName:""}),required:!0})}),r.jsx(X,{label:"Display Name",placeholder:"e.g., Retail Genie",value:i.genieName,onChange:N=>c({...i,genieName:N.target.value})}),r.jsx(X,{label:"Description (optional)",placeholder:"Query retail data using natural language",value:i.genieDescription,onChange:N=>c({...i,genieDescription:N.target.value})})]}),i.sourceType==="vector_search"&&r.jsx(Bs,{label:"Vector Store",resourceType:"Vector store",configuredOptions:C,configuredValue:i.vectorStoreRefName,onConfiguredChange:N=>{c({...i,vectorStoreRefName:N,vectorEndpoint:"",vectorIndex:"",vectorCatalog:"",vectorSchema:""})},source:i.vectorStoreSource,onSourceChange:N=>c({...i,vectorStoreSource:N}),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ho,{label:"Catalog",value:i.vectorCatalog,onChange:N=>c({...i,vectorCatalog:N,vectorSchema:"",vectorStoreRefName:""}),required:!0}),r.jsx(po,{label:"Schema",value:i.vectorSchema,onChange:N=>c({...i,vectorSchema:N,vectorStoreRefName:""}),catalog:i.vectorCatalog||null,required:!0})]}),r.jsx(ph,{label:"Vector Search Endpoint",value:i.vectorEndpoint,onChange:N=>c({...i,vectorEndpoint:N,vectorIndex:"",vectorStoreRefName:""}),required:!0}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Vector Index"}),i.vectorEndpoint&&r.jsxs("button",{type:"button",onClick:()=>U(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:q,children:[r.jsx($t,{className:`w-3 h-3 ${q?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]})]}),r.jsx(ee,{options:de,value:i.vectorIndex,onChange:N=>c({...i,vectorIndex:N.target.value}),disabled:!i.vectorEndpoint||q,required:!0})]})]})}),i.sourceType==="functions"&&r.jsx(Bs,{label:"Schema",resourceType:"schema",configuredOptions:M,configuredValue:i.schemaRefName,onConfiguredChange:N=>{const P=v[N];c({...i,schemaRefName:N,functionsCatalog:(P==null?void 0:P.catalog_name)||"",functionsSchema:(P==null?void 0:P.schema_name)||""})},source:i.schemaSource,onSourceChange:N=>c({...i,schemaSource:N}),children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ho,{label:"Catalog",value:i.functionsCatalog,onChange:N=>c({...i,functionsCatalog:N,functionsSchema:"",schemaRefName:""}),required:!0}),r.jsx(po,{label:"Schema",value:i.functionsSchema,onChange:N=>c({...i,functionsSchema:N,schemaRefName:""}),catalog:i.functionsCatalog||null,required:!0})]})}),i.sourceType==="sql"&&r.jsxs("div",{className:"p-3 bg-slate-900/50 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-slate-300",children:[r.jsx("strong",{children:"Databricks SQL MCP"})," - Enables serverless SQL execution without requiring a warehouse."]}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"The sql: true flag will be set automatically."})]}),i.sourceType==="connection"&&r.jsx(Bs,{label:"UC Connection",resourceType:"connection",configuredOptions:_,configuredValue:i.connectionRefName,onConfiguredChange:N=>{const P=g[N];c({...i,connectionRefName:N,connectionName:(P==null?void 0:P.name)||""})},source:i.connectionSource,onSourceChange:N=>c({...i,connectionSource:N}),children:r.jsx(jj,{label:"Select Connection",value:i.connectionName,onChange:N=>c({...i,connectionName:N,connectionRefName:""}),required:!0})})]}),r.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Authentication"}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.useCredentials,onChange:N=>c({...i,useCredentials:N.target.checked}),className:"rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"Use credentials"})]})]}),i.useCredentials&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Client ID"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>c({...i,clientIdSource:"variable"}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${i.clientIdSource==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]}),r.jsx("button",{type:"button",onClick:()=>c({...i,clientIdSource:"manual"}),className:`px-2 py-1 text-xs rounded ${i.clientIdSource==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"})]})]}),i.clientIdSource==="variable"?r.jsx(ee,{options:[{value:"",label:"Select a variable..."},...w.map(N=>({value:N,label:`${N} (${ye(T[N])})`}))],value:i.clientIdVar,onChange:N=>c({...i,clientIdVar:N.target.value}),hint:w.length===0?"Define variables in the Variables section first":void 0}):r.jsx(X,{placeholder:"Enter client ID...",value:i.clientIdManual,onChange:N=>c({...i,clientIdManual:N.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Client Secret"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>c({...i,clientSecretSource:"variable"}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${i.clientSecretSource==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]}),r.jsx("button",{type:"button",onClick:()=>c({...i,clientSecretSource:"manual"}),className:`px-2 py-1 text-xs rounded ${i.clientSecretSource==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"})]})]}),i.clientSecretSource==="variable"?r.jsx(ee,{options:[{value:"",label:"Select a variable..."},...w.map(N=>({value:N,label:`${N} (${ye(T[N])})`}))],value:i.clientSecretVar,onChange:N=>c({...i,clientSecretVar:N.target.value}),hint:w.length===0?"Define variables in the Variables section first":void 0}):r.jsx(X,{type:"password",placeholder:"Enter client secret...",value:i.clientSecretManual,onChange:N=>c({...i,clientSecretManual:N.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"text-sm font-medium text-slate-300",children:["Workspace Host ",r.jsx("span",{className:"text-slate-500",children:"(Optional)"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>c({...i,workspaceHostSource:"variable"}),className:`px-2 py-1 text-xs rounded flex items-center space-x-1 ${i.workspaceHostSource==="variable"?"bg-purple-500/30 text-purple-300":"bg-slate-700 text-slate-400"}`,children:[r.jsx(yn,{className:"w-3 h-3"}),r.jsx("span",{children:"Variable"})]}),r.jsx("button",{type:"button",onClick:()=>c({...i,workspaceHostSource:"manual"}),className:`px-2 py-1 text-xs rounded ${i.workspaceHostSource==="manual"?"bg-blue-500/30 text-blue-300":"bg-slate-700 text-slate-400"}`,children:"Manual"})]})]}),i.workspaceHostSource==="variable"?r.jsx(ee,{options:[{value:"",label:"Select a variable..."},...w.map(N=>({value:N,label:`${N} (${ye(T[N])})`}))],value:i.workspaceHostVar,onChange:N=>c({...i,workspaceHostVar:N.target.value}),hint:w.length===0?"Define variables in the Variables section first":void 0}):r.jsx(X,{placeholder:"https://your-workspace.cloud.databricks.com",value:i.workspaceHostManual,onChange:N=>c({...i,workspaceHostManual:N.target.value})})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:()=>{a(!1),j()},children:"Cancel"}),r.jsx(Y,{type:"submit",disabled:!l.name||l.type==="mcp"&&i.sourceType==="connection"&&!(i.connectionSource==="configured"&&i.connectionRefName||i.connectionSource==="select"&&i.connectionName),children:"Add Tool"})]})]})})]})}async function Qj(e){const t=await fetch("/api/ai/generate-guardrail-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to generate guardrail prompt")}return(await t.json()).prompt}const uc=[{value:"accuracy",label:"Accuracy"},{value:"completeness",label:"Completeness"},{value:"clarity",label:"Clarity"},{value:"helpfulness",label:"Helpfulness"},{value:"safety",label:"Safety"},{value:"relevance",label:"Relevance"},{value:"tone",label:"Professional Tone"},{value:"no_hallucination",label:"No Hallucination"},{value:"pii_protection",label:"PII Protection"},{value:"bias_free",label:"Bias-Free"}],dc=`You are an expert judge evaluating AI responses. Your task is to critique the AI assistant's latest response in the conversation below.

Evaluate the response based on these criteria:
1. Accuracy - Is the information correct and factual?
2. Completeness - Does it fully address the user's query?
3. Clarity - Is the explanation clear and well-structured?
4. Helpfulness - Does it provide actionable and useful information?
5. Safety - Does it avoid harmful or inappropriate content?

If the response meets ALL criteria satisfactorily, set pass to True.

If you find ANY issues with the response, do NOT set pass to True. Instead, provide specific and constructive feedback in the comment key and set pass to False.

### Inputs:
{inputs}

### Response:
{outputs}`;function Jj(){var R;const{config:e,addGuardrail:t,removeGuardrail:n}=Ie(),[s,a]=D.useState(!1),[l,o]=D.useState({name:"",modelKey:"",prompt:dc,numRetries:"3"}),[i,c]=D.useState(!1),[d,m]=D.useState(""),[f,h]=D.useState(!1),[x,p]=D.useState(["accuracy","completeness","clarity","helpfulness","safety"]),[y,v]=D.useState(""),u=async(_=!1)=>{c(!0);try{const k=await Qj({context:d||void 0,guardrail_name:l.name||void 0,evaluation_criteria:x.length>0?x:void 0,existing_prompt:_?l.prompt:void 0});o({...l,prompt:k}),h(!1),m("")}catch(k){console.error("Failed to generate guardrail prompt:",k),alert(k instanceof Error?k.message:"Failed to generate guardrail prompt")}finally{c(!1)}},g=()=>{y&&!x.includes(y)&&(p([...x,y]),v(""))},b=e.guardrails||{},C=((R=e.resources)==null?void 0:R.llms)||{},$=Object.entries(C).map(([_,k])=>({value:_,label:`${_} (${k.name})`})),M=_=>{_.preventDefault(),l.name&&l.modelKey&&C[l.modelKey]&&(t({name:l.name,model:C[l.modelKey],prompt:l.prompt,num_retries:parseInt(l.numRetries)}),o({name:"",modelKey:"",prompt:dc,numRetries:"3"}),a(!1))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Guardrails"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure safety checks and quality controls for agent responses"})]}),r.jsxs(Y,{onClick:()=>a(!0),children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Guardrail"]})]}),Object.keys(b).length===0?r.jsxs(ve,{className:"text-center py-12",children:[r.jsx(aa,{className:"w-12 h-12 mx-auto text-slate-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No guardrails configured"}),r.jsx("p",{className:"text-slate-500 mb-4",children:"Guardrails help ensure agent responses are safe, accurate, and helpful."}),r.jsxs(Y,{onClick:()=>a(!0),children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Your First Guardrail"]})]}):r.jsx("div",{className:"grid gap-4",children:Object.entries(b).map(([_,k])=>r.jsx(ve,{variant:"interactive",className:"group",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/20 flex items-center justify-center flex-shrink-0",children:r.jsx(aa,{className:"w-5 h-5 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-white",children:k.name}),r.jsxs("p",{className:"text-sm text-slate-400",children:["Model: ",k.model.name]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-2 line-clamp-2 font-mono",children:[k.prompt.substring(0,100),"..."]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(we,{variant:"success",children:["retries: ",k.num_retries??3]}),r.jsx(Y,{variant:"danger",size:"sm",onClick:()=>n(_),children:r.jsx(Be,{className:"w-4 h-4"})})]})]})},_))}),r.jsx(Vs,{isOpen:s,onClose:()=>a(!1),title:"Add Guardrail",description:"Configure a safety check for agent responses",size:"lg",children:r.jsxs("form",{onSubmit:M,className:"space-y-4",children:[$.length===0&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 text-amber-400 text-sm",children:"You need to add an LLM first before creating a guardrail."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Guardrail Name",placeholder:"e.g., llm_judge_guardrail",value:l.name,onChange:_=>o({...l,name:_.target.value}),required:!0}),r.jsx(ee,{label:"Judge LLM",options:$,value:l.modelKey,onChange:_=>o({...l,modelKey:_.target.value}),placeholder:"Select an LLM...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Evaluation Prompt"})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>h(!f),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:i,children:[r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"AI Assistant"})]}),l.prompt&&l.prompt!==dc&&r.jsxs("button",{type:"button",onClick:()=>u(!0),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:i,children:[i?r.jsx(tn,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Improve Prompt"})]})]}),f&&r.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/30 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kt,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-sm font-medium text-purple-300",children:"Generate Guardrail Prompt with AI"})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Describe what this guardrail should evaluate and I'll generate an optimized evaluation prompt."}),r.jsx(Tn,{value:d,onChange:_=>m(_.target.value),rows:2,placeholder:"e.g., This guardrail should check that responses don't contain harmful content and are factually accurate for a retail customer service agent..."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Evaluation Criteria"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Select what aspects the guardrail should evaluate"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:uc.map(_=>r.jsx("button",{type:"button",onClick:()=>{x.includes(_.value)?p(x.filter(k=>k!==_.value)):p([...x,_.value])},className:`px-2 py-1 text-xs rounded-md transition-all ${x.includes(_.value)?"bg-emerald-500/30 text-emerald-300 border border-emerald-500/50":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:_.label},_.value))}),x.filter(_=>!uc.map(k=>k.value).includes(_)).length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:x.filter(_=>!uc.map(k=>k.value).includes(_)).map(_=>r.jsxs("span",{className:"px-2 py-1 text-xs rounded-md bg-blue-500/30 text-blue-300 border border-blue-500/50 flex items-center space-x-1",children:[r.jsx("span",{children:_}),r.jsx("button",{type:"button",onClick:()=>p(x.filter(k=>k!==_)),className:"hover:text-red-300",children:""})]},_))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:y,onChange:_=>v(_.target.value.replace(/[^a-z0-9_\s]/gi,"").toLowerCase()),placeholder:"Add custom criterion...",className:"flex-1 px-2 py-1 text-xs bg-slate-800 border border-slate-700 rounded-md text-slate-300 placeholder-slate-500 focus:border-purple-500 focus:outline-none",onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),g())}}),r.jsx("button",{type:"button",onClick:g,disabled:!y,className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded-md hover:bg-slate-600 disabled:opacity-50",children:"Add"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(Y,{type:"button",variant:"secondary",size:"sm",onClick:()=>{h(!1),m("")},disabled:i,children:"Cancel"}),r.jsx(Y,{type:"button",size:"sm",onClick:()=>u(!1),disabled:i||x.length===0&&!d,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:i?r.jsxs(r.Fragment,{children:[r.jsx(tn,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kt,{className:"w-4 h-4 mr-1.5"}),"Generate Prompt"]})})]})]}),r.jsx(Tn,{value:l.prompt,onChange:_=>o({...l,prompt:_.target.value}),rows:12,hint:"Use {inputs} and {outputs} placeholders for conversation context",required:!0})]}),r.jsx(X,{label:"Number of Retries",type:"number",min:"0",max:"10",value:l.numRetries,onChange:_=>o({...l,numRetries:_.target.value}),hint:"How many times to retry if evaluation fails"}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:()=>a(!1),children:"Cancel"}),r.jsx(Y,{type:"submit",disabled:$.length===0,children:"Add Guardrail"})]})]})})]})}const _h=[{value:"memory",label:"In-Memory"},{value:"postgres",label:"Lakebase/PostgreSQL"}];function Zj(){var L,A,H,ie,te,z,q,U,O,V,I,j,E;const{config:e,updateMemory:t}=Ie(),n=e.memory,s=((L=e.resources)==null?void 0:L.databases)||{},[a,l]=D.useState(!!(n!=null&&n.checkpointer)),[o,i]=D.useState(!!(n!=null&&n.store)),[c,d]=D.useState(((A=n==null?void 0:n.checkpointer)==null?void 0:A.type)||"memory"),[m,f]=D.useState(((H=n==null?void 0:n.checkpointer)==null?void 0:H.name)||"default_checkpointer"),[h,x]=D.useState(((te=(ie=n==null?void 0:n.checkpointer)==null?void 0:ie.database)==null?void 0:te.name)||""),[p,y]=D.useState(((z=n==null?void 0:n.store)==null?void 0:z.type)||"memory"),[v,u]=D.useState(((q=n==null?void 0:n.store)==null?void 0:q.name)||"default_store"),[g,b]=D.useState(((O=(U=n==null?void 0:n.store)==null?void 0:U.database)==null?void 0:O.name)||""),[C,$]=D.useState(((V=n==null?void 0:n.store)==null?void 0:V.dims)||1536),[M,R]=D.useState(((I=n==null?void 0:n.store)==null?void 0:I.namespace)||"{user_id}"),[_,k]=D.useState(((E=(j=n==null?void 0:n.store)==null?void 0:j.embedding_model)==null?void 0:E.name)||"databricks-gte-large-en");D.useEffect(()=>{var S,G,J;n!=null&&n.checkpointer&&(l(!0),d(n.checkpointer.type||"memory"),f(n.checkpointer.name||"default_checkpointer"),x(((S=n.checkpointer.database)==null?void 0:S.name)||"")),n!=null&&n.store&&(i(!0),y(n.store.type||"memory"),u(n.store.name||"default_store"),b(((G=n.store.database)==null?void 0:G.name)||""),$(n.store.dims||1536),R(n.store.namespace||"{user_id}"),k(((J=n.store.embedding_model)==null?void 0:J.name)||"databricks-gte-large-en"))},[n]);const T=()=>{const S={};if(a){const G={name:m,type:c};if(c==="postgres"&&h){const J=s[h];J&&(G.database=J)}S.checkpointer=G}if(o){const G={name:v,type:p};if(_&&(G.embedding_model={name:_,on_behalf_of_user:!1}),G.dims=C,M&&(G.namespace=M),p==="postgres"&&g){const J=s[g];J&&(G.database=J)}S.store=G}return a||o?S:void 0},w=()=>{t(T())},F=Object.keys(s);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Memory Configuration"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure conversation persistence and long-term memory storage"})]}),r.jsx(Y,{onClick:w,children:"Save Memory Config"})]}),r.jsx(ve,{className:"p-4 bg-blue-900/20 border-blue-500/30",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ud,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-blue-300",children:[r.jsx("p",{className:"font-medium",children:"Memory Components"}),r.jsxs("ul",{className:"mt-2 space-y-1 text-blue-400/80",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Checkpointer"}),": Saves conversation state for resumable sessions"]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Store"}),": Long-term semantic memory with embeddings for context"]})]}),r.jsx("p",{className:"font-medium mt-3",children:"Storage Options"}),r.jsxs("ul",{className:"mt-2 space-y-1 text-blue-400/80",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"In-Memory"}),": No database required. Fast but data lost on restart. Best for development."]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Lakebase/PostgreSQL"}),": Requires database backend. Persistent storage. Best for production."]})]}),F.length===0&&r.jsxs("p",{className:"mt-3 text-amber-400",children:[" No databases configured. Add a database in the ",r.jsx("strong",{children:"Resources  Databases"})," section to use persistent storage."]})]})]})}),r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Tg,{className:"w-5 h-5 text-purple-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Checkpointer"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:S=>l(S.target.checked),className:"rounded border-slate-600 bg-slate-800 text-purple-500 focus:ring-purple-500"}),r.jsx("span",{className:"text-sm text-slate-300",children:"Enable"})]})]}),a&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-400",children:"Saves conversation state between messages for resumable sessions and multi-turn conversations."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Name",value:m,onChange:S=>f(S.target.value),placeholder:"default_checkpointer"}),r.jsx(ee,{label:"Storage Type",value:c,onChange:S=>d(S.target.value),options:_h})]}),c==="memory"&&r.jsx("div",{className:"p-3 bg-amber-900/20 border border-amber-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-amber-300",children:[r.jsx("strong",{children:"In-Memory Storage:"})," Conversation state will be stored in memory only. Data is lost when the agent restarts. Ideal for development and testing."]})}),c==="postgres"&&r.jsxs(r.Fragment,{children:[r.jsx(ee,{label:"Database",value:h,onChange:S=>x(S.target.value),options:[{value:"",label:"Select a database..."},...F.map(S=>({value:S,label:S}))],hint:F.length===0?"Add a database in Resources  Databases":void 0}),r.jsx("div",{className:"p-3 bg-emerald-900/20 border border-emerald-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-emerald-300",children:[r.jsx("strong",{children:"Persistent Storage:"})," Conversation state will be stored in Lakebase/PostgreSQL. Data persists across agent restarts. Recommended for production."]})})]})]})]}),r.jsxs(ve,{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sn,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Long-Term Memory Store"})]}),r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:o,onChange:S=>i(S.target.checked),className:"rounded border-slate-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500"}),r.jsx("span",{className:"text-sm text-slate-300",children:"Enable"})]})]}),o&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-400",children:"Semantic memory storage with embeddings for persistent context across sessions."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Name",value:v,onChange:S=>u(S.target.value),placeholder:"default_store"}),r.jsx(ee,{label:"Storage Type",value:p,onChange:S=>y(S.target.value),options:_h})]}),p==="memory"&&r.jsx("div",{className:"p-3 bg-amber-900/20 border border-amber-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-amber-300",children:[r.jsx("strong",{children:"In-Memory Storage:"})," Long-term memories will be stored in memory only. Data is lost when the agent restarts. Useful for development and testing."]})}),p==="postgres"&&r.jsxs(r.Fragment,{children:[r.jsx(ee,{label:"Database",value:g,onChange:S=>b(S.target.value),options:[{value:"",label:"Select a database..."},...F.map(S=>({value:S,label:S}))],hint:F.length===0?"Add a database in Resources  Databases":void 0}),r.jsx("div",{className:"p-3 bg-emerald-900/20 border border-emerald-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-emerald-300",children:[r.jsx("strong",{children:"Persistent Storage:"})," Long-term memories will be stored in Lakebase/PostgreSQL with vector search. Data persists across agent restarts. Recommended for production."]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Embedding Model",value:_,onChange:S=>k(S.target.value),placeholder:"databricks-gte-large-en",hint:"Databricks serving endpoint for embeddings"}),r.jsx(X,{label:"Embedding Dimensions",type:"number",value:C,onChange:S=>$(parseInt(S.target.value)||1536),hint:"Usually 1536 for GTE-Large"})]}),r.jsx(X,{label:"Namespace Template",value:M,onChange:S=>R(S.target.value),placeholder:"{user_id}",hint:"Template for partitioning memories. Use {user_id}, {thread_id}, etc."})]})]})]})}async function Xj(e){const t=await fetch("/api/ai/generate-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to generate prompt")}return(await t.json()).prompt}const mc=[{value:"user_id",label:"User ID"},{value:"store_num",label:"Store Number"},{value:"session_id",label:"Session ID"},{value:"context",label:"Context"},{value:"current_date",label:"Current Date"},{value:"user_name",label:"User Name"},{value:"location",label:"Location"}],fc=`### User Information
- **User Id**: {user_id}
- **Store Number**: {store_num}

You are a helpful assistant. Your role is to provide accurate and useful information.

#### Response Guidelines
- Be clear and concise
- Provide helpful examples when appropriate
- Always prioritize user safety
`;function jh(e){return e.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}function eN(){const{config:e,addPrompt:t,updatePrompt:n,removePrompt:s}=Ie(),[a,l]=D.useState(!1),[o,i]=D.useState(null),[c,d]=D.useState("new"),[m,f]=D.useState("reference"),[h,x]=D.useState(!1),[p,y]=D.useState({refName:"",name:"",description:"",default_template:fc,alias:"",version:"",schemaRef:"",catalog_name:"",schema_name:"",tags:{},existingPromptFullName:""}),[v,u]=D.useState(""),[g,b]=D.useState(""),[C,$]=D.useState(!1),[M,R]=D.useState(!1),[_,k]=D.useState(""),[T,w]=D.useState(!1),[F,L]=D.useState(["user_id","store_num"]),[A,H]=D.useState(""),ie=async(P=!1)=>{R(!0);try{const B=await Xj({context:_||void 0,agent_name:p.name||void 0,agent_description:p.description||void 0,existing_prompt:P?p.default_template:void 0,template_parameters:F.length>0?F:void 0});y({...p,default_template:B}),w(!1),k("")}catch(B){console.error("Failed to generate prompt:",B),alert(B instanceof Error?B.message:"Failed to generate prompt")}finally{R(!1)}},te=()=>{A&&!F.includes(A)&&(L([...F,A]),H(""))},z=e.prompts||{},q=e.schemas||{},{data:U}=vr(),{data:O,loading:V}=$n(p.catalog_name||null),{data:I,loading:j,refetch:E}=bj(p.catalog_name||null,p.schema_name||null),{data:S,loading:G}=_j(p.existingPromptFullName||null),J=[{value:"",label:"No alias (use version or latest)"},...((S==null?void 0:S.aliases)||[]).map(P=>({value:P,label:P}))],he=[{value:"",label:S!=null&&S.latest_version?`Latest (v${S.latest_version})`:"Latest"},...((S==null?void 0:S.versions)||[]).map(P=>({value:P.version,label:`v${P.version}${P.aliases&&P.aliases.length>0?` (${P.aliases.join(", ")})`:""}`}))];D.useEffect(()=>{if(!p.existingPromptFullName)return;(async()=>{$(!0);try{const B=await dt.getPromptTemplate(p.existingPromptFullName,p.version||void 0,p.alias||void 0);B!=null&&B.template&&y(ae=>({...ae,default_template:B.template,version:p.version||B.version||""}))}catch(B){console.error("Error loading prompt template:",B)}finally{$(!1)}})()},[p.existingPromptFullName,p.version,p.alias]),D.useEffect(()=>{S&&p.existingPromptFullName&&y(P=>({...P,tags:S.tags||{},description:S.description||P.description,version:P.version||S.latest_version||""}))},[S,p.existingPromptFullName]);const de=()=>{y({refName:"",name:"",description:"",default_template:fc,alias:"",version:"",schemaRef:"",catalog_name:"",schema_name:"",tags:{},existingPromptFullName:""}),d("new"),f("reference"),u(""),b(""),i(null),x(!1)},ye=P=>{const B=q[P];B&&y({...p,schemaRef:P,catalog_name:B.catalog_name,schema_name:B.schema_name,existingPromptFullName:"",name:"",refName:""})},De=P=>{const B=I==null?void 0:I.find(ae=>ae.full_name===P);if(B){const ae=h?p.refName:jh(B.name);y({...p,existingPromptFullName:P,name:B.name,refName:ae,description:B.description||"",alias:"",version:B.latest_version||"",tags:B.tags||{}})}},K=P=>{var ne;const B=z[P];let ae="",_e="",W="",se="direct";if(B.schema){const ce=Object.entries(q).find(([,ge])=>{var Ee,Ue;return ge.catalog_name===((Ee=B.schema)==null?void 0:Ee.catalog_name)&&ge.schema_name===((Ue=B.schema)==null?void 0:Ue.schema_name)});ce?(ae=ce[0],se="reference"):(_e=B.schema.catalog_name||"",W=B.schema.schema_name||"",se="direct")}d("new"),f(se),x(!0),y({refName:P,name:B.name,description:B.description||"",default_template:B.default_template||"",alias:B.alias||"",version:((ne=B.version)==null?void 0:ne.toString())||"",schemaRef:ae,catalog_name:_e,schema_name:W,tags:B.tags||{},existingPromptFullName:""}),i(P),l(!0)},Z=P=>{if(P.preventDefault(),!p.refName||!p.name)return;let B;m==="reference"&&p.schemaRef&&q[p.schemaRef]?B=q[p.schemaRef]:p.catalog_name&&p.schema_name&&(B={catalog_name:p.catalog_name,schema_name:p.schema_name});const ae={name:p.name,schema:B,description:p.description||void 0,default_template:p.default_template||void 0,alias:p.alias||void 0,version:p.version?parseInt(p.version):void 0,tags:Object.keys(p.tags).length>0?p.tags:void 0};o?(o!==p.refName&&s(o),n(p.refName,ae)):t(p.refName,ae),de(),l(!1)},re=()=>{v&&g&&(y({...p,tags:{...p.tags,[v]:g}}),u(""),b(""))},N=P=>{const B={...p.tags};delete B[P],y({...p,tags:B})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Prompts"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure reusable prompts for agents with MLflow Prompt Registry integration"})]}),r.jsxs(Y,{onClick:()=>{de(),l(!0)},children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Prompt"]})]}),Object.keys(z).length===0?r.jsxs(ve,{className:"text-center py-12",children:[r.jsx(mr,{className:"w-12 h-12 mx-auto text-slate-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No prompts configured"}),r.jsx("p",{className:"text-slate-500 mb-4 max-w-md mx-auto",children:'Prompts define agent behavior and can be version-controlled through MLflow Prompt Registry. Use aliases like "production" or "staging" for environment management.'}),r.jsxs(Y,{onClick:()=>{de(),l(!0)},children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Your First Prompt"]})]}):r.jsx("div",{className:"grid gap-4",children:Object.entries(z).map(([P,B])=>r.jsx(ve,{variant:"interactive",className:"group",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-500/20 flex items-center justify-center flex-shrink-0",children:r.jsx(mr,{className:"w-5 h-5 text-violet-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"font-medium text-white",children:P}),B.alias&&r.jsxs(we,{variant:"info",children:[r.jsx(Ag,{className:"w-3 h-3 mr-1"}),"@",B.alias]}),B.version&&r.jsxs(we,{variant:"default",children:[r.jsx(G_,{className:"w-3 h-3 mr-1"}),"v",B.version]})]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:B.schema?`${B.schema.catalog_name}.${B.schema.schema_name}.${B.name}`:B.name}),B.description&&r.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:B.description}),B.tags&&Object.keys(B.tags).length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(B.tags).map(([ae,_e])=>r.jsxs("span",{className:"px-2 py-0.5 bg-slate-700/50 rounded text-xs text-slate-400",children:[r.jsx(ku,{className:"w-3 h-3 inline mr-1"}),ae,": ",_e]},ae))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>K(P),children:r.jsx(ln,{className:"w-4 h-4"})}),r.jsx(Y,{variant:"danger",size:"sm",onClick:()=>s(P),children:r.jsx(Be,{className:"w-4 h-4"})})]})]})},P))}),r.jsx(Vs,{isOpen:a,onClose:()=>{de(),l(!1)},title:o?"Edit Prompt":"Add Prompt",description:"Configure a reusable prompt for agents",size:"xl",children:r.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[!o&&r.jsxs("div",{className:"flex items-center justify-center space-x-4 p-3 bg-slate-800/50 rounded-lg",children:[r.jsxs("button",{type:"button",onClick:()=>{d("new"),y({...p,existingPromptFullName:""})},className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${c==="new"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,children:[r.jsx(ke,{className:"w-4 h-4"}),r.jsx("span",{children:"New Prompt"})]}),r.jsxs("button",{type:"button",onClick:()=>{d("existing")},className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${c==="existing"?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,children:[r.jsx(Rg,{className:"w-4 h-4"}),r.jsx("span",{children:"Existing Prompt"})]})]}),c==="existing"&&!o&&r.jsxs("div",{className:"space-y-4 p-4 bg-slate-800/30 rounded-lg border border-slate-700",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Select Existing Prompt from MLflow Registry"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{f("reference"),x(!1),y({...p,catalog_name:"",schema_name:"",existingPromptFullName:"",name:"",refName:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured Schema"}),r.jsx("button",{type:"button",onClick:()=>{f("direct"),x(!1),y({...p,schemaRef:"",existingPromptFullName:"",name:"",refName:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m==="direct"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Catalog/Schema"})]}),m==="reference"?r.jsx(ee,{label:"Schema Reference",value:p.schemaRef,onChange:P=>ye(P.target.value),options:[{value:"",label:"Select a configured schema..."},...Object.entries(q).map(([P,B])=>({value:P,label:`${P} (${B.catalog_name}.${B.schema_name})`}))],hint:"Reference a schema defined in the Schemas section"}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Catalog",value:p.catalog_name,onChange:P=>y({...p,catalog_name:P.target.value,schema_name:"",existingPromptFullName:"",name:"",refName:""}),options:[{value:"",label:"Select catalog..."},...(U||[]).map(P=>({value:P.name,label:P.name}))]}),r.jsx(ee,{label:"Schema",value:p.schema_name,onChange:P=>y({...p,schema_name:P.target.value,existingPromptFullName:"",name:"",refName:""}),options:[{value:"",label:V?"Loading...":"Select schema..."},...(O||[]).map(P=>({value:P.name,label:P.name}))],disabled:!p.catalog_name||V})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Available Prompts"}),p.catalog_name&&p.schema_name||p.schemaRef?r.jsxs("button",{type:"button",onClick:()=>E(),className:"text-xs text-slate-400 hover:text-white flex items-center space-x-1",disabled:j,children:[r.jsx($t,{className:`w-3 h-3 ${j?"animate-spin":""}`}),r.jsx("span",{children:"Refresh"})]}):null]}),r.jsx(ee,{value:p.existingPromptFullName,onChange:P=>De(P.target.value),options:[{value:"",label:j?"Loading prompts...":"Select a prompt..."},...(I||[]).map(P=>({value:P.full_name,label:`${P.name}${P.description?` - ${P.description.substring(0,50)}${P.description.length>50?"...":""}`:""}`}))],disabled:(!p.catalog_name||!p.schema_name)&&!p.schemaRef||j}),(p.catalog_name&&p.schema_name||p.schemaRef)&&!j&&(!I||I.length===0)&&r.jsx("p",{className:"text-xs text-amber-400",children:"No prompts found in this schema. Try selecting a different schema or create a new prompt."})]}),p.existingPromptFullName&&r.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm font-medium text-slate-300",children:"Version & Alias"}),G&&r.jsxs("span",{className:"text-xs text-slate-400 flex items-center space-x-1",children:[r.jsx($t,{className:"w-3 h-3 animate-spin"}),r.jsx("span",{children:"Loading details..."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Alias",value:p.alias,onChange:P=>y({...p,alias:P.target.value,version:""}),options:J,hint:"Use an alias for environment-based version selection"}),r.jsx(ee,{label:"Version",value:p.version,onChange:P=>y({...p,version:P.target.value,alias:""}),options:he,hint:"Pin to a specific version number"})]})]})]}),r.jsx(X,{label:"Reference Name",placeholder:"e.g., general_prompt",value:p.refName,onChange:P=>{y({...p,refName:P.target.value}),x(!0)},hint:o?"Changing this will update all references in the YAML":"Unique key to reference this prompt in agents (use &anchor)",required:!0}),r.jsx(X,{label:"Prompt Name",placeholder:"e.g., general_prompt",value:p.name,onChange:P=>{const B=P.target.value;y({...p,name:B,refName:!o&&!h?jh(B):p.refName})},hint:"The prompt name in MLflow Prompt Registry",required:!0,disabled:c==="existing"&&!!p.existingPromptFullName}),r.jsx(X,{label:"Description",placeholder:"e.g., General retail store assistant prompt",value:p.description,onChange:P=>y({...p,description:P.target.value}),hint:"Used as commit message when syncing to MLflow registry"}),c==="new"&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Schema (Optional)"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{f("reference"),y({...p,catalog_name:"",schema_name:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m==="reference"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Use Configured Schema"}),r.jsx("button",{type:"button",onClick:()=>{f("direct"),y({...p,schemaRef:""})},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m==="direct"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Select Catalog/Schema"})]}),m==="reference"?r.jsx(ee,{label:"Schema Reference",value:p.schemaRef,onChange:P=>y({...p,schemaRef:P.target.value}),options:[{value:"",label:"Select a configured schema..."},...Object.entries(q).map(([P,B])=>({value:P,label:`${P} (${B.catalog_name}.${B.schema_name})`}))],hint:"Reference a schema defined in the Schemas section"}):r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Catalog",value:p.catalog_name,onChange:P=>y({...p,catalog_name:P.target.value,schema_name:""}),options:[{value:"",label:"Select catalog..."},...(U||[]).map(P=>({value:P.name,label:P.name}))]}),r.jsx(ee,{label:"Schema",value:p.schema_name,onChange:P=>y({...p,schema_name:P.target.value}),options:[{value:"",label:V?"Loading schemas...":"Select schema..."},...(O||[]).map(P=>({value:P.name,label:P.name}))],disabled:!p.catalog_name||V})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Associate prompt with a Unity Catalog schema for the full name (catalog.schema.prompt_name)"})]})]}),c==="new"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Alias (Optional)",placeholder:"e.g., production, staging",value:p.alias,onChange:P=>y({...p,alias:P.target.value}),hint:"Reference a specific environment version"}),r.jsx(X,{label:"Version (Optional)",type:"number",min:"1",placeholder:"e.g., 1",value:p.version,onChange:P=>y({...p,version:P.target.value}),hint:"Pin to specific version number"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:c==="existing"?"Template":"Default Template"}),r.jsx("div",{className:"flex items-center space-x-2",children:C&&r.jsxs("span",{className:"text-xs text-slate-400 flex items-center space-x-1",children:[r.jsx($t,{className:"w-3 h-3 animate-spin"}),r.jsx("span",{children:"Loading template..."})]})})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>w(!T),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:M,children:[r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"AI Assistant"})]}),p.default_template&&p.default_template!==fc&&r.jsxs("button",{type:"button",onClick:()=>ie(!0),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:M,children:[M?r.jsx(tn,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Improve Prompt"})]})]}),T&&r.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/30 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kt,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-sm font-medium text-purple-300",children:"Generate Prompt with AI"})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Describe what this prompt should do and I'll generate an optimized template for you."}),r.jsx(Tn,{value:_,onChange:P=>k(P.target.value),rows:3,placeholder:"e.g., This prompt is for a product specialist agent that helps customers find and compare products. It should include instructions for tool usage and customer service best practices..."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Template Parameters"}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Select variables to include in the prompt (e.g., ","{user_id}",")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:mc.map(P=>r.jsx("button",{type:"button",onClick:()=>{F.includes(P.value)?L(F.filter(B=>B!==P.value)):L([...F,P.value])},className:`px-2 py-1 text-xs rounded-md transition-all ${F.includes(P.value)?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:P.label},P.value))}),F.filter(P=>!mc.map(B=>B.value).includes(P)).length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:F.filter(P=>!mc.map(B=>B.value).includes(P)).map(P=>r.jsxs("span",{className:"px-2 py-1 text-xs rounded-md bg-blue-500/30 text-blue-300 border border-blue-500/50 flex items-center space-x-1",children:[r.jsx("span",{children:P}),r.jsx("button",{type:"button",onClick:()=>L(F.filter(B=>B!==P)),className:"hover:text-red-300",children:""})]},P))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:A,onChange:P=>H(P.target.value.replace(/[^a-z0-9_]/gi,"_").toLowerCase()),placeholder:"Add custom parameter...",className:"flex-1 px-2 py-1 text-xs bg-slate-800 border border-slate-700 rounded-md text-slate-300 placeholder-slate-500 focus:border-purple-500 focus:outline-none",onKeyDown:P=>{P.key==="Enter"&&(P.preventDefault(),te())}}),r.jsx("button",{type:"button",onClick:te,disabled:!A,className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded-md hover:bg-slate-600 disabled:opacity-50",children:"Add"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(Y,{type:"button",variant:"secondary",size:"sm",onClick:()=>{w(!1),k("")},disabled:M,children:"Cancel"}),r.jsx(Y,{type:"button",size:"sm",onClick:()=>ie(!1),disabled:M||!_&&!p.name&&!p.description,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:M?r.jsxs(r.Fragment,{children:[r.jsx(tn,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kt,{className:"w-4 h-4 mr-1.5"}),"Generate Prompt"]})})]})]}),r.jsx(Tn,{value:p.default_template,onChange:P=>y({...p,default_template:P.target.value}),rows:10,hint:c==="existing"?"Template loaded from MLflow registry. Changes here are local only.":"Fallback template if MLflow registry is unavailable. Use {variable_name} for substitutions."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Tags"}),Object.keys(p.tags).length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(p.tags).map(([P,B])=>r.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-slate-700/50 rounded text-sm",children:[r.jsx(ku,{className:"w-3 h-3 text-slate-400"}),r.jsxs("span",{className:"text-slate-300",children:[P,":"]}),r.jsx("span",{className:"text-slate-400",children:B}),r.jsx("button",{type:"button",onClick:()=>N(P),className:"ml-1 text-slate-500 hover:text-red-400",children:""})]},P))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(X,{placeholder:"Key (e.g., environment)",value:v,onChange:P=>u(P.target.value),className:"flex-1"}),r.jsx(X,{placeholder:"Value (e.g., production)",value:g,onChange:P=>b(P.target.value),className:"flex-1"}),r.jsx(Y,{type:"button",variant:"secondary",size:"sm",onClick:re,disabled:!v||!g,children:r.jsx(ke,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Metadata tags for organization and filtering in MLflow"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:()=>{de(),l(!1)},children:"Cancel"}),r.jsxs(Y,{type:"submit",disabled:!p.refName||!p.name,children:[o?"Update":"Add"," Prompt"]})]})]})})]})}function Nh({label:e,options:t,value:n,onChange:s,placeholder:a,hint:l}){const[o,i]=D.useState(!1),c=D.useRef(null);D.useEffect(()=>{const h=x=>{c.current&&!c.current.contains(x.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const d=h=>{n.includes(h)?s(n.filter(x=>x!==h)):s([...n,h])},m=(h,x)=>{x.stopPropagation(),s(n.filter(p=>p!==h))},f=n.map(h=>{var x;return((x=t.find(p=>p.value===h))==null?void 0:x.label)||h});return r.jsxs("div",{className:"space-y-1.5",ref:c,children:[e&&r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:e}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{onClick:()=>i(!o),className:qe("w-full min-h-[42px] px-3 py-2 bg-slate-800/50 border rounded-lg cursor-pointer","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500","transition-all duration-200 flex flex-wrap gap-1.5 items-center",o?"border-blue-500 ring-2 ring-blue-500/50":"border-slate-700"),children:[n.length===0?r.jsx("span",{className:"text-slate-500",children:a||"Select options..."}):f.map((h,x)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-500/20 text-blue-400 rounded text-sm",children:[h,r.jsx(ml,{className:"w-3 h-3 cursor-pointer hover:text-blue-300",onClick:p=>m(n[x],p)})]},n[x])),r.jsx(Ls,{className:qe("w-4 h-4 text-slate-500 ml-auto transition-transform",o&&"rotate-180")})]}),o&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-auto",children:t.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No options available"}):t.map(h=>r.jsxs("div",{onClick:()=>d(h.value),className:qe("px-3 py-2 flex items-center justify-between cursor-pointer transition-colors",n.includes(h.value)?"bg-blue-500/20 text-blue-400":"text-slate-300 hover:bg-slate-700"),children:[r.jsx("span",{children:h.label}),n.includes(h.value)&&r.jsx(zd,{className:"w-4 h-4"})]},h.value))})]}),l&&r.jsx("p",{className:"text-xs text-slate-500",children:l})]})}async function tN(e){const t=await fetch("/api/ai/generate-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to generate prompt")}return(await t.json()).prompt}async function nN(e){const t=await fetch("/api/ai/generate-handoff-prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.error||"Failed to generate handoff prompt")}return(await t.json()).prompt}const hc=[{value:"user_id",label:"User ID"},{value:"store_num",label:"Store Number"},{value:"session_id",label:"Session ID"},{value:"context",label:"Context"},{value:"current_date",label:"Current Date"},{value:"user_name",label:"User Name"},{value:"location",label:"Location"}];function sN(){var C;const{config:e,addAgent:t,removeAgent:n,updateAgent:s}=Ie(),[a,l]=D.useState(!1),[o,i]=D.useState(null),[c,d]=D.useState(null),m=e.agents||{},f=((C=e.resources)==null?void 0:C.llms)||{},h=e.tools||{},x=e.guardrails||{},p=e.prompts||{},y=Object.entries(f).map(([$,M])=>({value:$,label:`${$} (${M.name})`})),v=Object.entries(h).map(([$,M])=>({value:$,label:M.name})),u=Object.entries(x).map(([$,M])=>({value:$,label:M.name})),g=Object.entries(p).map(([$,M])=>({value:$,label:`${$} (${M.name})`})),b=$=>{i($),l(!0)};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Agents"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Create and configure your AI agents"})]}),r.jsxs(Y,{onClick:()=>{i(null),l(!0)},children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Agent"]})]}),Object.keys(m).length===0?r.jsxs(ve,{className:"text-center py-12",children:[r.jsx(es,{className:"w-12 h-12 mx-auto text-slate-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No agents configured"}),r.jsx("p",{className:"text-slate-500 mb-4",children:"Agents are the AI assistants that interact with users and use tools."}),r.jsxs(Y,{onClick:()=>l(!0),children:[r.jsx(ke,{className:"w-4 h-4"}),"Add Your First Agent"]})]}):r.jsx("div",{className:"space-y-3",children:Object.entries(m).map(([$,M])=>{var R;return r.jsxs(ve,{className:"overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(c===$?null:$),children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-violet-500/20 flex items-center justify-center",children:r.jsx(es,{className:"w-5 h-5 text-violet-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-white",children:M.name}),M.description&&r.jsx("p",{className:"text-sm text-slate-400",children:M.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(we,{variant:"info",children:typeof M.model=="object"?M.model.name:M.model}),r.jsxs(we,{variant:"default",children:[((R=M.tools)==null?void 0:R.length)||0," tools"]}),c===$?r.jsx(Ni,{className:"w-5 h-5 text-slate-400"}):r.jsx(Ls,{className:"w-5 h-5 text-slate-400"})]})]}),c===$&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-2",children:"System Prompt"}),typeof M.prompt=="object"&&M.prompt!==null?r.jsxs("div",{className:"flex items-center space-x-2 bg-slate-800/50 p-3 rounded-lg",children:[r.jsx(mr,{className:"w-4 h-4 text-violet-400"}),r.jsxs("span",{className:"text-sm text-slate-300",children:["Using configured prompt: ",r.jsx("span",{className:"text-violet-400 font-medium",children:M.prompt.name})]})]}):r.jsx("pre",{className:"text-sm text-slate-300 bg-slate-800/50 p-3 rounded-lg overflow-auto max-h-40",children:M.prompt||"No prompt configured"})]}),M.handoff_prompt&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-2",children:"Handoff Prompt"}),r.jsx("pre",{className:"text-sm text-slate-300 bg-slate-800/50 p-3 rounded-lg overflow-auto max-h-20",children:M.handoff_prompt})]}),M.tools&&M.tools.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-slate-400 mb-2",children:"Tools"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:M.tools.map((_,k)=>r.jsx(we,{variant:"warning",children:_.name},k))})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>b($),children:[r.jsx(ln,{className:"w-4 h-4"}),"Edit"]}),r.jsxs(Y,{variant:"danger",size:"sm",onClick:()=>n($),children:[r.jsx(Be,{className:"w-4 h-4"}),"Delete"]})]})]})]},$)})}),r.jsx(rN,{isOpen:a,onClose:()=>{l(!1),i(null)},editingAgent:o?m[o]:null,editingKey:o,llmOptions:y,toolOptions:v,guardrailOptions:u,promptOptions:g,llms:f,tools:h,guardrails:x,prompts:p,onAdd:t,onUpdate:s})]})}function rN({isOpen:e,onClose:t,editingAgent:n,editingKey:s,llmOptions:a,toolOptions:l,guardrailOptions:o,promptOptions:i,llms:c,tools:d,guardrails:m,prompts:f,onAdd:h,onUpdate:x}){var j,E;const{config:p}=Ie(),[y,v]=D.useState("inline"),[u,g]=D.useState(!1),[b,C]=D.useState(!1),[$,M]=D.useState(""),[R,_]=D.useState(!1),[k,T]=D.useState(["user_id","store_num"]),[w,F]=D.useState(""),[L,A]=D.useState({name:"",description:"",modelKey:"",promptRef:"",prompt:"You are a helpful assistant.",handoffPrompt:"",selectedTools:[],selectedGuardrails:[]}),[H,ie]=D.useState(null),[te,z]=D.useState("inline"),q=async(S=!1)=>{g(!0);try{const G=L.selectedTools.map(he=>{var de;return(de=d[he])==null?void 0:de.name}).filter(Boolean),J=await tN({context:$||void 0,agent_name:L.name||void 0,agent_description:L.description||void 0,tools:G.length>0?G:void 0,existing_prompt:S?L.prompt:void 0,template_parameters:k.length>0?k:void 0});A({...L,prompt:J}),_(!1),M("")}catch(G){console.error("Failed to generate prompt:",G),alert(G instanceof Error?G.message:"Failed to generate prompt")}finally{g(!1)}},U=async(S=!1)=>{C(!0);try{const G=Object.values(p.agents||{}).map(he=>he.name).filter(he=>he!==L.name),J=await nN({agent_name:L.name||void 0,agent_description:L.description||void 0,system_prompt:L.prompt||void 0,existing_handoff:S?L.handoffPrompt:void 0,other_agents:G.length>0?G:void 0});A({...L,handoffPrompt:J})}catch(G){console.error("Failed to generate handoff prompt:",G),alert(G instanceof Error?G.message:"Failed to generate handoff prompt")}finally{C(!1)}},O=()=>{w&&!k.includes(w)&&(T([...k,w]),F(""))};D.useEffect(()=>{var S,G,J,he;if(n){const de=((S=Object.entries(c).find(([,B])=>{var ae;return B.name===((ae=n.model)==null?void 0:ae.name)}))==null?void 0:S[0])||"";let ye="inline",De="",K="";if(typeof n.prompt=="object"&&n.prompt!==null){const B=n.prompt,ae=(G=Object.entries(f).find(([,_e])=>_e.name===B.name))==null?void 0:G[0];ae&&(ye="configured",De=ae)}else K=typeof n.prompt=="string"?n.prompt:"";const Z=((J=n.tools)==null?void 0:J.map(B=>{var ae;return((ae=Object.entries(d).find(([,_e])=>_e.name===B.name))==null?void 0:ae[0])||""}).filter(Boolean))||[],re=((he=n.guardrails)==null?void 0:he.map(B=>{var ae;return((ae=Object.entries(m).find(([,_e])=>_e.name===B.name))==null?void 0:ae[0])||""}).filter(Boolean))||[],N={name:n.name,description:n.description||"",modelKey:de,promptRef:De,prompt:K,handoffPrompt:n.handoff_prompt||"",selectedTools:Z,selectedGuardrails:re},P={name:n.name,description:n.description||"",modelKey:de,promptRef:De,prompt:K,handoffPrompt:n.handoff_prompt||"",selectedTools:[...Z],selectedGuardrails:[...re]};v(ye),A(N),ie(P),z(ye)}else{const de={name:"",description:"",modelKey:"",promptRef:"",prompt:"You are a helpful assistant.",handoffPrompt:"",selectedTools:[],selectedGuardrails:[]};v("inline"),A(de),ie(null),z("inline")}},[n,s,c,f,d,m]);const V=S=>{if(S.preventDefault(),!L.name||!L.modelKey||!c[L.modelKey])return;let G;y==="configured"&&L.promptRef&&f[L.promptRef]?G=f[L.promptRef]:G=L.prompt||void 0;const J={name:L.name,description:L.description||void 0,model:c[L.modelKey],prompt:G,handoff_prompt:L.handoffPrompt||void 0,tools:L.selectedTools.map(he=>d[he]).filter(Boolean),guardrails:L.selectedGuardrails.map(he=>m[he]).filter(Boolean)};s?x(s,J):h(J),t()},I=D.useMemo(()=>!s||!H||L.name!==H.name||L.description!==H.description||L.modelKey!==H.modelKey||L.prompt!==H.prompt||L.handoffPrompt!==H.handoffPrompt||L.promptRef!==H.promptRef||y!==te||L.selectedTools.length!==H.selectedTools.length||!L.selectedTools.every((S,G)=>S===H.selectedTools[G])||L.selectedGuardrails.length!==H.selectedGuardrails.length||!L.selectedGuardrails.every((S,G)=>S===H.selectedGuardrails[G]),[L,H,y,te,s]);return r.jsx(Vs,{isOpen:e,onClose:t,title:s?"Edit Agent":"Add Agent",description:"Configure an AI agent with its model, tools, and prompts",size:"xl",children:r.jsxs("form",{onSubmit:V,className:"space-y-4",children:[a.length===0&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 text-amber-400 text-sm",children:"You need to add an LLM first before creating an agent."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Agent Name",placeholder:"e.g., customer_service_agent",value:L.name,onChange:S=>A({...L,name:S.target.value}),required:!0}),r.jsx(ee,{label:"Model",options:a,value:L.modelKey,onChange:S=>A({...L,modelKey:S.target.value}),placeholder:"Select an LLM...",required:!0})]}),r.jsx(X,{label:"Description",placeholder:"Brief description of this agent's purpose",value:L.description,onChange:S=>A({...L,description:S.target.value})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"System Prompt"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>{v("inline"),A({...L,promptRef:""})},className:`px-3 py-1.5 text-xs rounded-lg font-medium transition-colors ${y==="inline"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:"Write Inline"}),r.jsxs("button",{type:"button",onClick:()=>{v("configured"),A({...L,prompt:""})},className:`px-3 py-1.5 text-xs rounded-lg font-medium transition-colors flex items-center space-x-1 ${y==="configured"?"bg-violet-500/20 text-violet-400 border border-violet-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:[r.jsx(mr,{className:"w-3 h-3"}),r.jsx("span",{children:"Use Configured"})]})]})]}),y==="configured"?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ee,{value:L.promptRef,onChange:S=>A({...L,promptRef:S.target.value}),options:i,placeholder:"Select a configured prompt..."}),L.promptRef&&f[L.promptRef]&&r.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(mr,{className:"w-4 h-4 text-violet-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:f[L.promptRef].name})]}),f[L.promptRef].description&&r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:f[L.promptRef].description}),f[L.promptRef].default_template&&r.jsxs("pre",{className:"text-xs text-slate-500 bg-slate-900/50 p-2 rounded overflow-auto max-h-32",children:[(j=f[L.promptRef].default_template)==null?void 0:j.substring(0,300),(((E=f[L.promptRef].default_template)==null?void 0:E.length)||0)>300?"...":""]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Reference a prompt defined in the Prompts section. The prompt will be resolved at runtime."})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>_(!R),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:u,children:[r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"AI Assistant"})]}),L.prompt&&L.prompt!=="You are a helpful assistant."&&r.jsxs("button",{type:"button",onClick:()=>q(!0),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:u,children:[u?r.jsx(tn,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Improve Prompt"})]})]})}),R&&r.jsxs("div",{className:"p-3 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-lg border border-purple-500/30 space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(kt,{className:"w-4 h-4 text-purple-400"}),r.jsx("span",{className:"text-sm font-medium text-purple-300",children:"Generate Prompt with AI"})]}),r.jsx("p",{className:"text-xs text-slate-400",children:"Describe what this agent should do and I'll generate an optimized prompt for you."}),r.jsx(Tn,{value:$,onChange:S=>M(S.target.value),rows:3,placeholder:"e.g., This agent helps customers find products in a hardware store. It should be friendly and knowledgeable about tools and home improvement..."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Template Parameters"}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Select variables to include in the prompt (e.g., ","{user_id}",")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:hc.map(S=>r.jsx("button",{type:"button",onClick:()=>{k.includes(S.value)?T(k.filter(G=>G!==S.value)):T([...k,S.value])},className:`px-2 py-1 text-xs rounded-md transition-all ${k.includes(S.value)?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"bg-slate-800 text-slate-400 border border-slate-700 hover:border-slate-600"}`,children:S.label},S.value))}),k.filter(S=>!hc.map(G=>G.value).includes(S)).length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:k.filter(S=>!hc.map(G=>G.value).includes(S)).map(S=>r.jsxs("span",{className:"px-2 py-1 text-xs rounded-md bg-blue-500/30 text-blue-300 border border-blue-500/50 flex items-center space-x-1",children:[r.jsx("span",{children:S}),r.jsx("button",{type:"button",onClick:()=>T(k.filter(G=>G!==S)),className:"hover:text-red-300",children:""})]},S))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:w,onChange:S=>F(S.target.value.replace(/[^a-z0-9_]/gi,"_").toLowerCase()),placeholder:"Add custom parameter...",className:"flex-1 px-2 py-1 text-xs bg-slate-800 border border-slate-700 rounded-md text-slate-300 placeholder-slate-500 focus:border-purple-500 focus:outline-none",onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),O())}}),r.jsx("button",{type:"button",onClick:O,disabled:!w,className:"px-2 py-1 text-xs bg-slate-700 text-slate-300 rounded-md hover:bg-slate-600 disabled:opacity-50",children:"Add"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(Y,{type:"button",variant:"secondary",size:"sm",onClick:()=>{_(!1),M("")},disabled:u,children:"Cancel"}),r.jsx(Y,{type:"button",size:"sm",onClick:()=>q(!1),disabled:u||!$&&!L.name&&!L.description,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",children:u?r.jsxs(r.Fragment,{children:[r.jsx(tn,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kt,{className:"w-4 h-4 mr-1.5"}),"Generate Prompt"]})})]})]}),r.jsx(Tn,{value:L.prompt,onChange:S=>A({...L,prompt:S.target.value}),rows:8,hint:"The main instructions for this agent",placeholder:"You are a helpful assistant..."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Handoff Prompt"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{type:"button",onClick:()=>U(!1),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:b||!L.prompt&&!L.description,title:!L.prompt&&!L.description?"Add a system prompt or description first":"Generate handoff prompt with AI",children:[b?r.jsx(tn,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"AI Assistant"})]}),L.handoffPrompt&&r.jsxs("button",{type:"button",onClick:()=>U(!0),className:"flex items-center space-x-1.5 px-3 py-1.5 text-xs rounded-lg font-medium bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border border-purple-500/30 hover:from-purple-500/30 hover:to-pink-500/30 transition-all",disabled:b,children:[b?r.jsx(tn,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(kt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Improve Prompt"})]})]}),r.jsx(Tn,{placeholder:"Describe when this agent should be called in a multi-agent system...",value:L.handoffPrompt,onChange:S=>A({...L,handoffPrompt:S.target.value}),rows:3,hint:"Used by the supervisor to decide when to route to this agent"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Nh,{label:"Tools",options:l,value:L.selectedTools,onChange:S=>A({...L,selectedTools:S}),placeholder:"Select tools...",hint:"Tools this agent can use"}),r.jsx(Nh,{label:"Guardrails",options:o,value:L.selectedGuardrails,onChange:S=>A({...L,selectedGuardrails:S}),placeholder:"Select guardrails...",hint:"Safety checks for this agent"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:t,children:"Cancel"}),r.jsx(Y,{type:"submit",disabled:a.length===0||!!s&&!I,children:s?"Save Changes":"Add Agent"})]})]})})}const aN=[{value:"TRACE",label:"TRACE"},{value:"DEBUG",label:"DEBUG"},{value:"INFO",label:"INFO"},{value:"WARNING",label:"WARNING"},{value:"ERROR",label:"ERROR"}],lN=[{value:"Small",label:"Small"},{value:"Medium",label:"Medium"},{value:"Large",label:"Large"}];function oN(){var ye,De,K,Z,re,N,P,B,ae,_e;const{config:e,updateApp:t}=Ie(),n=e.app,s=e.schemas||{},a=e.agents||{},l=((ye=e.resources)==null?void 0:ye.llms)||{},[o,i]=D.useState({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",logLevel:(n==null?void 0:n.log_level)||"INFO",endpointName:(n==null?void 0:n.endpoint_name)||"",modelName:((De=n==null?void 0:n.registered_model)==null?void 0:De.name)||"",modelSchema:"",workloadSize:(n==null?void 0:n.workload_size)||"Small",scaleToZero:(n==null?void 0:n.scale_to_zero)??!0}),[c,d]=D.useState((n==null?void 0:n.tags)||{}),[m,f]=D.useState(""),[h,x]=D.useState(""),p=[{value:"CAN_MANAGE",label:"Can Manage"},{value:"CAN_QUERY",label:"Can Query"},{value:"CAN_VIEW",label:"Can View"},{value:"CAN_REVIEW",label:"Can Review"},{value:"NO_PERMISSIONS",label:"No Permissions"}],[y,v]=D.useState(((K=n==null?void 0:n.permissions)==null?void 0:K.map(W=>({principals:W.principals||[],entitlements:W.entitlements||[]})))||[]),[u,g]=D.useState(""),[b,C]=D.useState(()=>n!=null&&n.agents&&Array.isArray(n.agents)?n.agents.map(W=>{var ne;return((ne=Object.entries(a).find(([,ce])=>ce.name===W.name))==null?void 0:ne[0])||""}).filter(Boolean):[]),[$,M]=D.useState((re=(Z=e.app)==null?void 0:Z.orchestration)!=null&&re.supervisor?"supervisor":(P=(N=e.app)==null?void 0:N.orchestration)!=null&&P.swarm?"swarm":"none"),[R,_]=D.useState(((_e=(ae=(B=e.app)==null?void 0:B.orchestration)==null?void 0:ae.supervisor)==null?void 0:_e.prompt)||""),[k,T]=D.useState(()=>{var se,ne,ce,ge,Ee,Ue,tt,Rt;const W=((ge=(ce=(ne=(se=e.app)==null?void 0:se.orchestration)==null?void 0:ne.supervisor)==null?void 0:ce.model)==null?void 0:ge.name)||((Rt=(tt=(Ue=(Ee=e.app)==null?void 0:Ee.orchestration)==null?void 0:Ue.swarm)==null?void 0:tt.model)==null?void 0:Rt.name);if(W){const Ut=Object.entries(l).find(([,jn])=>jn.name===W);return Ut?Ut[0]:""}return""}),[w,F]=D.useState(()=>{var se,ne,ce;const W=(ce=(ne=(se=e.app)==null?void 0:se.orchestration)==null?void 0:ne.swarm)==null?void 0:ce.default_agent;return typeof W=="string"?W:W&&"name"in W?W.name:""}),[L,A]=D.useState(()=>{var se,ne,ce;const W=(ce=(ne=(se=e.app)==null?void 0:se.orchestration)==null?void 0:ne.swarm)==null?void 0:ce.handoffs;return W?Object.entries(W).map(([ge,Ee])=>{if(Ee==null)return{agentName:ge,type:"any",targets:[]};if(Array.isArray(Ee)&&Ee.length===0)return{agentName:ge,type:"none",targets:[]};const Ue=Ee.map(tt=>typeof tt=="string"?tt:tt.name);return{agentName:ge,type:"specific",targets:Ue}}):[]}),H=(()=>{var Ee,Ue,tt,Rt,Ut,jn,as,ls,os,is,cs,us,ds,ms,fs,bt,At;if(o.name!==((n==null?void 0:n.name)||"")||o.description!==((n==null?void 0:n.description)||"")||o.logLevel!==((n==null?void 0:n.log_level)||"INFO")||o.endpointName!==((n==null?void 0:n.endpoint_name)||"")||o.modelName!==(((Ee=n==null?void 0:n.registered_model)==null?void 0:Ee.name)||"")||o.workloadSize!==((n==null?void 0:n.workload_size)||"Small")||o.scaleToZero!==((n==null?void 0:n.scale_to_zero)??!0))return!0;const W=((n==null?void 0:n.agents)||[]).map(mt=>{var rt;return((rt=Object.entries(a).find(([,Hs])=>Hs.name===mt.name))==null?void 0:rt[0])||""}).filter(Boolean).sort(),se=[...b].sort();if(JSON.stringify(W)!==JSON.stringify(se))return!0;const ne=(Ue=n==null?void 0:n.orchestration)!=null&&Ue.supervisor?"supervisor":(tt=n==null?void 0:n.orchestration)!=null&&tt.swarm?"swarm":"none";if($!==ne)return!0;if($==="supervisor"){const mt=(jn=(Ut=(Rt=n==null?void 0:n.orchestration)==null?void 0:Rt.supervisor)==null?void 0:Ut.model)==null?void 0:jn.name,Qe=k?(as=l[k])==null?void 0:as.name:"";if(mt!==Qe||R!==(((os=(ls=n==null?void 0:n.orchestration)==null?void 0:ls.supervisor)==null?void 0:os.prompt)||""))return!0}else if($==="swarm"){const mt=(us=(cs=(is=n==null?void 0:n.orchestration)==null?void 0:is.swarm)==null?void 0:cs.model)==null?void 0:us.name,Qe=k?(ds=l[k])==null?void 0:ds.name:"";if(mt!==Qe)return!0;const rt=(fs=(ms=n==null?void 0:n.orchestration)==null?void 0:ms.swarm)==null?void 0:fs.default_agent,Hs=typeof rt=="string"?rt:(rt==null?void 0:rt.name)||"";if(w!==Hs)return!0;const El=((At=(bt=n==null?void 0:n.orchestration)==null?void 0:bt.swarm)==null?void 0:At.handoffs)||{},qs={};if(L.forEach(Dn=>{Dn.type==="any"?qs[Dn.agentName]=null:Dn.type==="none"?qs[Dn.agentName]=[]:qs[Dn.agentName]=Dn.targets}),JSON.stringify(El)!==JSON.stringify(qs))return!0}const ce=(n==null?void 0:n.tags)||{};if(JSON.stringify(ce)!==JSON.stringify(c))return!0;const ge=(n==null?void 0:n.permissions)||[];return JSON.stringify(ge)!==JSON.stringify(y)})(),ie=[{value:"",label:"None"},...Object.keys(s).map(W=>({value:W,label:W}))],te=[{value:"",label:"Select an LLM..."},...Object.entries(l).map(([W,se])=>({value:W,label:`${W} (${se.name})`}))],z=Object.keys(a),q=b.filter(W=>a[W]),U=[{value:"",label:b.length===0?"Select agents for app first...":"Select an agent..."},...q.map(W=>({value:W,label:a[W].name}))],O=[{value:"any",label:"Any Agent (can hand off to all)"},{value:"specific",label:"Specific Agents (select targets)"},{value:"none",label:"No Handoffs (terminal agent)"}],V=q.filter(W=>!L.some(se=>se.agentName===W));D.useEffect(()=>{var ge,Ee,Ue,tt,Rt,Ut,jn,as,ls,os,is,cs,us,ds,ms,fs;if(i({name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",logLevel:(n==null?void 0:n.log_level)||"INFO",endpointName:(n==null?void 0:n.endpoint_name)||"",modelName:((ge=n==null?void 0:n.registered_model)==null?void 0:ge.name)||"",modelSchema:"",workloadSize:(n==null?void 0:n.workload_size)||"Small",scaleToZero:(n==null?void 0:n.scale_to_zero)??!0}),n!=null&&n.agents&&Array.isArray(n.agents)){const bt=n.agents.map(At=>{var Qe;return((Qe=Object.entries(a).find(([,rt])=>rt.name===At.name))==null?void 0:Qe[0])||""}).filter(Boolean);C(bt)}else C([]);const W=(Ee=n==null?void 0:n.orchestration)!=null&&Ee.supervisor?"supervisor":(Ue=n==null?void 0:n.orchestration)!=null&&Ue.swarm?"swarm":"none";M(W);const se=((Ut=(Rt=(tt=n==null?void 0:n.orchestration)==null?void 0:tt.supervisor)==null?void 0:Rt.model)==null?void 0:Ut.name)||((ls=(as=(jn=n==null?void 0:n.orchestration)==null?void 0:jn.swarm)==null?void 0:as.model)==null?void 0:ls.name);if(se){const bt=Object.entries(l).find(([,At])=>At.name===se);T(bt?bt[0]:"")}else T("");_(((is=(os=n==null?void 0:n.orchestration)==null?void 0:os.supervisor)==null?void 0:is.prompt)||"");const ne=(us=(cs=n==null?void 0:n.orchestration)==null?void 0:cs.swarm)==null?void 0:us.default_agent;typeof ne=="string"?F(ne):ne&&"name"in ne?F(ne.name):F("");const ce=(ms=(ds=n==null?void 0:n.orchestration)==null?void 0:ds.swarm)==null?void 0:ms.handoffs;if(ce){const bt=Object.entries(ce).map(([At,mt])=>{if(mt==null)return{agentName:At,type:"any",targets:[]};if(Array.isArray(mt)&&mt.length===0)return{agentName:At,type:"none",targets:[]};const Qe=mt.map(rt=>typeof rt=="string"?rt:rt.name);return{agentName:At,type:"specific",targets:Qe}});A(bt)}else A([]);d((n==null?void 0:n.tags)||{}),v(((fs=n==null?void 0:n.permissions)==null?void 0:fs.map(bt=>({principals:bt.principals||[],entitlements:bt.entitlements||[]})))||[])},[n,a,l]);const I=()=>{V.length>0&&A([...L,{agentName:V[0],type:"any",targets:[]}])},j=W=>{A(L.filter((se,ne)=>ne!==W))},E=(W,se)=>{A(L.map((ne,ce)=>ce===W?{...ne,...se}:ne))},S=(W,se)=>{const ne=L[W],ce=ne.targets.includes(se)?ne.targets.filter(ge=>ge!==se):[...ne.targets,se];E(W,{targets:ce})},G=()=>{const W=o.modelSchema?s[o.modelSchema]:void 0;let se;if($==="supervisor"&&k&&l[k])se={supervisor:{model:l[k],...R&&{prompt:R}}};else if($==="swarm"&&k&&l[k]){const ce={};L.forEach(ge=>{ge.type==="any"?ce[ge.agentName]=null:ge.type==="none"?ce[ge.agentName]=[]:ce[ge.agentName]=ge.targets}),se={swarm:{model:l[k],...w&&a[w]&&{default_agent:w},...Object.keys(ce).length>0&&{handoffs:ce}}}}const ne=b.map(ce=>a[ce]).filter(Boolean);t({name:o.name,description:o.description||void 0,log_level:o.logLevel,endpoint_name:o.endpointName||void 0,registered_model:{name:o.modelName,...W&&{schema:W}},workload_size:o.workloadSize,scale_to_zero:o.scaleToZero,orchestration:se,agents:ne.length>0?ne:void 0,tags:Object.keys(c).length>0?c:void 0,permissions:y.length>0?y:void 0})},J=W=>{C(se=>se.includes(W)?se.filter(ne=>ne!==W):[...se,W])},he=()=>{C(Object.keys(a))},de=()=>{C([])};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Application"}),r.jsx("p",{className:"text-slate-400 mt-1",children:"Configure your application settings, orchestration, and deployment options"})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(nr,{className:"w-5 h-5 text-slate-400"}),r.jsx("h3",{className:"font-medium text-white",children:"Application Settings"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Application Name",placeholder:"e.g., my_retail_app",value:o.name,onChange:W=>i({...o,name:W.target.value}),required:!0}),r.jsx(ee,{label:"Log Level",options:aN,value:o.logLevel,onChange:W=>i({...o,logLevel:W.target.value})})]}),r.jsx(X,{label:"Description",placeholder:"Brief description of your application",value:o.description,onChange:W=>i({...o,description:W.target.value})}),r.jsx(X,{label:"Endpoint Name",placeholder:"e.g., my_agent_endpoint",value:o.endpointName,onChange:W=>i({...o,endpointName:W.target.value}),hint:"The name of the model serving endpoint"})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(es,{className:"w-5 h-5 text-slate-400"}),r.jsx("h3",{className:"font-medium text-white",children:"Application Agents"})]}),r.jsx("div",{className:"flex items-center space-x-2",children:z.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Y,{variant:"ghost",size:"sm",onClick:he,disabled:b.length===z.length,children:"Select All"}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:de,disabled:b.length===0,children:"Clear"})]})})]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Select the agents to include in this application. These agents will be available for orchestration."}),z.length===0?r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-amber-400 text-sm",children:"No agents configured. Add agents in the Agents section first."}):r.jsx("div",{className:"space-y-2",children:z.map(W=>{const se=a[W],ne=b.includes(W);return r.jsxs("button",{type:"button",onClick:()=>J(W),className:qe("w-full flex items-center justify-between p-3 rounded-lg border transition-all text-left",ne?"bg-blue-500/10 border-blue-500/50 ring-1 ring-blue-500/30":"bg-slate-800/50 border-slate-700 hover:border-slate-600"),children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:qe("w-8 h-8 rounded-lg flex items-center justify-center",ne?"bg-blue-500/20":"bg-slate-700"),children:r.jsx(es,{className:qe("w-4 h-4",ne?"text-blue-400":"text-slate-400")})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white",children:se.name}),se.description&&r.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:se.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[se.tools&&se.tools.length>0&&r.jsxs(we,{variant:"default",className:"text-[10px]",children:[se.tools.length," tools"]}),ne?r.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}):r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-slate-600"})]})]},W)})}),b.length>0&&r.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[r.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["Selected agents (",b.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(W=>{var se;return r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:[((se=a[W])==null?void 0:se.name)||W,r.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),J(W)},className:"ml-1.5 hover:text-white",children:r.jsx(ml,{className:"w-3 h-3"})})]},W)})})]})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(dh,{className:"w-5 h-5 text-slate-400"}),r.jsx("h3",{className:"font-medium text-white",children:"Orchestration"})]}),r.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Configure how agents work together in your multi-agent system"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>M("none"),className:qe("p-4 rounded-lg border text-center transition-all",$==="none"?"bg-blue-500/10 border-blue-500 ring-1 ring-blue-500":"bg-slate-800/50 border-slate-700 hover:border-slate-600"),children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-lg bg-slate-700 flex items-center justify-center mb-2",children:r.jsx(Ag,{className:"w-5 h-5 text-slate-400"})}),r.jsx("h4",{className:"text-sm font-medium text-white",children:"No Orchestration"}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Single agent mode"})]}),r.jsxs("button",{type:"button",onClick:()=>M("supervisor"),className:qe("p-4 rounded-lg border text-center transition-all",$==="supervisor"?"bg-blue-500/10 border-blue-500 ring-1 ring-blue-500":"bg-slate-800/50 border-slate-700 hover:border-slate-600"),children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-lg bg-blue-500/20 flex items-center justify-center mb-2",children:r.jsx(fh,{className:"w-5 h-5 text-blue-400"})}),r.jsx("h4",{className:"text-sm font-medium text-white",children:"Supervisor"}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Central routing agent"})]}),r.jsxs("button",{type:"button",onClick:()=>M("swarm"),className:qe("p-4 rounded-lg border text-center transition-all",$==="swarm"?"bg-blue-500/10 border-blue-500 ring-1 ring-blue-500":"bg-slate-800/50 border-slate-700 hover:border-slate-600"),children:[r.jsx("div",{className:"w-10 h-10 mx-auto rounded-lg bg-purple-500/20 flex items-center justify-center mb-2",children:r.jsx(dh,{className:"w-5 h-5 text-purple-400"})}),r.jsx("h4",{className:"text-sm font-medium text-white",children:"Swarm"}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Peer-to-peer handoffs"})]})]}),$!=="none"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-700",children:[Object.keys(l).length===0&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-amber-400 text-sm",children:"Add an LLM in Resources first to configure orchestration."}),r.jsx(ee,{label:"Orchestration Model",options:te,value:k,onChange:W=>T(W.target.value),hint:$==="supervisor"?"The LLM that will route requests to appropriate agents":"The LLM used for agent handoff decisions"}),$==="supervisor"&&r.jsx(Tn,{label:"Supervisor Prompt (Optional)",placeholder:"Custom instructions for the supervisor agent...",value:R,onChange:W=>_(W.target.value),rows:4,hint:"Override the default supervisor prompt"}),$==="swarm"&&r.jsxs(r.Fragment,{children:[b.length===0&&r.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3 text-amber-400 text-sm",children:"Select agents for the application above before configuring swarm orchestration."}),r.jsx(ee,{label:"Default Agent",options:U,value:w,onChange:W=>F(W.target.value),hint:"The agent that handles initial requests (from selected application agents)",disabled:b.length===0}),r.jsxs("div",{className:"space-y-3 pt-3 border-t border-slate-700/50",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-slate-200",children:"Agent Handoff Rules"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Define which agents can hand off to which other agents"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:I,disabled:V.length===0||b.length===0,children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Rule"]})]}),b.length===0&&r.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 text-slate-400 text-sm",children:"Select agents for the application first to configure handoff rules."}),L.length===0&&b.length>0&&r.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Ud,{className:"w-4 h-4 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-blue-300",children:[r.jsx("p",{className:"font-medium",children:"No handoff rules defined"}),r.jsxs("p",{className:"text-blue-400/80 mt-1 text-xs",children:["Without explicit rules, agents will use their ",r.jsx("code",{className:"bg-blue-900/50 px-1 rounded",children:"handoff_prompt"})," to determine routing."]})]})]})}),L.map((W,se)=>{var ne;return r.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-700/50 space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[r.jsx(ee,{label:"From Agent",value:W.agentName,onChange:ce=>E(se,{agentName:ce.target.value}),options:[{value:W.agentName,label:((ne=a[W.agentName])==null?void 0:ne.name)||W.agentName},...V.map(ce=>{var ge;return{value:ce,label:((ge=a[ce])==null?void 0:ge.name)||ce}})]}),r.jsx(ee,{label:"Can Hand Off To",value:W.type,onChange:ce=>E(se,{type:ce.target.value,targets:ce.target.value==="specific"?W.targets:[]}),options:O})]}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>j(se),className:"ml-2 mt-6",children:r.jsx(Be,{className:"w-4 h-4 text-red-400"})})]}),W.type==="specific"&&r.jsxs("div",{className:"pt-1",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Select target agents:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:q.filter(ce=>ce!==W.agentName).map(ce=>{var ge;return r.jsx("button",{type:"button",onClick:()=>S(se,ce),className:qe("px-2.5 py-1 rounded-lg text-xs transition-colors",W.targets.includes(ce)?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"bg-slate-700 text-slate-400 border border-slate-600 hover:border-slate-500"),children:((ge=a[ce])==null?void 0:ge.name)||ce},ce)})})]}),W.type==="any"&&r.jsx("p",{className:"text-xs text-emerald-400",children:" This agent can hand off to any other agent"}),W.type==="none"&&r.jsx("p",{className:"text-xs text-amber-400",children:" This agent cannot hand off (terminal agent)"})]},se)})]})]})]}),r.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 text-xs text-slate-400 space-y-1.5",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(we,{variant:"info",className:"text-[10px] px-1.5 py-0",children:"Supervisor"}),r.jsx("span",{children:"Central agent analyzes requests and routes to appropriate specialized agents."})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(we,{variant:"info",className:"text-[10px] px-1.5 py-0",children:"Swarm"}),r.jsx("span",{children:"Agents hand off conversations directly to each other based on handoff rules."})]})]})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium text-white",children:"Model Registration"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(X,{label:"Registered Model Name",placeholder:"e.g., my_agent_model",value:o.modelName,onChange:W=>i({...o,modelName:W.target.value}),required:!0}),r.jsx(ee,{label:"Model Schema",options:ie,value:o.modelSchema,onChange:W=>i({...o,modelSchema:W.target.value}),hint:"Unity Catalog schema for model registration"})]})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsx("h3",{className:"font-medium text-white",children:"Deployment Options"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ee,{label:"Workload Size",options:lN,value:o.workloadSize,onChange:W=>i({...o,workloadSize:W.target.value})}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Scale to Zero"}),r.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[r.jsx("button",{type:"button",onClick:()=>i({...o,scaleToZero:!0}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o.scaleToZero?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-slate-800 text-slate-400 border border-slate-700"}`,children:"Enabled"}),r.jsx("button",{type:"button",onClick:()=>i({...o,scaleToZero:!1}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${o.scaleToZero?"bg-slate-800 text-slate-400 border border-slate-700":"bg-blue-500/20 text-blue-400 border border-blue-500/30"}`,children:"Disabled"})]})]})]})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ku,{className:"w-5 h-5 text-slate-400"}),r.jsx("h3",{className:"font-medium text-white",children:"Tags"})]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Add metadata tags to your application for organization and filtering"}),Object.keys(c).length>0&&r.jsx("div",{className:"space-y-2",children:Object.entries(c).map(([W,se])=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded-lg border border-slate-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-medium text-blue-400",children:W}),r.jsx("span",{className:"text-slate-500",children:"="}),r.jsx("span",{className:"text-sm text-slate-300",children:String(se)})]}),r.jsx("button",{type:"button",onClick:()=>{const ne={...c};delete ne[W],d(ne)},className:"text-slate-400 hover:text-red-400",children:r.jsx(Be,{className:"w-4 h-4"})})]},W))}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(X,{label:"Key",placeholder:"e.g., environment",value:m,onChange:W=>f(W.target.value)})}),r.jsx("div",{className:"flex-1",children:r.jsx(X,{label:"Value",placeholder:"e.g., production",value:h,onChange:W=>x(W.target.value)})}),r.jsxs(Y,{variant:"secondary",onClick:()=>{m&&h&&(d({...c,[m]:h}),f(""),x(""))},disabled:!m||!h,children:[r.jsx(ke,{className:"w-4 h-4"}),"Add"]})]})]}),r.jsxs(ve,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fh,{className:"w-5 h-5 text-slate-400"}),r.jsx("h3",{className:"font-medium text-white",children:"Permissions"})]}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:()=>v([...y,{principals:[],entitlements:[]}]),children:[r.jsx(ke,{className:"w-4 h-4 mr-1"}),"Add Permission"]})]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Configure who can access this application and with what permissions"}),y.length===0?r.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 text-slate-400 text-sm",children:"No permissions configured. Add permissions to control access to this application."}):r.jsx("div",{className:"space-y-3",children:y.map((W,se)=>r.jsxs("div",{className:"p-3 bg-slate-800/30 rounded-lg border border-slate-700 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm font-medium text-slate-300",children:["Permission Rule ",se+1]}),r.jsx("button",{type:"button",onClick:()=>v(y.filter((ne,ce)=>ce!==se)),className:"text-slate-400 hover:text-red-400",children:r.jsx(Be,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Principals (users, groups, service principals)"}),r.jsx("div",{className:"flex flex-wrap gap-2 min-h-[32px]",children:W.principals.map((ne,ce)=>r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:[ne,r.jsx("button",{type:"button",onClick:()=>{const ge=[...y];ge[se].principals=W.principals.filter((Ee,Ue)=>Ue!==ce),v(ge)},className:"ml-1.5 hover:text-white",children:r.jsx(ml,{className:"w-3 h-3"})})]},ce))}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(X,{placeholder:"e.g., user@example.com or group_name",value:u,onChange:ne=>g(ne.target.value),className:"flex-1"}),r.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>{if(u){const ne=[...y];ne[se].principals=[...W.principals,u],v(ne),g("")}},disabled:!u,children:"Add"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Entitlements"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(ne=>r.jsx("button",{type:"button",onClick:()=>{const ce=[...y];W.entitlements.includes(ne.value)?ce[se].entitlements=W.entitlements.filter(ge=>ge!==ne.value):ce[se].entitlements=[...W.entitlements,ne.value],v(ce)},className:qe("px-2.5 py-1 rounded-lg text-xs transition-colors",W.entitlements.includes(ne.value)?"bg-green-500/30 text-green-300 border border-green-500/50":"bg-slate-700 text-slate-400 border border-slate-600 hover:border-slate-500"),children:ne.label},ne.value))})]})]},se))})]}),r.jsxs(ve,{variant:"highlight",children:[r.jsx("h3",{className:"font-medium text-white mb-3",children:"Configuration Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Application:"}),r.jsx("span",{className:"text-white ml-2",children:o.name||"Not set"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Agents:"}),r.jsxs(we,{variant:b.length>0?"success":"warning",className:"ml-2",children:[b.length," selected"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Orchestration:"}),r.jsx(we,{variant:$!=="none"?"info":"default",className:"ml-2",children:$==="supervisor"?"Supervisor":$==="swarm"?"Swarm":"None"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Endpoint:"}),r.jsx("span",{className:"text-white ml-2",children:o.endpointName||"Not set"})]})]})]}),r.jsxs("div",{className:"flex justify-end items-center space-x-3",children:[!H&&r.jsx("span",{className:"text-sm text-slate-500",children:"No unsaved changes"}),r.jsxs(Y,{onClick:G,size:"lg",disabled:!H,children:[r.jsx(Q_,{className:"w-4 h-4"}),"Save Configuration"]})]})]})}function iN({activeSection:e,onNavigate:t}){const n=()=>{switch(e){case"overview":return r.jsx(ej,{onNavigate:t});case"variables":return r.jsx(rj,{});case"schemas":return r.jsx(Nj,{});case"resources":return r.jsx(Sj,{});case"retrievers":return r.jsx(Bj,{});case"tools":return r.jsx(Yj,{});case"guardrails":return r.jsx(Jj,{});case"memory":return r.jsx(Zj,{});case"prompts":return r.jsx(eN,{});case"agents":return r.jsx(sN,{});case"app":return r.jsx(oN,{});default:return null}};return r.jsx("div",{className:"h-full overflow-y-auto bg-slate-900/50",children:r.jsx("div",{className:"p-6 animate-fade-in",children:n()})})}/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */function Bg(e){return typeof e>"u"||e===null}function cN(e){return typeof e=="object"&&e!==null}function uN(e){return Array.isArray(e)?e:Bg(e)?[]:[e]}function dN(e,t){var n,s,a,l;if(t)for(l=Object.keys(t),n=0,s=l.length;n<s;n+=1)a=l[n],e[a]=t[a];return e}function mN(e,t){var n="",s;for(s=0;s<t;s+=1)n+=e;return n}function fN(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var hN=Bg,pN=cN,gN=uN,xN=mN,vN=fN,yN=dN,Xe={isNothing:hN,isObject:pN,toArray:gN,repeat:xN,isNegativeZero:vN,extend:yN};function Gg(e,t){var n="",s=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),s+" "+n):s}function hl(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Gg(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}hl.prototype=Object.create(Error.prototype);hl.prototype.constructor=hl;hl.prototype.toString=function(t){return this.name+": "+Gg(this,t)};var Ct=hl;function pc(e,t,n,s,a){var l="",o="",i=Math.floor(a/2)-1;return s-t>i&&(l=" ... ",t=s-i+l.length),n-s>i&&(o=" ...",n=s+i-o.length),{str:l+e.slice(t,n).replace(/\t/g,"")+o,pos:s-t+l.length}}function gc(e,t){return Xe.repeat(" ",t-e.length)+e}function bN(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,s=[0],a=[],l,o=-1;l=n.exec(e.buffer);)a.push(l.index),s.push(l.index+l[0].length),e.position<=l.index&&o<0&&(o=s.length-2);o<0&&(o=s.length-1);var i="",c,d,m=Math.min(e.line+t.linesAfter,a.length).toString().length,f=t.maxLength-(t.indent+m+3);for(c=1;c<=t.linesBefore&&!(o-c<0);c++)d=pc(e.buffer,s[o-c],a[o-c],e.position-(s[o]-s[o-c]),f),i=Xe.repeat(" ",t.indent)+gc((e.line-c+1).toString(),m)+" | "+d.str+`
`+i;for(d=pc(e.buffer,s[o],a[o],e.position,f),i+=Xe.repeat(" ",t.indent)+gc((e.line+1).toString(),m)+" | "+d.str+`
`,i+=Xe.repeat("-",t.indent+m+3+d.pos)+`^
`,c=1;c<=t.linesAfter&&!(o+c>=a.length);c++)d=pc(e.buffer,s[o+c],a[o+c],e.position-(s[o]-s[o+c]),f),i+=Xe.repeat(" ",t.indent)+gc((e.line+c+1).toString(),m)+" | "+d.str+`
`;return i.replace(/\n$/,"")}var _N=bN,jN=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],NN=["scalar","sequence","mapping"];function wN(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(s){t[String(s)]=n})}),t}function SN(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(jN.indexOf(n)===-1)throw new Ct('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=wN(t.styleAliases||null),NN.indexOf(this.kind)===-1)throw new Ct('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var ct=SN;function wh(e,t){var n=[];return e[t].forEach(function(s){var a=n.length;n.forEach(function(l,o){l.tag===s.tag&&l.kind===s.kind&&l.multi===s.multi&&(a=o)}),n[a]=s}),n}function kN(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function s(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(s);return e}function Ru(e){return this.extend(e)}Ru.prototype.extend=function(t){var n=[],s=[];if(t instanceof ct)s.push(t);else if(Array.isArray(t))s=s.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(s=s.concat(t.explicit));else throw new Ct("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(l){if(!(l instanceof ct))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(l.loadKind&&l.loadKind!=="scalar")throw new Ct("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(l.multi)throw new Ct("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),s.forEach(function(l){if(!(l instanceof ct))throw new Ct("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(Ru.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(s),a.compiledImplicit=wh(a,"implicit"),a.compiledExplicit=wh(a,"explicit"),a.compiledTypeMap=kN(a.compiledImplicit,a.compiledExplicit),a};var Wg=Ru,Kg=new ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Yg=new ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Qg=new ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Jg=new Wg({explicit:[Kg,Yg,Qg]});function CN(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function EN(){return null}function $N(e){return e===null}var Zg=new ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:CN,construct:EN,predicate:$N,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function PN(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function ON(e){return e==="true"||e==="True"||e==="TRUE"}function RN(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Xg=new ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:PN,construct:ON,predicate:RN,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function AN(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function TN(e){return 48<=e&&e<=55}function IN(e){return 48<=e&&e<=57}function LN(e){if(e===null)return!1;var t=e.length,n=0,s=!1,a;if(!t)return!1;if(a=e[n],(a==="-"||a==="+")&&(a=e[++n]),a==="0"){if(n+1===t)return!0;if(a=e[++n],a==="b"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;s=!0}return s&&a!=="_"}if(a==="x"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!AN(e.charCodeAt(n)))return!1;s=!0}return s&&a!=="_"}if(a==="o"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!TN(e.charCodeAt(n)))return!1;s=!0}return s&&a!=="_"}}if(a==="_")return!1;for(;n<t;n++)if(a=e[n],a!=="_"){if(!IN(e.charCodeAt(n)))return!1;s=!0}return!(!s||a==="_")}function MN(e){var t=e,n=1,s;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),s=t[0],(s==="-"||s==="+")&&(s==="-"&&(n=-1),t=t.slice(1),s=t[0]),t==="0")return 0;if(s==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function DN(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Xe.isNegativeZero(e)}var ex=new ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:LN,construct:MN,predicate:DN,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),FN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function zN(e){return!(e===null||!FN.test(e)||e[e.length-1]==="_")}function VN(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var UN=/^[-+]?[0-9]+e/;function HN(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xe.isNegativeZero(e))return"-0.0";return n=e.toString(10),UN.test(n)?n.replace("e",".e"):n}function qN(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Xe.isNegativeZero(e))}var tx=new ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:zN,construct:VN,predicate:qN,represent:HN,defaultStyle:"lowercase"}),nx=Jg.extend({implicit:[Zg,Xg,ex,tx]}),sx=nx,rx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ax=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function BN(e){return e===null?!1:rx.exec(e)!==null||ax.exec(e)!==null}function GN(e){var t,n,s,a,l,o,i,c=0,d=null,m,f,h;if(t=rx.exec(e),t===null&&(t=ax.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],s=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,s,a));if(l=+t[4],o=+t[5],i=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(m=+t[10],f=+(t[11]||0),d=(m*60+f)*6e4,t[9]==="-"&&(d=-d)),h=new Date(Date.UTC(n,s,a,l,o,i,c)),d&&h.setTime(h.getTime()-d),h}function WN(e){return e.toISOString()}var lx=new ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:BN,construct:GN,instanceOf:Date,represent:WN});function KN(e){return e==="<<"||e===null}var ox=new ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:KN}),qd=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function YN(e){if(e===null)return!1;var t,n,s=0,a=e.length,l=qd;for(n=0;n<a;n++)if(t=l.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;s+=6}return s%8===0}function QN(e){var t,n,s=e.replace(/[\r\n=]/g,""),a=s.length,l=qd,o=0,i=[];for(t=0;t<a;t++)t%4===0&&t&&(i.push(o>>16&255),i.push(o>>8&255),i.push(o&255)),o=o<<6|l.indexOf(s.charAt(t));return n=a%4*6,n===0?(i.push(o>>16&255),i.push(o>>8&255),i.push(o&255)):n===18?(i.push(o>>10&255),i.push(o>>2&255)):n===12&&i.push(o>>4&255),new Uint8Array(i)}function JN(e){var t="",n=0,s,a,l=e.length,o=qd;for(s=0;s<l;s++)s%3===0&&s&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[s];return a=l%3,a===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):a===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):a===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function ZN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var ix=new ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:YN,construct:QN,predicate:ZN,represent:JN}),XN=Object.prototype.hasOwnProperty,e1=Object.prototype.toString;function t1(e){if(e===null)return!0;var t=[],n,s,a,l,o,i=e;for(n=0,s=i.length;n<s;n+=1){if(a=i[n],o=!1,e1.call(a)!=="[object Object]")return!1;for(l in a)if(XN.call(a,l))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(l)===-1)t.push(l);else return!1}return!0}function n1(e){return e!==null?e:[]}var cx=new ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:t1,construct:n1}),s1=Object.prototype.toString;function r1(e){if(e===null)return!0;var t,n,s,a,l,o=e;for(l=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(s=o[t],s1.call(s)!=="[object Object]"||(a=Object.keys(s),a.length!==1))return!1;l[t]=[a[0],s[a[0]]]}return!0}function a1(e){if(e===null)return[];var t,n,s,a,l,o=e;for(l=new Array(o.length),t=0,n=o.length;t<n;t+=1)s=o[t],a=Object.keys(s),l[t]=[a[0],s[a[0]]];return l}var ux=new ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:r1,construct:a1}),l1=Object.prototype.hasOwnProperty;function o1(e){if(e===null)return!0;var t,n=e;for(t in n)if(l1.call(n,t)&&n[t]!==null)return!1;return!0}function i1(e){return e!==null?e:{}}var dx=new ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:o1,construct:i1}),Bd=sx.extend({implicit:[lx,ox],explicit:[ix,cx,ux,dx]}),Ms=Object.prototype.hasOwnProperty,Wo=1,mx=2,fx=3,Ko=4,xc=1,c1=2,Sh=3,u1=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d1=/[\x85\u2028\u2029]/,m1=/[,\[\]\{\}]/,hx=/^(?:!|!!|![a-z\-]+!)$/i,px=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function kh(e){return Object.prototype.toString.call(e)}function In(e){return e===10||e===13}function lr(e){return e===9||e===32}function Dt(e){return e===9||e===32||e===10||e===13}function Fr(e){return e===44||e===91||e===93||e===123||e===125}function f1(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function h1(e){return e===120?2:e===117?4:e===85?8:0}function p1(e){return 48<=e&&e<=57?e-48:-1}function Ch(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function g1(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}function gx(e,t,n){t==="__proto__"?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n}var xx=new Array(256),vx=new Array(256);for(var br=0;br<256;br++)xx[br]=Ch(br)?1:0,vx[br]=Ch(br);function x1(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Bd,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function yx(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=_N(n),new Ct(t,n)}function fe(e,t){throw yx(e,t)}function Yo(e,t){e.onWarning&&e.onWarning.call(null,yx(e,t))}var Eh={YAML:function(t,n,s){var a,l,o;t.version!==null&&fe(t,"duplication of %YAML directive"),s.length!==1&&fe(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(s[0]),a===null&&fe(t,"ill-formed argument of the YAML directive"),l=parseInt(a[1],10),o=parseInt(a[2],10),l!==1&&fe(t,"unacceptable YAML version of the document"),t.version=s[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Yo(t,"unsupported YAML version of the document")},TAG:function(t,n,s){var a,l;s.length!==2&&fe(t,"TAG directive accepts exactly two arguments"),a=s[0],l=s[1],hx.test(a)||fe(t,"ill-formed tag handle (first argument) of the TAG directive"),Ms.call(t.tagMap,a)&&fe(t,'there is a previously declared suffix for "'+a+'" tag handle'),px.test(l)||fe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{l=decodeURIComponent(l)}catch{fe(t,"tag prefix is malformed: "+l)}t.tagMap[a]=l}};function Rs(e,t,n,s){var a,l,o,i;if(t<n){if(i=e.input.slice(t,n),s)for(a=0,l=i.length;a<l;a+=1)o=i.charCodeAt(a),o===9||32<=o&&o<=1114111||fe(e,"expected valid JSON character");else u1.test(i)&&fe(e,"the stream contains non-printable characters");e.result+=i}}function $h(e,t,n,s){var a,l,o,i;for(Xe.isObject(n)||fe(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(n),o=0,i=a.length;o<i;o+=1)l=a[o],Ms.call(t,l)||(gx(t,l,n[l]),s[l]=!0)}function zr(e,t,n,s,a,l,o,i,c){var d,m;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),d=0,m=a.length;d<m;d+=1)Array.isArray(a[d])&&fe(e,"nested arrays are not supported inside keys"),typeof a=="object"&&kh(a[d])==="[object Object]"&&(a[d]="[object Object]");if(typeof a=="object"&&kh(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),s==="tag:yaml.org,2002:merge")if(Array.isArray(l))for(d=0,m=l.length;d<m;d+=1)$h(e,t,l[d],n);else $h(e,t,l,n);else!e.json&&!Ms.call(n,a)&&Ms.call(t,a)&&(e.line=o||e.line,e.lineStart=i||e.lineStart,e.position=c||e.position,fe(e,"duplicated mapping key")),gx(t,a,l),delete n[a];return t}function Gd(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):fe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ye(e,t,n){for(var s=0,a=e.input.charCodeAt(e.position);a!==0;){for(;lr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(In(a))for(Gd(e),a=e.input.charCodeAt(e.position),s++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return n!==-1&&s!==0&&e.lineIndent<n&&Yo(e,"deficient indentation"),s}function wi(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||Dt(n)))}function Wd(e,t){t===1?e.result+=" ":t>1&&(e.result+=Xe.repeat(`
`,t-1))}function v1(e,t,n){var s,a,l,o,i,c,d,m,f=e.kind,h=e.result,x;if(x=e.input.charCodeAt(e.position),Dt(x)||Fr(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(a=e.input.charCodeAt(e.position+1),Dt(a)||n&&Fr(a)))return!1;for(e.kind="scalar",e.result="",l=o=e.position,i=!1;x!==0;){if(x===58){if(a=e.input.charCodeAt(e.position+1),Dt(a)||n&&Fr(a))break}else if(x===35){if(s=e.input.charCodeAt(e.position-1),Dt(s))break}else{if(e.position===e.lineStart&&wi(e)||n&&Fr(x))break;if(In(x))if(c=e.line,d=e.lineStart,m=e.lineIndent,Ye(e,!1,-1),e.lineIndent>=t){i=!0,x=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=d,e.lineIndent=m;break}}i&&(Rs(e,l,o,!1),Wd(e,e.line-c),l=o=e.position,i=!1),lr(x)||(o=e.position+1),x=e.input.charCodeAt(++e.position)}return Rs(e,l,o,!1),e.result?!0:(e.kind=f,e.result=h,!1)}function y1(e,t){var n,s,a;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,s=a=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(Rs(e,s,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)s=e.position,e.position++,a=e.position;else return!0;else In(n)?(Rs(e,s,a,!0),Wd(e,Ye(e,!1,t)),s=a=e.position):e.position===e.lineStart&&wi(e)?fe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);fe(e,"unexpected end of the stream within a single quoted scalar")}function b1(e,t){var n,s,a,l,o,i;if(i=e.input.charCodeAt(e.position),i!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(i=e.input.charCodeAt(e.position))!==0;){if(i===34)return Rs(e,n,e.position,!0),e.position++,!0;if(i===92){if(Rs(e,n,e.position,!0),i=e.input.charCodeAt(++e.position),In(i))Ye(e,!1,t);else if(i<256&&xx[i])e.result+=vx[i],e.position++;else if((o=h1(i))>0){for(a=o,l=0;a>0;a--)i=e.input.charCodeAt(++e.position),(o=f1(i))>=0?l=(l<<4)+o:fe(e,"expected hexadecimal character");e.result+=g1(l),e.position++}else fe(e,"unknown escape sequence");n=s=e.position}else In(i)?(Rs(e,n,s,!0),Wd(e,Ye(e,!1,t)),n=s=e.position):e.position===e.lineStart&&wi(e)?fe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,s=e.position)}fe(e,"unexpected end of the stream within a double quoted scalar")}function _1(e,t){var n=!0,s,a,l,o=e.tag,i,c=e.anchor,d,m,f,h,x,p=Object.create(null),y,v,u,g;if(g=e.input.charCodeAt(e.position),g===91)m=93,x=!1,i=[];else if(g===123)m=125,x=!0,i={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),g=e.input.charCodeAt(++e.position);g!==0;){if(Ye(e,!0,t),g=e.input.charCodeAt(e.position),g===m)return e.position++,e.tag=o,e.anchor=c,e.kind=x?"mapping":"sequence",e.result=i,!0;n?g===44&&fe(e,"expected the node content, but found ','"):fe(e,"missed comma between flow collection entries"),v=y=u=null,f=h=!1,g===63&&(d=e.input.charCodeAt(e.position+1),Dt(d)&&(f=h=!0,e.position++,Ye(e,!0,t))),s=e.line,a=e.lineStart,l=e.position,la(e,t,Wo,!1,!0),v=e.tag,y=e.result,Ye(e,!0,t),g=e.input.charCodeAt(e.position),(h||e.line===s)&&g===58&&(f=!0,g=e.input.charCodeAt(++e.position),Ye(e,!0,t),la(e,t,Wo,!1,!0),u=e.result),x?zr(e,i,p,v,y,u,s,a,l):f?i.push(zr(e,null,p,v,y,u,s,a,l)):i.push(y),Ye(e,!0,t),g=e.input.charCodeAt(e.position),g===44?(n=!0,g=e.input.charCodeAt(++e.position)):n=!1}fe(e,"unexpected end of the stream within a flow collection")}function j1(e,t){var n,s,a=xc,l=!1,o=!1,i=t,c=0,d=!1,m,f;if(f=e.input.charCodeAt(e.position),f===124)s=!1;else if(f===62)s=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)xc===a?a=f===43?Sh:c1:fe(e,"repeat of a chomping mode identifier");else if((m=p1(f))>=0)m===0?fe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?fe(e,"repeat of an indentation width identifier"):(i=t+m-1,o=!0);else break;if(lr(f)){do f=e.input.charCodeAt(++e.position);while(lr(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!In(f)&&f!==0)}for(;f!==0;){for(Gd(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<i)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>i&&(i=e.lineIndent),In(f)){c++;continue}if(e.lineIndent<i){a===Sh?e.result+=Xe.repeat(`
`,l?1+c:c):a===xc&&l&&(e.result+=`
`);break}for(s?lr(f)?(d=!0,e.result+=Xe.repeat(`
`,l?1+c:c)):d?(d=!1,e.result+=Xe.repeat(`
`,c+1)):c===0?l&&(e.result+=" "):e.result+=Xe.repeat(`
`,c):e.result+=Xe.repeat(`
`,l?1+c:c),l=!0,o=!0,c=0,n=e.position;!In(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Rs(e,n,e.position,!1)}return!0}function Ph(e,t){var n,s=e.tag,a=e.anchor,l=[],o,i=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,fe(e,"tab characters must not be used in indentation")),!(c!==45||(o=e.input.charCodeAt(e.position+1),!Dt(o))));){if(i=!0,e.position++,Ye(e,!0,-1)&&e.lineIndent<=t){l.push(null),c=e.input.charCodeAt(e.position);continue}if(n=e.line,la(e,t,fx,!1,!0),l.push(e.result),Ye(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&c!==0)fe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return i?(e.tag=s,e.anchor=a,e.kind="sequence",e.result=l,!0):!1}function N1(e,t,n){var s,a,l,o,i,c,d=e.tag,m=e.anchor,f={},h=Object.create(null),x=null,p=null,y=null,v=!1,u=!1,g;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),g=e.input.charCodeAt(e.position);g!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,fe(e,"tab characters must not be used in indentation")),s=e.input.charCodeAt(e.position+1),l=e.line,(g===63||g===58)&&Dt(s))g===63?(v&&(zr(e,f,h,x,p,null,o,i,c),x=p=y=null),u=!0,v=!0,a=!0):v?(v=!1,a=!0):fe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,g=s;else{if(o=e.line,i=e.lineStart,c=e.position,!la(e,n,mx,!1,!0))break;if(e.line===l){for(g=e.input.charCodeAt(e.position);lr(g);)g=e.input.charCodeAt(++e.position);if(g===58)g=e.input.charCodeAt(++e.position),Dt(g)||fe(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(zr(e,f,h,x,p,null,o,i,c),x=p=y=null),u=!0,v=!1,a=!1,x=e.tag,p=e.result;else if(u)fe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=m,!0}else if(u)fe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=m,!0}if((e.line===l||e.lineIndent>t)&&(v&&(o=e.line,i=e.lineStart,c=e.position),la(e,t,Ko,!0,a)&&(v?p=e.result:y=e.result),v||(zr(e,f,h,x,p,y,o,i,c),x=p=y=null),Ye(e,!0,-1),g=e.input.charCodeAt(e.position)),(e.line===l||e.lineIndent>t)&&g!==0)fe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&zr(e,f,h,x,p,null,o,i,c),u&&(e.tag=d,e.anchor=m,e.kind="mapping",e.result=f),u}function w1(e){var t,n=!1,s=!1,a,l,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&fe(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(s=!0,a="!!",o=e.input.charCodeAt(++e.position)):a="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(l=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):fe(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Dt(o);)o===33&&(s?fe(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),hx.test(a)||fe(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);l=e.input.slice(t,e.position),m1.test(l)&&fe(e,"tag suffix cannot contain flow indicator characters")}l&&!px.test(l)&&fe(e,"tag name cannot contain such characters: "+l);try{l=decodeURIComponent(l)}catch{fe(e,"tag name is malformed: "+l)}return n?e.tag=l:Ms.call(e.tagMap,a)?e.tag=e.tagMap[a]+l:a==="!"?e.tag="!"+l:a==="!!"?e.tag="tag:yaml.org,2002:"+l:fe(e,'undeclared tag handle "'+a+'"'),!0}function S1(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&fe(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!Dt(n)&&!Fr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&fe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function k1(e){var t,n,s;if(s=e.input.charCodeAt(e.position),s!==42)return!1;for(s=e.input.charCodeAt(++e.position),t=e.position;s!==0&&!Dt(s)&&!Fr(s);)s=e.input.charCodeAt(++e.position);return e.position===t&&fe(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),Ms.call(e.anchorMap,n)||fe(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],Ye(e,!0,-1),!0}function la(e,t,n,s,a){var l,o,i,c=1,d=!1,m=!1,f,h,x,p,y,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,l=o=i=Ko===n||fx===n,s&&Ye(e,!0,-1)&&(d=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;w1(e)||S1(e);)Ye(e,!0,-1)?(d=!0,i=l,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):i=!1;if(i&&(i=d||a),(c===1||Ko===n)&&(Wo===n||mx===n?y=t:y=t+1,v=e.position-e.lineStart,c===1?i&&(Ph(e,v)||N1(e,v,y))||_1(e,y)?m=!0:(o&&j1(e,y)||y1(e,y)||b1(e,y)?m=!0:k1(e)?(m=!0,(e.tag!==null||e.anchor!==null)&&fe(e,"alias node should not have any properties")):v1(e,y,Wo===n)&&(m=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(m=i&&Ph(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&fe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,h=e.implicitTypes.length;f<h;f+=1)if(p=e.implicitTypes[f],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Ms.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,x=e.typeMap.multi[e.kind||"fallback"],f=0,h=x.length;f<h;f+=1)if(e.tag.slice(0,x[f].tag.length)===x[f].tag){p=x[f];break}p||fe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&p.kind!==e.kind&&fe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):fe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||m}function C1(e){var t=e.position,n,s,a,l=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Ye(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(l=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!Dt(o);)o=e.input.charCodeAt(++e.position);for(s=e.input.slice(n,e.position),a=[],s.length<1&&fe(e,"directive name must not be less than one character in length");o!==0;){for(;lr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!In(o));break}if(In(o))break;for(n=e.position;o!==0&&!Dt(o);)o=e.input.charCodeAt(++e.position);a.push(e.input.slice(n,e.position))}o!==0&&Gd(e),Ms.call(Eh,s)?Eh[s](e,s,a):Yo(e,'unknown document directive "'+s+'"')}if(Ye(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Ye(e,!0,-1)):l&&fe(e,"directives end mark is expected"),la(e,e.lineIndent-1,Ko,!1,!0),Ye(e,!0,-1),e.checkLineBreaks&&d1.test(e.input.slice(t,e.position))&&Yo(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&wi(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Ye(e,!0,-1));return}if(e.position<e.length-1)fe(e,"end of the stream or a document separator is expected");else return}function bx(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new x1(e,t),s=e.indexOf("\0");for(s!==-1&&(n.position=s,fe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)C1(n);return n.documents}function E1(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var s=bx(e,n);if(typeof t!="function")return s;for(var a=0,l=s.length;a<l;a+=1)t(s[a])}function $1(e,t){var n=bx(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new Ct("expected a single document in the stream, but found more")}}var P1=E1,O1=$1,_x={loadAll:P1,load:O1},jx=Object.prototype.toString,Nx=Object.prototype.hasOwnProperty,Kd=65279,R1=9,pl=10,A1=13,T1=32,I1=33,L1=34,Au=35,M1=37,D1=38,F1=39,z1=42,wx=44,V1=45,Qo=58,U1=61,H1=62,q1=63,B1=64,Sx=91,kx=93,G1=96,Cx=123,W1=124,Ex=125,yt={};yt[0]="\\0";yt[7]="\\a";yt[8]="\\b";yt[9]="\\t";yt[10]="\\n";yt[11]="\\v";yt[12]="\\f";yt[13]="\\r";yt[27]="\\e";yt[34]='\\"';yt[92]="\\\\";yt[133]="\\N";yt[160]="\\_";yt[8232]="\\L";yt[8233]="\\P";var K1=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Y1=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Q1(e,t){var n,s,a,l,o,i,c;if(t===null)return{};for(n={},s=Object.keys(t),a=0,l=s.length;a<l;a+=1)o=s[a],i=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&Nx.call(c.styleAliases,i)&&(i=c.styleAliases[i]),n[o]=i;return n}function J1(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else if(e<=4294967295)n="U",s=8;else throw new Ct("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Xe.repeat("0",s-t.length)+t}var Z1=1,gl=2;function X1(e){this.schema=e.schema||Bd,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Xe.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Q1(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?gl:Z1,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Oh(e,t){for(var n=Xe.repeat(" ",t),s=0,a=-1,l="",o,i=e.length;s<i;)a=e.indexOf(`
`,s),a===-1?(o=e.slice(s),s=i):(o=e.slice(s,a+1),s=a+1),o.length&&o!==`
`&&(l+=n),l+=o;return l}function Tu(e,t){return`
`+Xe.repeat(" ",e.indent*t)}function ew(e,t){var n,s,a;for(n=0,s=e.implicitTypes.length;n<s;n+=1)if(a=e.implicitTypes[n],a.resolve(t))return!0;return!1}function Jo(e){return e===T1||e===R1}function xl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Kd||65536<=e&&e<=1114111}function Rh(e){return xl(e)&&e!==Kd&&e!==A1&&e!==pl}function Ah(e,t,n){var s=Rh(e),a=s&&!Jo(e);return(n?s:s&&e!==wx&&e!==Sx&&e!==kx&&e!==Cx&&e!==Ex)&&e!==Au&&!(t===Qo&&!a)||Rh(t)&&!Jo(t)&&e===Au||t===Qo&&a}function tw(e){return xl(e)&&e!==Kd&&!Jo(e)&&e!==V1&&e!==q1&&e!==Qo&&e!==wx&&e!==Sx&&e!==kx&&e!==Cx&&e!==Ex&&e!==Au&&e!==D1&&e!==z1&&e!==I1&&e!==W1&&e!==U1&&e!==H1&&e!==F1&&e!==L1&&e!==M1&&e!==B1&&e!==G1}function nw(e){return!Jo(e)&&e!==Qo}function Oa(e,t){var n=e.charCodeAt(t),s;return n>=55296&&n<=56319&&t+1<e.length&&(s=e.charCodeAt(t+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function $x(e){var t=/^\n* /;return t.test(e)}var Px=1,Iu=2,Ox=3,Rx=4,wr=5;function sw(e,t,n,s,a,l,o,i){var c,d=0,m=null,f=!1,h=!1,x=s!==-1,p=-1,y=tw(Oa(e,0))&&nw(Oa(e,e.length-1));if(t||o)for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=Oa(e,c),!xl(d))return wr;y=y&&Ah(d,m,i),m=d}else{for(c=0;c<e.length;d>=65536?c+=2:c++){if(d=Oa(e,c),d===pl)f=!0,x&&(h=h||c-p-1>s&&e[p+1]!==" ",p=c);else if(!xl(d))return wr;y=y&&Ah(d,m,i),m=d}h=h||x&&c-p-1>s&&e[p+1]!==" "}return!f&&!h?y&&!o&&!a(e)?Px:l===gl?wr:Iu:n>9&&$x(e)?wr:o?l===gl?wr:Iu:h?Rx:Ox}function rw(e,t,n,s,a){e.dump=function(){if(t.length===0)return e.quotingType===gl?'""':"''";if(!e.noCompatMode&&(K1.indexOf(t)!==-1||Y1.test(t)))return e.quotingType===gl?'"'+t+'"':"'"+t+"'";var l=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-l),i=s||e.flowLevel>-1&&n>=e.flowLevel;function c(d){return ew(e,d)}switch(sw(t,i,e.indent,o,c,e.quotingType,e.forceQuotes&&!s,a)){case Px:return t;case Iu:return"'"+t.replace(/'/g,"''")+"'";case Ox:return"|"+Th(t,e.indent)+Ih(Oh(t,l));case Rx:return">"+Th(t,e.indent)+Ih(Oh(aw(t,o),l));case wr:return'"'+lw(t)+'"';default:throw new Ct("impossible error: invalid scalar style")}}()}function Th(e,t){var n=$x(e)?String(t):"",s=e[e.length-1]===`
`,a=s&&(e[e.length-2]===`
`||e===`
`),l=a?"+":s?"":"-";return n+l+`
`}function Ih(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function aw(e,t){for(var n=/(\n+)([^\n]*)/g,s=function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,n.lastIndex=d,Lh(e.slice(0,d),t)}(),a=e[0]===`
`||e[0]===" ",l,o;o=n.exec(e);){var i=o[1],c=o[2];l=c[0]===" ",s+=i+(!a&&!l&&c!==""?`
`:"")+Lh(c,t),a=l}return s}function Lh(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,s,a=0,l,o=0,i=0,c="";s=n.exec(e);)i=s.index,i-a>t&&(l=o>a?o:i,c+=`
`+e.slice(a,l),a=l+1),o=i;return c+=`
`,e.length-a>t&&o>a?c+=e.slice(a,o)+`
`+e.slice(o+1):c+=e.slice(a),c.slice(1)}function lw(e){for(var t="",n=0,s,a=0;a<e.length;n>=65536?a+=2:a++)n=Oa(e,a),s=yt[n],!s&&xl(n)?(t+=e[a],n>=65536&&(t+=e[a+1])):t+=s||J1(n);return t}function ow(e,t,n){var s="",a=e.tag,l,o,i;for(l=0,o=n.length;l<o;l+=1)i=n[l],e.replacer&&(i=e.replacer.call(n,String(l),i)),(ts(e,t,i,!1,!1)||typeof i>"u"&&ts(e,t,null,!1,!1))&&(s!==""&&(s+=","+(e.condenseFlow?"":" ")),s+=e.dump);e.tag=a,e.dump="["+s+"]"}function Mh(e,t,n,s){var a="",l=e.tag,o,i,c;for(o=0,i=n.length;o<i;o+=1)c=n[o],e.replacer&&(c=e.replacer.call(n,String(o),c)),(ts(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&ts(e,t+1,null,!0,!0,!1,!0))&&((!s||a!=="")&&(a+=Tu(e,t)),e.dump&&pl===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function iw(e,t,n){var s="",a=e.tag,l=Object.keys(n),o,i,c,d,m;for(o=0,i=l.length;o<i;o+=1)m="",s!==""&&(m+=", "),e.condenseFlow&&(m+='"'),c=l[o],d=n[c],e.replacer&&(d=e.replacer.call(n,c,d)),ts(e,t,c,!1,!1)&&(e.dump.length>1024&&(m+="? "),m+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ts(e,t,d,!1,!1)&&(m+=e.dump,s+=m));e.tag=a,e.dump="{"+s+"}"}function cw(e,t,n,s){var a="",l=e.tag,o=Object.keys(n),i,c,d,m,f,h;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Ct("sortKeys must be a boolean or a function");for(i=0,c=o.length;i<c;i+=1)h="",(!s||a!=="")&&(h+=Tu(e,t)),d=o[i],m=n[d],e.replacer&&(m=e.replacer.call(n,d,m)),ts(e,t+1,d,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&pl===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,f&&(h+=Tu(e,t)),ts(e,t+1,m,!0,f)&&(e.dump&&pl===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,a+=h));e.tag=l,e.dump=a||"{}"}function Dh(e,t,n){var s,a,l,o,i,c;for(a=n?e.explicitTypes:e.implicitTypes,l=0,o=a.length;l<o;l+=1)if(i=a[l],(i.instanceOf||i.predicate)&&(!i.instanceOf||typeof t=="object"&&t instanceof i.instanceOf)&&(!i.predicate||i.predicate(t))){if(n?i.multi&&i.representName?e.tag=i.representName(t):e.tag=i.tag:e.tag="?",i.represent){if(c=e.styleMap[i.tag]||i.defaultStyle,jx.call(i.represent)==="[object Function]")s=i.represent(t,c);else if(Nx.call(i.represent,c))s=i.represent[c](t,c);else throw new Ct("!<"+i.tag+'> tag resolver accepts not "'+c+'" style');e.dump=s}return!0}return!1}function ts(e,t,n,s,a,l,o){e.tag=null,e.dump=n,Dh(e,n,!1)||Dh(e,n,!0);var i=jx.call(e.dump),c=s,d;s&&(s=e.flowLevel<0||e.flowLevel>t);var m=i==="[object Object]"||i==="[object Array]",f,h;if(m&&(f=e.duplicates.indexOf(n),h=f!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&t>0)&&(a=!1),h&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(m&&h&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),i==="[object Object]")s&&Object.keys(e.dump).length!==0?(cw(e,t,e.dump,a),h&&(e.dump="&ref_"+f+e.dump)):(iw(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(i==="[object Array]")s&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Mh(e,t-1,e.dump,a):Mh(e,t,e.dump,a),h&&(e.dump="&ref_"+f+e.dump)):(ow(e,t,e.dump),h&&(e.dump="&ref_"+f+" "+e.dump));else if(i==="[object String]")e.tag!=="?"&&rw(e,e.dump,t,l,c);else{if(i==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Ct("unacceptable kind of an object to dump "+i)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function uw(e,t){var n=[],s=[],a,l;for(Lu(e,n,s),a=0,l=s.length;a<l;a+=1)t.duplicates.push(n[s[a]]);t.usedDuplicates=new Array(l)}function Lu(e,t,n){var s,a,l;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)n.indexOf(a)===-1&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,l=e.length;a<l;a+=1)Lu(e[a],t,n);else for(s=Object.keys(e),a=0,l=s.length;a<l;a+=1)Lu(e[s[a]],t,n)}function dw(e,t){t=t||{};var n=new X1(t);n.noRefs||uw(e,n);var s=e;return n.replacer&&(s=n.replacer.call({"":s},"",s)),ts(n,0,s,!0,!0)?n.dump+`
`:""}var mw=dw,fw={dump:mw};function Yd(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var hw=ct,pw=Wg,gw=Jg,xw=nx,vw=sx,yw=Bd,bw=_x.load,_w=_x.loadAll,jw=fw.dump,Nw=Ct,ww={binary:ix,float:tx,map:Qg,null:Zg,pairs:ux,set:dx,timestamp:lx,bool:Xg,int:ex,merge:ox,omap:cx,seq:Yg,str:Kg},Sw=Yd("safeLoad","load"),kw=Yd("safeLoadAll","loadAll"),Cw=Yd("safeDump","dump"),Qd={Type:hw,Schema:pw,FAILSAFE_SCHEMA:gw,JSON_SCHEMA:xw,CORE_SCHEMA:vw,DEFAULT_SCHEMA:yw,load:bw,loadAll:_w,dump:jw,YAMLException:Nw,types:ww,safeLoad:Sw,safeLoadAll:kw,safeDump:Cw};function Ew(e){const t=[],n=[],s={},a={},l={},o=e.split(`
`),i=[];for(let c=0;c<o.length;c++){const d=o[c],m=c+1;if(!d.trim()||d.trim().startsWith("#"))continue;const f=d.search(/\S/);if(f===-1)continue;for(;i.length>0&&i[i.length-1].indent>=f;)i.pop();const h=d.match(/^\s*-?\s*([^:\s]+)\s*:/);if(h){const v=h[1];i.push({indent:f,key:v})}const x=i.map(v=>v.key).join("."),p=d.match(/&(\w+)/);if(p){const v=p[1];t.push({name:v,path:x,lineNumber:m}),a[v]=x}const y=d.matchAll(new RegExp(`(?<!["\\w])\\*(\\w+)(?!["'])`,"g"));for(const v of y){const u=v[1];if(d.includes(`&${u}`))continue;n.push({name:u,path:x,lineNumber:m}),s[u]||(s[u]=[]),s[u].push(x);const g=x.split(".");if(g.length>=2){const b=g.slice(-2).join(".");l[b]=u}if(g.length>=1){const b=g[g.length-1];b&&!/^\d+$/.test(b)&&(l[b]=u)}}}return{anchors:t,aliases:n,aliasUsage:s,anchorPaths:a,pathSuffixToAnchor:l}}let Jd=null;function $w(e){Jd=e}function Pw(){return Jd}function Ow(){Jd=null}function Fh(e,t){return typeof e=="string"&&e.startsWith(t)}function zh(e){return typeof e=="string"?e:""}function Rw(e){const t=["variables","schemas","retrievers","tools","guardrails","prompts","agents"],n=["llms","vector_stores","genie_rooms","tables","volumes","functions","warehouses","connections","databases"],s=["memory","app"],a=e.split(`
`),l=[];for(let o=0;o<a.length;o++){const c=a[o].match(/^(\s*)(\w[\w_-]*):\s*$/);if(c){const d=c[2],m=c[1].length;if(m===0&&t.includes(d))l.push({name:d,startLine:o,indent:m,childIndent:m+2,endLine:-1});else if(m===0&&d==="resources")for(let f=o+1;f<a.length;f++){const x=a[f].match(/^(\s*)(\w[\w_-]*):\s*$/);if(x){const p=x[2],y=x[1].length;if(y===0)break;y===2&&n.includes(p)&&l.push({name:p,startLine:f,indent:y,childIndent:y+2,endLine:-1})}}}}for(let o=0;o<l.length;o++){const i=l[o];for(let c=i.startLine+1;c<a.length;c++){const d=a[c];if(!d.trim())continue;const m=d.search(/\S/);if(m!==-1&&m<=i.indent){i.endLine=c;break}}i.endLine===-1&&(i.endLine=a.length)}for(const o of l)if(!s.includes(o.name))for(let i=o.startLine+1;i<o.endLine;i++){const c=a[i];if(!c.trim()||c.search(/\S/)!==o.childIndent)continue;const m=c.match(new RegExp(`^( {${o.childIndent}})(\\w[\\w_-]*):\\s*$`));if(m){const f=m[1],h=m[2];c.includes("&")||(a[i]=`${f}${h}: &${h}`)}}return a.join(`
`)}function Aw(e){let t=e.replace(/__MERGE__: "(\w+)"/g,"<<: *$1");return t=t.replace(/__MERGE__: (\w+)/g,"<<: *$1"),t=t.replace(/"__REF__(\w+)"/g,"*$1"),t=t.replace(/- __REF__(\w+)/g,"- *$1"),t=t.replace(/__REF__(\w+)/g,"*$1"),t}function $e(e){return`__REF__${e}`}function kn(e,t){const n=Pw();if(!n)return null;const s=e.toLowerCase().replace(/-/g,"_"),a=e.split("."),l=a[a.length-1]||"",o=a.slice(-2).join(".");for(const[i,c]of Object.entries(n.aliasUsage))for(const d of c){const m=d.toLowerCase().replace(/-/g,"_");if(s===m&&n.anchorPaths[i]||(s.endsWith("."+m)||m.endsWith("."+s))&&n.anchorPaths[i])return i;const f=d.split(".").pop()||"";if(l===f&&l!==""){const h=d.split(".").slice(-2).join(".");if((o.endsWith(h)||h.endsWith(o))&&n.anchorPaths[i])return i}}if(n.pathSuffixToAnchor){const i=o.toLowerCase().replace(/-/g,"_");for(const[c,d]of Object.entries(n.pathSuffixToAnchor)){const m=c.toLowerCase().replace(/-/g,"_");if((i===m||i.endsWith("."+m))&&n.anchorPaths[d])return d}}if(t&&typeof t=="object"){if(t.catalog_name&&t.schema_name){for(const[c,d]of Object.entries(n.anchorPaths))if(d.includes("schema"))return c}const i=t.name||t.refName;if(i)for(const[c,d]of Object.entries(n.anchorPaths)){const m=d.split(".").pop()||"";if(c===i||m===i)return c}}return null}function Zo(e,t){if(typeof e=="string")return t[e]?$e(e):e;if(e&&typeof e=="object"&&e.name){for(const[n,s]of Object.entries(t))if(s.name===e.name)return $e(n);return{name:e.name,...e.temperature!==void 0&&{temperature:e.temperature},...e.max_tokens!==void 0&&{max_tokens:e.max_tokens},...e.on_behalf_of_user!==void 0&&{on_behalf_of_user:e.on_behalf_of_user},...e.fallbacks&&e.fallbacks.length>0&&{fallbacks:e.fallbacks}}}return e}function Gs(e,t,n){if(e){if(n){const s=kn(n,e);if(s)return $e(s)}for(const[s,a]of Object.entries(t))if(a.catalog_name===e.catalog_name&&a.schema_name===e.schema_name)return $e(s);return{catalog_name:e.catalog_name,schema_name:e.schema_name}}}function Vh(e,t){var s,a,l,o;if(!e)return;const n={};if(e.volume)if(typeof e.volume=="string")e.volume.startsWith("*")?n.volume=$e(e.volume.substring(1)):n.volume=$e(e.volume);else{let i;for(const[c,d]of Object.entries(t))if(d.name===e.volume.name&&((s=d.schema)==null?void 0:s.catalog_name)===((a=e.volume.schema)==null?void 0:a.catalog_name)&&((l=d.schema)==null?void 0:l.schema_name)===((o=e.volume.schema)==null?void 0:o.schema_name)){i=c;break}i?n.volume=$e(i):e.volume._schemaRef?n.volume={schema:$e(e.volume._schemaRef),name:e.volume.name}:n.volume={...e.volume.schema&&{schema:{catalog_name:e.volume.schema.catalog_name,schema_name:e.volume.schema.schema_name}},name:e.volume.name}}return e.path&&(n.path=e.path),Object.keys(n).length>0?n:void 0}function Tw(e,t){const n={};if(e.supervisor&&(n.supervisor={model:Zo(e.supervisor.model,t),...e.supervisor.tools&&e.supervisor.tools.length>0&&{tools:e.supervisor.tools},...e.supervisor.prompt&&{prompt:e.supervisor.prompt}}),e.swarm){if(n.swarm={model:Zo(e.swarm.model,t)},e.swarm.default_agent){const s=e.swarm.default_agent;typeof s=="string"?n.swarm.default_agent=s:"name"in s&&(n.swarm.default_agent=s.name)}e.swarm.handoffs&&Object.keys(e.swarm.handoffs).length>0&&(n.swarm.handoffs={},Object.entries(e.swarm.handoffs).forEach(([s,a])=>{a==null?n.swarm.handoffs[s]=null:Array.isArray(a)&&(a.length===0?n.swarm.handoffs[s]=[]:n.swarm.handoffs[s]=a.map(l=>typeof l=="string"?l:l.name))}))}return e.memory&&(n.memory=e.memory),n}function Iw(e){return{review_prompt:e.review_prompt,...e.interrupt_config&&{interrupt_config:e.interrupt_config},...e.decline_message&&{decline_message:e.decline_message},...e.custom_actions&&Object.keys(e.custom_actions).length>0&&{custom_actions:e.custom_actions}}}function Lw(e,t){if(typeof e=="string")return e;const n={type:e.type};if("__MERGE__"in e||(n.name=e.name),e.type==="factory"&&"args"in e&&e.args&&Object.keys(e.args).length>0){const s={};for(const[a,l]of Object.entries(e.args)){const o=t?kn(`tools.${t}.function.args.${a}`,l):null;o?s[a]=$e(o):s[a]=l}n.args=s}if(e.type==="unity_catalog"&&("__MERGE__"in e&&e.__MERGE__?n.__MERGE__=e.__MERGE__:"schema"in e&&e.schema&&(n.schema=e.schema,n.name=e.name),"partial_args"in e&&e.partial_args&&(n.partial_args=e.partial_args)),e.type==="mcp"){if("transport"in e&&e.transport&&(n.transport=e.transport),"command"in e&&e.command&&(n.command=e.command),"url"in e&&e.url&&(n.url=e.url),"headers"in e&&e.headers&&(n.headers=e.headers),"args"in e&&e.args&&(n.args=e.args),"pat"in e&&e.pat&&(n.pat=qn(e.pat)),"client_id"in e&&e.client_id&&(n.client_id=qn(e.client_id)),"client_secret"in e&&e.client_secret&&(n.client_secret=qn(e.client_secret)),"workspace_host"in e&&e.workspace_host&&(n.workspace_host=qn(e.workspace_host)),"connection"in e&&e.connection){const s=e.connection;typeof s=="string"&&s.startsWith("*")?n.connection=$e(s.slice(1)):n.connection=s}if("functions"in e&&e.functions&&(n.functions=e.functions),"genie_room"in e&&e.genie_room){const s=t?kn(`tools.${t}.function.genie_room`,e.genie_room):null;n.genie_room=s?$e(s):e.genie_room}if("sql"in e&&e.sql&&(n.sql=e.sql),"vector_search"in e&&e.vector_search){const s=t?kn(`tools.${t}.function.vector_search`,e.vector_search):null;if(s)n.vector_search=$e(s);else if("retriever"in e.vector_search){const a=t?kn(`tools.${t}.function.vector_search.retriever`,e.vector_search.retriever):null;n.vector_search={...e.vector_search,retriever:a?$e(a):e.vector_search.retriever}}else n.vector_search=e.vector_search}}return"human_in_the_loop"in e&&e.human_in_the_loop&&(n.human_in_the_loop=Iw(e.human_in_the_loop)),n}function vc(e){const t={name:e.name};return e.instance_name&&(t.instance_name=e.instance_name),e.description&&(t.description=e.description),e.capacity&&(t.capacity=e.capacity),e.max_pool_size&&(t.max_pool_size=e.max_pool_size),e.timeout_seconds&&(t.timeout_seconds=e.timeout_seconds),e.client_id&&(t.client_id=qn(e.client_id)),e.client_secret&&(t.client_secret=qn(e.client_secret)),e.workspace_host&&(t.workspace_host=qn(e.workspace_host)),e.user&&(t.user=qn(e.user)),e.password&&(t.password=qn(e.password)),t}function qn(e){if(typeof e!="string")return e;if(e.startsWith("*"))return $e(e.slice(1));if(e.startsWith("env:"))return{env:e.slice(4)};if(e.startsWith("secret:")){const t=e.slice(7).split("/");if(t.length===2)return{scope:t[0],secret:t[1]}}return e&&{env:e}}function Ax(e){switch(e.type){case"primitive":return{value:e.value};case"env":const t=e;return{env:t.env,...t.default_value!==void 0&&{default_value:t.default_value}};case"secret":const n=e;return{scope:n.scope,secret:n.secret,...n.default_value!==void 0&&{default_value:n.default_value}};case"composite":const s=e;return{options:s.options.map(a=>Ax(a)),...s.default_value!==void 0&&{default_value:s.default_value}};default:return e}}function Zd(e){var l,o,i,c;const t={},n=e.schemas||{};if(e.variables&&Object.keys(e.variables).length>0&&(t.variables={},Object.entries(e.variables).forEach(([d,m])=>{t.variables[d]=Ax(m)})),e.schemas&&Object.keys(e.schemas).length>0&&(t.schemas={},Object.entries(e.schemas).forEach(([d,m])=>{t.schemas[d]={catalog_name:m.catalog_name,schema_name:m.schema_name,...m.permissions&&{permissions:m.permissions}}})),e.resources&&(e.resources.llms&&Object.keys(e.resources.llms).length>0||e.resources.vector_stores&&Object.keys(e.resources.vector_stores).length>0||e.resources.genie_rooms&&Object.keys(e.resources.genie_rooms).length>0||e.resources.tables&&Object.keys(e.resources.tables).length>0||e.resources.volumes&&Object.keys(e.resources.volumes).length>0||e.resources.functions&&Object.keys(e.resources.functions).length>0||e.resources.warehouses&&Object.keys(e.resources.warehouses).length>0||e.resources.connections&&Object.keys(e.resources.connections).length>0||e.resources.databases&&Object.keys(e.resources.databases).length>0)){if(t.resources={},e.resources.llms&&Object.keys(e.resources.llms).length>0&&(t.resources.llms={},Object.entries(e.resources.llms).forEach(([d,m])=>{let f;m.fallbacks&&m.fallbacks.length>0&&(f=m.fallbacks.map(h=>typeof h=="string"&&h.startsWith("ref:")?$e(h.slice(4)):typeof h=="string"?h:h.name)),t.resources.llms[d]={name:m.name,...m.temperature!==void 0&&{temperature:m.temperature},...m.max_tokens!==void 0&&{max_tokens:m.max_tokens},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user},...f&&f.length>0&&{fallbacks:f}}})),e.resources.vector_stores&&Object.keys(e.resources.vector_stores).length>0){const d=e.resources.volumes||{};t.resources.vector_stores={},Object.entries(e.resources.vector_stores).forEach(([m,f])=>{let h;if(f.source_table){const y=Gs(f.source_table.schema,n,`resources.vector_stores.${m}.source_table.schema`);h={...y&&{schema:y},...f.source_table.name&&{name:f.source_table.name}}}let x;if(f.index&&f.index.name){const y=Gs(f.index.schema,n,`resources.vector_stores.${m}.index.schema`);x={...y&&{schema:y},name:f.index.name}}let p;if(f.embedding_model){const y=kn(`resources.vector_stores.${m}.embedding_model`,f.embedding_model);y?p=$e(y):p=f.embedding_model}t.resources.vector_stores[m]={...h&&{source_table:h},embedding_source_column:f.embedding_source_column,...p&&{embedding_model:p},...x&&{index:x},...f.endpoint&&f.endpoint.name&&{endpoint:f.endpoint},...f.primary_key&&{primary_key:f.primary_key},...f.columns&&f.columns.length>0&&{columns:f.columns},...f.doc_uri&&{doc_uri:f.doc_uri},...f.source_path&&{source_path:Vh(f.source_path,d)},...f.checkpoint_path&&{checkpoint_path:Vh(f.checkpoint_path,d)},...f.on_behalf_of_user!==void 0&&{on_behalf_of_user:f.on_behalf_of_user}}})}e.resources.genie_rooms&&Object.keys(e.resources.genie_rooms).length>0&&(t.resources.genie_rooms={},Object.entries(e.resources.genie_rooms).forEach(([d,m])=>{const f=zh(m.space_id);let h=f;Fh(f,"*")&&(h=$e(f.substring(1))),t.resources.genie_rooms[d]={name:m.name,space_id:h,...m.description&&{description:m.description},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.tables&&Object.keys(e.resources.tables).length>0&&(t.resources.tables={},Object.entries(e.resources.tables).forEach(([d,m])=>{const f=Gs(m.schema,n,`resources.tables.${d}.schema`);t.resources.tables[d]={...f&&{schema:f},...m.name&&{name:m.name},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.volumes&&Object.keys(e.resources.volumes).length>0&&(t.resources.volumes={},Object.entries(e.resources.volumes).forEach(([d,m])=>{const f=Gs(m.schema,n,`resources.volumes.${d}.schema`);t.resources.volumes[d]={name:m.name,...f&&{schema:f},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.functions&&Object.keys(e.resources.functions).length>0&&(t.resources.functions={},Object.entries(e.resources.functions).forEach(([d,m])=>{const f=Gs(m.schema,n,`resources.functions.${d}.schema`);t.resources.functions[d]={...f&&{schema:f},...m.name&&{name:m.name},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.warehouses&&Object.keys(e.resources.warehouses).length>0&&(t.resources.warehouses={},Object.entries(e.resources.warehouses).forEach(([d,m])=>{const f=zh(m.warehouse_id);let h=f;Fh(f,"*")&&(h=$e(f.substring(1))),t.resources.warehouses[d]={name:m.name,warehouse_id:h,...m.description&&{description:m.description},...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.connections&&Object.keys(e.resources.connections).length>0&&(t.resources.connections={},Object.entries(e.resources.connections).forEach(([d,m])=>{t.resources.connections[d]={name:m.name,...m.on_behalf_of_user!==void 0&&{on_behalf_of_user:m.on_behalf_of_user}}})),e.resources.databases&&Object.keys(e.resources.databases).length>0&&(t.resources.databases={},Object.entries(e.resources.databases).forEach(([d,m])=>{t.resources.databases[d]=vc(m)}))}if(e.retrievers&&Object.keys(e.retrievers).length>0&&(t.retrievers={},Object.entries(e.retrievers).forEach(([d,m])=>{var p,y;let f;const h=kn(`retrievers.${d}.vector_store`,m.vector_store);if(h)f=$e(h);else{const v=((p=e.resources)==null?void 0:p.vector_stores)||{},u=(y=Object.entries(v).find(([,g])=>{var b,C,$,M;return g.embedding_source_column===((b=m.vector_store)==null?void 0:b.embedding_source_column)&&((C=g.source_table)==null?void 0:C.name)===((M=($=m.vector_store)==null?void 0:$.source_table)==null?void 0:M.name)}))==null?void 0:y[0];u&&(f=$e(u))}const x={vector_store:f||m.vector_store};if(m.columns&&m.columns.length>0&&(x.columns=m.columns),m.search_parameters){const v={num_results:m.search_parameters.num_results||10,query_type:m.search_parameters.query_type||"ANN"};m.search_parameters.filters&&Object.keys(m.search_parameters.filters).length>0&&(v.filters=m.search_parameters.filters),x.search_parameters=v}m.rerank&&(typeof m.rerank=="boolean"?x.rerank=m.rerank:x.rerank={...m.rerank.model&&{model:m.rerank.model},...m.rerank.top_n!==void 0&&{top_n:m.rerank.top_n},...m.rerank.cache_dir&&{cache_dir:m.rerank.cache_dir},...m.rerank.columns&&m.rerank.columns.length>0&&{columns:m.rerank.columns}}),t.retrievers[d]=x})),e.tools&&Object.keys(e.tools).length>0&&(t.tools={},Object.entries(e.tools).forEach(([d,m])=>{t.tools[d]={name:m.name,function:Lw(m.function,d)}})),e.guardrails&&Object.keys(e.guardrails).length>0){const d=((l=e.resources)==null?void 0:l.llms)||{};t.guardrails={},Object.entries(e.guardrails).forEach(([m,f])=>{t.guardrails[m]={name:f.name,model:Zo(f.model,d),prompt:f.prompt,...f.num_retries!==void 0&&{num_retries:f.num_retries}}})}if(e.memory&&(t.memory={},e.memory.checkpointer&&(t.memory.checkpointer={name:e.memory.checkpointer.name,type:e.memory.checkpointer.type||"memory",...e.memory.checkpointer.database&&{database:vc(e.memory.checkpointer.database)}}),e.memory.store&&(t.memory.store={name:e.memory.store.name,type:e.memory.store.type||"memory",...e.memory.store.embedding_model&&{embedding_model:e.memory.store.embedding_model},...e.memory.store.dims&&{dims:e.memory.store.dims},...e.memory.store.database&&{database:vc(e.memory.store.database)},...e.memory.store.namespace&&{namespace:e.memory.store.namespace}})),e.prompts&&Object.keys(e.prompts).length>0&&(t.prompts={},Object.entries(e.prompts).forEach(([d,m])=>{t.prompts[d]={name:m.name,...m.schema&&{schema:Gs(m.schema,n)},...m.description&&{description:m.description},...m.default_template&&{default_template:m.default_template},...m.alias&&{alias:m.alias},...m.version!==void 0&&{version:m.version},...m.tags&&Object.keys(m.tags).length>0&&{tags:m.tags}}})),e.agents&&Object.keys(e.agents).length>0){const d=((o=e.resources)==null?void 0:o.llms)||{},m=e.prompts||{},f=e.tools||{},h=e.guardrails||{};t.agents={},Object.entries(e.agents).forEach(([x,p])=>{var g;let y=p.prompt;if(p.prompt&&typeof p.prompt=="object"&&"name"in p.prompt){const b=p.prompt,C=(g=Object.entries(m).find(([,$])=>$.name===b.name))==null?void 0:g[0];C&&(y=$e(C))}let v;p.tools&&p.tools.length>0&&(v=p.tools.map((b,C)=>{const $=kn(`agents.${x}.tools.${C}`,b);if($)return $e($);const M=typeof b=="string"?b:b.name,R=Object.entries(f).find(([,k])=>k.name===M),_=R?R[0]:M;return $e(_)}));let u;p.guardrails&&p.guardrails.length>0&&(u=p.guardrails.map((b,C)=>{const $=kn(`agents.${x}.guardrails.${C}`,b);if($)return $e($);const M=typeof b=="string"?b:b.name,R=Object.entries(h).find(([,k])=>k.name===M),_=R?R[0]:M;return $e(_)})),t.agents[x]={name:p.name,model:Zo(p.model,d),...p.description&&{description:p.description},...v&&v.length>0&&{tools:v},...u&&u.length>0&&{guardrails:u},...y&&{prompt:y},...p.handoff_prompt&&{handoff_prompt:p.handoff_prompt}}})}if(e.app&&e.app.name&&((i=e.app.registered_model)!=null&&i.name)){const d=e.agents||{};let m;e.app.agents&&e.app.agents.length>0&&(m=e.app.agents.map((h,x)=>{const p=kn(`app.agents.${x}`,h);if(p)return $e(p);const y=typeof h=="string"?h:h.name,v=Object.entries(d).find(([,g])=>g.name===y),u=v?v[0]:y;return $e(u)}));let f={name:e.app.registered_model.name};if(e.app.registered_model.schema){const h=Gs(e.app.registered_model.schema,n,"app.registered_model.schema");h&&(f.schema=h)}if(t.app={name:e.app.name,registered_model:f,...e.app.description&&{description:e.app.description},...e.app.log_level&&{log_level:e.app.log_level},...e.app.endpoint_name&&{endpoint_name:e.app.endpoint_name},...e.app.tags&&{tags:e.app.tags},...e.app.permissions&&{permissions:e.app.permissions},...m&&m.length>0&&{agents:m}},e.app.orchestration){const h=((c=e.resources)==null?void 0:c.llms)||{};t.app.orchestration=Tw(e.app.orchestration,h)}}let a=Qd.dump(t,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,quotingType:'"'});return a=Rw(a),a=Aw(a),a}function Mw(e,t="model_config.yaml"){const n=Zd(e),s=new Blob([n],{type:"text/yaml"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}var Mu={exports:{}},Tx={},bn={},oa={},Sl={},be={},vl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(g){if(super(),!e.IDENTIFIER.test(g))throw new Error("CodeGen: name must be a valid identifier");this.str=g}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class s extends t{constructor(g){super(),this._items=typeof g=="string"?[g]:g}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const g=this._items[0];return g===""||g==='""'}get str(){var g;return(g=this._str)!==null&&g!==void 0?g:this._str=this._items.reduce((b,C)=>`${b}${C}`,"")}get names(){var g;return(g=this._names)!==null&&g!==void 0?g:this._names=this._items.reduce((b,C)=>(C instanceof n&&(b[C.str]=(b[C.str]||0)+1),b),{})}}e._Code=s,e.nil=new s("");function a(u,...g){const b=[u[0]];let C=0;for(;C<g.length;)i(b,g[C]),b.push(u[++C]);return new s(b)}e._=a;const l=new s("+");function o(u,...g){const b=[x(u[0])];let C=0;for(;C<g.length;)b.push(l),i(b,g[C]),b.push(l,x(u[++C]));return c(b),new s(b)}e.str=o;function i(u,g){g instanceof s?u.push(...g._items):g instanceof n?u.push(g):u.push(f(g))}e.addCodeArg=i;function c(u){let g=1;for(;g<u.length-1;){if(u[g]===l){const b=d(u[g-1],u[g+1]);if(b!==void 0){u.splice(g-1,3,b);continue}u[g++]="+"}g++}}function d(u,g){if(g==='""')return u;if(u==='""')return g;if(typeof u=="string")return g instanceof n||u[u.length-1]!=='"'?void 0:typeof g!="string"?`${u.slice(0,-1)}${g}"`:g[0]==='"'?u.slice(0,-1)+g.slice(1):void 0;if(typeof g=="string"&&g[0]==='"'&&!(u instanceof n))return`"${u}${g.slice(1)}`}function m(u,g){return g.emptyStr()?u:u.emptyStr()?g:o`${u}${g}`}e.strConcat=m;function f(u){return typeof u=="number"||typeof u=="boolean"||u===null?u:x(Array.isArray(u)?u.join(","):u)}function h(u){return new s(x(u))}e.stringify=h;function x(u){return JSON.stringify(u).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=x;function p(u){return typeof u=="string"&&e.IDENTIFIER.test(u)?new s(`.${u}`):a`[${u}]`}e.getProperty=p;function y(u){if(typeof u=="string"&&e.IDENTIFIER.test(u))return new s(`${u}`);throw new Error(`CodeGen: invalid export name: ${u}, use explicit $id name mapping`)}e.getEsmExportName=y;function v(u){return new s(u.toString())}e.regexpCode=v})(vl);var Du={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=vl;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var s;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(s||(e.UsedValueState=s={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:d,parent:m}={}){this._names={},this._prefixes=d,this._parent=m}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const m=this._names[d]||this._nameGroup(d);return`${d}${m.index++}`}_nameGroup(d){var m,f;if(!((f=(m=this._parent)===null||m===void 0?void 0:m._prefixes)===null||f===void 0)&&f.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=a;class l extends t.Name{constructor(d,m){super(m),this.prefix=d}setValue(d,{property:m,itemIndex:f}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(m)}[${f}]`}}e.ValueScopeName=l;const o=(0,t._)`\n`;class i extends a{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:t.nil}}get(){return this._scope}name(d){return new l(d,this._newName(d))}value(d,m){var f;if(m.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(d),{prefix:x}=h,p=(f=m.key)!==null&&f!==void 0?f:m.ref;let y=this._values[x];if(y){const g=y.get(p);if(g)return g}else y=this._values[x]=new Map;y.set(p,h);const v=this._scope[x]||(this._scope[x]=[]),u=v.length;return v[u]=m.ref,h.setValue(m,{property:x,itemIndex:u}),h}getValue(d,m){const f=this._values[d];if(f)return f.get(m)}scopeRefs(d,m=this._values){return this._reduceValues(m,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${d}${f.scopePath}`})}scopeCode(d=this._values,m,f){return this._reduceValues(d,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},m,f)}_reduceValues(d,m,f={},h){let x=t.nil;for(const p in d){const y=d[p];if(!y)continue;const v=f[p]=f[p]||new Map;y.forEach(u=>{if(v.has(u))return;v.set(u,s.Started);let g=m(u);if(g){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;x=(0,t._)`${x}${b} ${u} = ${g};${this.opts._n}`}else if(g=h==null?void 0:h(u))x=(0,t._)`${x}${g}${this.opts._n}`;else throw new n(u);v.set(u,s.Completed)})}return x}}e.ValueScope=i})(Du);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=vl,n=Du;var s=vl;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return s.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return s.Name}});var a=Du;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class l{optimizeNodes(){return this}optimizeNames(j,E){return this}}class o extends l{constructor(j,E,S){super(),this.varKind=j,this.name=E,this.rhs=S}render({es5:j,_n:E}){const S=j?n.varKinds.var:this.varKind,G=this.rhs===void 0?"":` = ${this.rhs}`;return`${S} ${this.name}${G};`+E}optimizeNames(j,E){if(j[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,j,E)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends l{constructor(j,E,S){super(),this.lhs=j,this.rhs=E,this.sideEffects=S}render({_n:j}){return`${this.lhs} = ${this.rhs};`+j}optimizeNames(j,E){if(!(this.lhs instanceof t.Name&&!j[this.lhs.str]&&!this.sideEffects))return this.rhs=A(this.rhs,j,E),this}get names(){const j=this.lhs instanceof t.Name?{}:{...this.lhs.names};return L(j,this.rhs)}}class c extends i{constructor(j,E,S,G){super(j,S,G),this.op=E}render({_n:j}){return`${this.lhs} ${this.op}= ${this.rhs};`+j}}class d extends l{constructor(j){super(),this.label=j,this.names={}}render({_n:j}){return`${this.label}:`+j}}class m extends l{constructor(j){super(),this.label=j,this.names={}}render({_n:j}){return`break${this.label?` ${this.label}`:""};`+j}}class f extends l{constructor(j){super(),this.error=j}render({_n:j}){return`throw ${this.error};`+j}get names(){return this.error.names}}class h extends l{constructor(j){super(),this.code=j}render({_n:j}){return`${this.code};`+j}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(j,E){return this.code=A(this.code,j,E),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class x extends l{constructor(j=[]){super(),this.nodes=j}render(j){return this.nodes.reduce((E,S)=>E+S.render(j),"")}optimizeNodes(){const{nodes:j}=this;let E=j.length;for(;E--;){const S=j[E].optimizeNodes();Array.isArray(S)?j.splice(E,1,...S):S?j[E]=S:j.splice(E,1)}return j.length>0?this:void 0}optimizeNames(j,E){const{nodes:S}=this;let G=S.length;for(;G--;){const J=S[G];J.optimizeNames(j,E)||(H(j,J.names),S.splice(G,1))}return S.length>0?this:void 0}get names(){return this.nodes.reduce((j,E)=>F(j,E.names),{})}}class p extends x{render(j){return"{"+j._n+super.render(j)+"}"+j._n}}class y extends x{}class v extends p{}v.kind="else";class u extends p{constructor(j,E){super(E),this.condition=j}render(j){let E=`if(${this.condition})`+super.render(j);return this.else&&(E+="else "+this.else.render(j)),E}optimizeNodes(){super.optimizeNodes();const j=this.condition;if(j===!0)return this.nodes;let E=this.else;if(E){const S=E.optimizeNodes();E=this.else=Array.isArray(S)?new v(S):S}if(E)return j===!1?E instanceof u?E:E.nodes:this.nodes.length?this:new u(ie(j),E instanceof u?[E]:E.nodes);if(!(j===!1||!this.nodes.length))return this}optimizeNames(j,E){var S;if(this.else=(S=this.else)===null||S===void 0?void 0:S.optimizeNames(j,E),!!(super.optimizeNames(j,E)||this.else))return this.condition=A(this.condition,j,E),this}get names(){const j=super.names;return L(j,this.condition),this.else&&F(j,this.else.names),j}}u.kind="if";class g extends p{}g.kind="for";class b extends g{constructor(j){super(),this.iteration=j}render(j){return`for(${this.iteration})`+super.render(j)}optimizeNames(j,E){if(super.optimizeNames(j,E))return this.iteration=A(this.iteration,j,E),this}get names(){return F(super.names,this.iteration.names)}}class C extends g{constructor(j,E,S,G){super(),this.varKind=j,this.name=E,this.from=S,this.to=G}render(j){const E=j.es5?n.varKinds.var:this.varKind,{name:S,from:G,to:J}=this;return`for(${E} ${S}=${G}; ${S}<${J}; ${S}++)`+super.render(j)}get names(){const j=L(super.names,this.from);return L(j,this.to)}}class $ extends g{constructor(j,E,S,G){super(),this.loop=j,this.varKind=E,this.name=S,this.iterable=G}render(j){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(j)}optimizeNames(j,E){if(super.optimizeNames(j,E))return this.iterable=A(this.iterable,j,E),this}get names(){return F(super.names,this.iterable.names)}}class M extends p{constructor(j,E,S){super(),this.name=j,this.args=E,this.async=S}render(j){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(j)}}M.kind="func";class R extends x{render(j){return"return "+super.render(j)}}R.kind="return";class _ extends p{render(j){let E="try"+super.render(j);return this.catch&&(E+=this.catch.render(j)),this.finally&&(E+=this.finally.render(j)),E}optimizeNodes(){var j,E;return super.optimizeNodes(),(j=this.catch)===null||j===void 0||j.optimizeNodes(),(E=this.finally)===null||E===void 0||E.optimizeNodes(),this}optimizeNames(j,E){var S,G;return super.optimizeNames(j,E),(S=this.catch)===null||S===void 0||S.optimizeNames(j,E),(G=this.finally)===null||G===void 0||G.optimizeNames(j,E),this}get names(){const j=super.names;return this.catch&&F(j,this.catch.names),this.finally&&F(j,this.finally.names),j}}class k extends p{constructor(j){super(),this.error=j}render(j){return`catch(${this.error})`+super.render(j)}}k.kind="catch";class T extends p{render(j){return"finally"+super.render(j)}}T.kind="finally";class w{constructor(j,E={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...E,_n:E.lines?`
`:""},this._extScope=j,this._scope=new n.Scope({parent:j}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(j){return this._scope.name(j)}scopeName(j){return this._extScope.name(j)}scopeValue(j,E){const S=this._extScope.value(j,E);return(this._values[S.prefix]||(this._values[S.prefix]=new Set)).add(S),S}getScopeValue(j,E){return this._extScope.getValue(j,E)}scopeRefs(j){return this._extScope.scopeRefs(j,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(j,E,S,G){const J=this._scope.toName(E);return S!==void 0&&G&&(this._constants[J.str]=S),this._leafNode(new o(j,J,S)),J}const(j,E,S){return this._def(n.varKinds.const,j,E,S)}let(j,E,S){return this._def(n.varKinds.let,j,E,S)}var(j,E,S){return this._def(n.varKinds.var,j,E,S)}assign(j,E,S){return this._leafNode(new i(j,E,S))}add(j,E){return this._leafNode(new c(j,e.operators.ADD,E))}code(j){return typeof j=="function"?j():j!==t.nil&&this._leafNode(new h(j)),this}object(...j){const E=["{"];for(const[S,G]of j)E.length>1&&E.push(","),E.push(S),(S!==G||this.opts.es5)&&(E.push(":"),(0,t.addCodeArg)(E,G));return E.push("}"),new t._Code(E)}if(j,E,S){if(this._blockNode(new u(j)),E&&S)this.code(E).else().code(S).endIf();else if(E)this.code(E).endIf();else if(S)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(j){return this._elseNode(new u(j))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(u,v)}_for(j,E){return this._blockNode(j),E&&this.code(E).endFor(),this}for(j,E){return this._for(new b(j),E)}forRange(j,E,S,G,J=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(j);return this._for(new C(J,he,E,S),()=>G(he))}forOf(j,E,S,G=n.varKinds.const){const J=this._scope.toName(j);if(this.opts.es5){const he=E instanceof t.Name?E:this.var("_arr",E);return this.forRange("_i",0,(0,t._)`${he}.length`,de=>{this.var(J,(0,t._)`${he}[${de}]`),S(J)})}return this._for(new $("of",G,J,E),()=>S(J))}forIn(j,E,S,G=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(j,(0,t._)`Object.keys(${E})`,S);const J=this._scope.toName(j);return this._for(new $("in",G,J,E),()=>S(J))}endFor(){return this._endBlockNode(g)}label(j){return this._leafNode(new d(j))}break(j){return this._leafNode(new m(j))}return(j){const E=new R;if(this._blockNode(E),this.code(j),E.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(j,E,S){if(!E&&!S)throw new Error('CodeGen: "try" without "catch" and "finally"');const G=new _;if(this._blockNode(G),this.code(j),E){const J=this.name("e");this._currNode=G.catch=new k(J),E(J)}return S&&(this._currNode=G.finally=new T,this.code(S)),this._endBlockNode(k,T)}throw(j){return this._leafNode(new f(j))}block(j,E){return this._blockStarts.push(this._nodes.length),j&&this.code(j).endBlock(E),this}endBlock(j){const E=this._blockStarts.pop();if(E===void 0)throw new Error("CodeGen: not in self-balancing block");const S=this._nodes.length-E;if(S<0||j!==void 0&&S!==j)throw new Error(`CodeGen: wrong number of nodes: ${S} vs ${j} expected`);return this._nodes.length=E,this}func(j,E=t.nil,S,G){return this._blockNode(new M(j,E,S)),G&&this.code(G).endFunc(),this}endFunc(){return this._endBlockNode(M)}optimize(j=1){for(;j-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(j){return this._currNode.nodes.push(j),this}_blockNode(j){this._currNode.nodes.push(j),this._nodes.push(j)}_endBlockNode(j,E){const S=this._currNode;if(S instanceof j||E&&S instanceof E)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${E?`${j.kind}/${E.kind}`:j.kind}"`)}_elseNode(j){const E=this._currNode;if(!(E instanceof u))throw new Error('CodeGen: "else" without "if"');return this._currNode=E.else=j,this}get _root(){return this._nodes[0]}get _currNode(){const j=this._nodes;return j[j.length-1]}set _currNode(j){const E=this._nodes;E[E.length-1]=j}}e.CodeGen=w;function F(I,j){for(const E in j)I[E]=(I[E]||0)+(j[E]||0);return I}function L(I,j){return j instanceof t._CodeOrName?F(I,j.names):I}function A(I,j,E){if(I instanceof t.Name)return S(I);if(!G(I))return I;return new t._Code(I._items.reduce((J,he)=>(he instanceof t.Name&&(he=S(he)),he instanceof t._Code?J.push(...he._items):J.push(he),J),[]));function S(J){const he=E[J.str];return he===void 0||j[J.str]!==1?J:(delete j[J.str],he)}function G(J){return J instanceof t._Code&&J._items.some(he=>he instanceof t.Name&&j[he.str]===1&&E[he.str]!==void 0)}}function H(I,j){for(const E in j)I[E]=(I[E]||0)-(j[E]||0)}function ie(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:(0,t._)`!${V(I)}`}e.not=ie;const te=O(e.operators.AND);function z(...I){return I.reduce(te)}e.and=z;const q=O(e.operators.OR);function U(...I){return I.reduce(q)}e.or=U;function O(I){return(j,E)=>j===t.nil?E:E===t.nil?j:(0,t._)`${V(j)} ${I} ${V(E)}`}function V(I){return I instanceof t.Name?I:(0,t._)`(${I})`}})(be);var le={};Object.defineProperty(le,"__esModule",{value:!0});le.checkStrictMode=le.getErrorPath=le.Type=le.useFunc=le.setEvaluated=le.evaluatedPropsToName=le.mergeEvaluated=le.eachItem=le.unescapeJsonPointer=le.escapeJsonPointer=le.escapeFragment=le.unescapeFragment=le.schemaRefOrVal=le.schemaHasRulesButRef=le.schemaHasRules=le.checkUnknownRules=le.alwaysValidSchema=le.toHash=void 0;const Pe=be,Dw=vl;function Fw(e){const t={};for(const n of e)t[n]=!0;return t}le.toHash=Fw;function zw(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Ix(e,t),!Lx(t,e.self.RULES.all))}le.alwaysValidSchema=zw;function Ix(e,t=e.schema){const{opts:n,self:s}=e;if(!n.strictSchema||typeof t=="boolean")return;const a=s.RULES.keywords;for(const l in t)a[l]||Fx(e,`unknown keyword: "${l}"`)}le.checkUnknownRules=Ix;function Lx(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}le.schemaHasRules=Lx;function Vw(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}le.schemaHasRulesButRef=Vw;function Uw({topSchemaRef:e,schemaPath:t},n,s,a){if(!a){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Pe._)`${n}`}return(0,Pe._)`${e}${t}${(0,Pe.getProperty)(s)}`}le.schemaRefOrVal=Uw;function Hw(e){return Mx(decodeURIComponent(e))}le.unescapeFragment=Hw;function qw(e){return encodeURIComponent(Xd(e))}le.escapeFragment=qw;function Xd(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}le.escapeJsonPointer=Xd;function Mx(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}le.unescapeJsonPointer=Mx;function Bw(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}le.eachItem=Bw;function Uh({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:s}){return(a,l,o,i)=>{const c=o===void 0?l:o instanceof Pe.Name?(l instanceof Pe.Name?e(a,l,o):t(a,l,o),o):l instanceof Pe.Name?(t(a,o,l),l):n(l,o);return i===Pe.Name&&!(c instanceof Pe.Name)?s(a,c):c}}le.mergeEvaluated={props:Uh({mergeNames:(e,t,n)=>e.if((0,Pe._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Pe._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Pe._)`${n} || {}`).code((0,Pe._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Pe._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Pe._)`${n} || {}`),em(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Dx}),items:Uh({mergeNames:(e,t,n)=>e.if((0,Pe._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Pe._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Pe._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Pe._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Dx(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Pe._)`{}`);return t!==void 0&&em(e,n,t),n}le.evaluatedPropsToName=Dx;function em(e,t,n){Object.keys(n).forEach(s=>e.assign((0,Pe._)`${t}${(0,Pe.getProperty)(s)}`,!0))}le.setEvaluated=em;const Hh={};function Gw(e,t){return e.scopeValue("func",{ref:t,code:Hh[t.code]||(Hh[t.code]=new Dw._Code(t.code))})}le.useFunc=Gw;var Fu;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Fu||(le.Type=Fu={}));function Ww(e,t,n){if(e instanceof Pe.Name){const s=t===Fu.Num;return n?s?(0,Pe._)`"[" + ${e} + "]"`:(0,Pe._)`"['" + ${e} + "']"`:s?(0,Pe._)`"/" + ${e}`:(0,Pe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Pe.getProperty)(e).toString():"/"+Xd(e)}le.getErrorPath=Ww;function Fx(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}le.checkStrictMode=Fx;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});const pt=be,Kw={data:new pt.Name("data"),valCxt:new pt.Name("valCxt"),instancePath:new pt.Name("instancePath"),parentData:new pt.Name("parentData"),parentDataProperty:new pt.Name("parentDataProperty"),rootData:new pt.Name("rootData"),dynamicAnchors:new pt.Name("dynamicAnchors"),vErrors:new pt.Name("vErrors"),errors:new pt.Name("errors"),this:new pt.Name("this"),self:new pt.Name("self"),scope:new pt.Name("scope"),json:new pt.Name("json"),jsonPos:new pt.Name("jsonPos"),jsonLen:new pt.Name("jsonLen"),jsonPart:new pt.Name("jsonPart")};Mn.default=Kw;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=be,n=le,s=Mn;e.keywordError={message:({keyword:v})=>(0,t.str)`must pass "${v}" keyword validation`},e.keyword$DataError={message:({keyword:v,schemaType:u})=>u?(0,t.str)`"${v}" keyword must be ${u} ($data)`:(0,t.str)`"${v}" keyword is invalid ($data)`};function a(v,u=e.keywordError,g,b){const{it:C}=v,{gen:$,compositeRule:M,allErrors:R}=C,_=f(v,u,g);b??(M||R)?c($,_):d(C,(0,t._)`[${_}]`)}e.reportError=a;function l(v,u=e.keywordError,g){const{it:b}=v,{gen:C,compositeRule:$,allErrors:M}=b,R=f(v,u,g);c(C,R),$||M||d(b,s.default.vErrors)}e.reportExtraError=l;function o(v,u){v.assign(s.default.errors,u),v.if((0,t._)`${s.default.vErrors} !== null`,()=>v.if(u,()=>v.assign((0,t._)`${s.default.vErrors}.length`,u),()=>v.assign(s.default.vErrors,null)))}e.resetErrorsCount=o;function i({gen:v,keyword:u,schemaValue:g,data:b,errsCount:C,it:$}){if(C===void 0)throw new Error("ajv implementation error");const M=v.name("err");v.forRange("i",C,s.default.errors,R=>{v.const(M,(0,t._)`${s.default.vErrors}[${R}]`),v.if((0,t._)`${M}.instancePath === undefined`,()=>v.assign((0,t._)`${M}.instancePath`,(0,t.strConcat)(s.default.instancePath,$.errorPath))),v.assign((0,t._)`${M}.schemaPath`,(0,t.str)`${$.errSchemaPath}/${u}`),$.opts.verbose&&(v.assign((0,t._)`${M}.schema`,g),v.assign((0,t._)`${M}.data`,b))})}e.extendErrors=i;function c(v,u){const g=v.const("err",u);v.if((0,t._)`${s.default.vErrors} === null`,()=>v.assign(s.default.vErrors,(0,t._)`[${g}]`),(0,t._)`${s.default.vErrors}.push(${g})`),v.code((0,t._)`${s.default.errors}++`)}function d(v,u){const{gen:g,validateName:b,schemaEnv:C}=v;C.$async?g.throw((0,t._)`new ${v.ValidationError}(${u})`):(g.assign((0,t._)`${b}.errors`,u),g.return(!1))}const m={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(v,u,g){const{createErrors:b}=v.it;return b===!1?(0,t._)`{}`:h(v,u,g)}function h(v,u,g={}){const{gen:b,it:C}=v,$=[x(C,g),p(v,g)];return y(v,u,$),b.object(...$)}function x({errorPath:v},{instancePath:u}){const g=u?(0,t.str)`${v}${(0,n.getErrorPath)(u,n.Type.Str)}`:v;return[s.default.instancePath,(0,t.strConcat)(s.default.instancePath,g)]}function p({keyword:v,it:{errSchemaPath:u}},{schemaPath:g,parentSchema:b}){let C=b?u:(0,t.str)`${u}/${v}`;return g&&(C=(0,t.str)`${C}${(0,n.getErrorPath)(g,n.Type.Str)}`),[m.schemaPath,C]}function y(v,{params:u,message:g},b){const{keyword:C,data:$,schemaValue:M,it:R}=v,{opts:_,propertyName:k,topSchemaRef:T,schemaPath:w}=R;b.push([m.keyword,C],[m.params,typeof u=="function"?u(v):u||(0,t._)`{}`]),_.messages&&b.push([m.message,typeof g=="function"?g(v):g]),_.verbose&&b.push([m.schema,M],[m.parentSchema,(0,t._)`${T}${w}`],[s.default.data,$]),k&&b.push([m.propertyName,k])}})(Sl);Object.defineProperty(oa,"__esModule",{value:!0});oa.boolOrEmptySchema=oa.topBoolOrEmptySchema=void 0;const Yw=Sl,Qw=be,Jw=Mn,Zw={message:"boolean schema is false"};function Xw(e){const{gen:t,schema:n,validateName:s}=e;n===!1?zx(e,!1):typeof n=="object"&&n.$async===!0?t.return(Jw.default.data):(t.assign((0,Qw._)`${s}.errors`,null),t.return(!0))}oa.topBoolOrEmptySchema=Xw;function eS(e,t){const{gen:n,schema:s}=e;s===!1?(n.var(t,!1),zx(e)):n.var(t,!0)}oa.boolOrEmptySchema=eS;function zx(e,t){const{gen:n,data:s}=e,a={gen:n,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Yw.reportError)(a,Zw,void 0,t)}var Ze={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.getRules=hr.isJSONType=void 0;const tS=["string","number","integer","boolean","null","object","array"],nS=new Set(tS);function sS(e){return typeof e=="string"&&nS.has(e)}hr.isJSONType=sS;function rS(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}hr.getRules=rS;var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.shouldUseRule=Kn.shouldUseGroup=Kn.schemaHasRulesForType=void 0;function aS({schema:e,self:t},n){const s=t.RULES.types[n];return s&&s!==!0&&Vx(e,s)}Kn.schemaHasRulesForType=aS;function Vx(e,t){return t.rules.some(n=>Ux(e,n))}Kn.shouldUseGroup=Vx;function Ux(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(s=>e[s]!==void 0))}Kn.shouldUseRule=Ux;Object.defineProperty(Ze,"__esModule",{value:!0});Ze.reportTypeError=Ze.checkDataTypes=Ze.checkDataType=Ze.coerceAndCheckDataType=Ze.getJSONTypes=Ze.getSchemaTypes=Ze.DataType=void 0;const lS=hr,oS=Kn,iS=Sl,xe=be,Hx=le;var Wr;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Wr||(Ze.DataType=Wr={}));function cS(e){const t=qx(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ze.getSchemaTypes=cS;function qx(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(lS.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ze.getJSONTypes=qx;function uS(e,t){const{gen:n,data:s,opts:a}=e,l=dS(t,a.coerceTypes),o=t.length>0&&!(l.length===0&&t.length===1&&(0,oS.schemaHasRulesForType)(e,t[0]));if(o){const i=tm(t,s,a.strictNumbers,Wr.Wrong);n.if(i,()=>{l.length?mS(e,t,l):nm(e)})}return o}Ze.coerceAndCheckDataType=uS;const Bx=new Set(["string","number","integer","boolean","null"]);function dS(e,t){return t?e.filter(n=>Bx.has(n)||t==="array"&&n==="array"):[]}function mS(e,t,n){const{gen:s,data:a,opts:l}=e,o=s.let("dataType",(0,xe._)`typeof ${a}`),i=s.let("coerced",(0,xe._)`undefined`);l.coerceTypes==="array"&&s.if((0,xe._)`${o} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>s.assign(a,(0,xe._)`${a}[0]`).assign(o,(0,xe._)`typeof ${a}`).if(tm(t,a,l.strictNumbers),()=>s.assign(i,a))),s.if((0,xe._)`${i} !== undefined`);for(const d of n)(Bx.has(d)||d==="array"&&l.coerceTypes==="array")&&c(d);s.else(),nm(e),s.endIf(),s.if((0,xe._)`${i} !== undefined`,()=>{s.assign(a,i),fS(e,i)});function c(d){switch(d){case"string":s.elseIf((0,xe._)`${o} == "number" || ${o} == "boolean"`).assign(i,(0,xe._)`"" + ${a}`).elseIf((0,xe._)`${a} === null`).assign(i,(0,xe._)`""`);return;case"number":s.elseIf((0,xe._)`${o} == "boolean" || ${a} === null
              || (${o} == "string" && ${a} && ${a} == +${a})`).assign(i,(0,xe._)`+${a}`);return;case"integer":s.elseIf((0,xe._)`${o} === "boolean" || ${a} === null
              || (${o} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(i,(0,xe._)`+${a}`);return;case"boolean":s.elseIf((0,xe._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(i,!1).elseIf((0,xe._)`${a} === "true" || ${a} === 1`).assign(i,!0);return;case"null":s.elseIf((0,xe._)`${a} === "" || ${a} === 0 || ${a} === false`),s.assign(i,null);return;case"array":s.elseIf((0,xe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${a} === null`).assign(i,(0,xe._)`[${a}]`)}}}function fS({gen:e,parentData:t,parentDataProperty:n},s){e.if((0,xe._)`${t} !== undefined`,()=>e.assign((0,xe._)`${t}[${n}]`,s))}function zu(e,t,n,s=Wr.Correct){const a=s===Wr.Correct?xe.operators.EQ:xe.operators.NEQ;let l;switch(e){case"null":return(0,xe._)`${t} ${a} null`;case"array":l=(0,xe._)`Array.isArray(${t})`;break;case"object":l=(0,xe._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":l=o((0,xe._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":l=o();break;default:return(0,xe._)`typeof ${t} ${a} ${e}`}return s===Wr.Correct?l:(0,xe.not)(l);function o(i=xe.nil){return(0,xe.and)((0,xe._)`typeof ${t} == "number"`,i,n?(0,xe._)`isFinite(${t})`:xe.nil)}}Ze.checkDataType=zu;function tm(e,t,n,s){if(e.length===1)return zu(e[0],t,n,s);let a;const l=(0,Hx.toHash)(e);if(l.array&&l.object){const o=(0,xe._)`typeof ${t} != "object"`;a=l.null?o:(0,xe._)`!${t} || ${o}`,delete l.null,delete l.array,delete l.object}else a=xe.nil;l.number&&delete l.integer;for(const o in l)a=(0,xe.and)(a,zu(o,t,n,s));return a}Ze.checkDataTypes=tm;const hS={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,xe._)`{type: ${e}}`:(0,xe._)`{type: ${t}}`};function nm(e){const t=pS(e);(0,iS.reportError)(t,hS)}Ze.reportTypeError=nm;function pS(e){const{gen:t,data:n,schema:s}=e,a=(0,Hx.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:n,schema:s.type,schemaCode:a,schemaValue:a,parentSchema:s,params:{},it:e}}var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.assignDefaults=void 0;const _r=be,gS=le;function xS(e,t){const{properties:n,items:s}=e.schema;if(t==="object"&&n)for(const a in n)qh(e,a,n[a].default);else t==="array"&&Array.isArray(s)&&s.forEach((a,l)=>qh(e,l,a.default))}Si.assignDefaults=xS;function qh(e,t,n){const{gen:s,compositeRule:a,data:l,opts:o}=e;if(n===void 0)return;const i=(0,_r._)`${l}${(0,_r.getProperty)(t)}`;if(a){(0,gS.checkStrictMode)(e,`default is ignored for: ${i}`);return}let c=(0,_r._)`${i} === undefined`;o.useDefaults==="empty"&&(c=(0,_r._)`${c} || ${i} === null || ${i} === ""`),s.if(c,(0,_r._)`${i} = ${(0,_r.stringify)(n)}`)}var Pn={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.validateUnion=je.validateArray=je.usePattern=je.callValidateCode=je.schemaProperties=je.allSchemaProperties=je.noPropertyInData=je.propertyInData=je.isOwnProperty=je.hasPropFunc=je.reportMissingProp=je.checkMissingProp=je.checkReportMissingProp=void 0;const Ae=be,sm=le,ps=Mn,vS=le;function yS(e,t){const{gen:n,data:s,it:a}=e;n.if(am(n,s,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ae._)`${t}`},!0),e.error()})}je.checkReportMissingProp=yS;function bS({gen:e,data:t,it:{opts:n}},s,a){return(0,Ae.or)(...s.map(l=>(0,Ae.and)(am(e,t,l,n.ownProperties),(0,Ae._)`${a} = ${l}`)))}je.checkMissingProp=bS;function _S(e,t){e.setParams({missingProperty:t},!0),e.error()}je.reportMissingProp=_S;function Gx(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ae._)`Object.prototype.hasOwnProperty`})}je.hasPropFunc=Gx;function rm(e,t,n){return(0,Ae._)`${Gx(e)}.call(${t}, ${n})`}je.isOwnProperty=rm;function jS(e,t,n,s){const a=(0,Ae._)`${t}${(0,Ae.getProperty)(n)} !== undefined`;return s?(0,Ae._)`${a} && ${rm(e,t,n)}`:a}je.propertyInData=jS;function am(e,t,n,s){const a=(0,Ae._)`${t}${(0,Ae.getProperty)(n)} === undefined`;return s?(0,Ae.or)(a,(0,Ae.not)(rm(e,t,n))):a}je.noPropertyInData=am;function Wx(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}je.allSchemaProperties=Wx;function NS(e,t){return Wx(t).filter(n=>!(0,sm.alwaysValidSchema)(e,t[n]))}je.schemaProperties=NS;function wS({schemaCode:e,data:t,it:{gen:n,topSchemaRef:s,schemaPath:a,errorPath:l},it:o},i,c,d){const m=d?(0,Ae._)`${e}, ${t}, ${s}${a}`:t,f=[[ps.default.instancePath,(0,Ae.strConcat)(ps.default.instancePath,l)],[ps.default.parentData,o.parentData],[ps.default.parentDataProperty,o.parentDataProperty],[ps.default.rootData,ps.default.rootData]];o.opts.dynamicRef&&f.push([ps.default.dynamicAnchors,ps.default.dynamicAnchors]);const h=(0,Ae._)`${m}, ${n.object(...f)}`;return c!==Ae.nil?(0,Ae._)`${i}.call(${c}, ${h})`:(0,Ae._)`${i}(${h})`}je.callValidateCode=wS;const SS=(0,Ae._)`new RegExp`;function kS({gen:e,it:{opts:t}},n){const s=t.unicodeRegExp?"u":"",{regExp:a}=t.code,l=a(n,s);return e.scopeValue("pattern",{key:l.toString(),ref:l,code:(0,Ae._)`${a.code==="new RegExp"?SS:(0,vS.useFunc)(e,a)}(${n}, ${s})`})}je.usePattern=kS;function CS(e){const{gen:t,data:n,keyword:s,it:a}=e,l=t.name("valid");if(a.allErrors){const i=t.let("valid",!0);return o(()=>t.assign(i,!1)),i}return t.var(l,!0),o(()=>t.break()),l;function o(i){const c=t.const("len",(0,Ae._)`${n}.length`);t.forRange("i",0,c,d=>{e.subschema({keyword:s,dataProp:d,dataPropType:sm.Type.Num},l),t.if((0,Ae.not)(l),i)})}}je.validateArray=CS;function ES(e){const{gen:t,schema:n,keyword:s,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,sm.alwaysValidSchema)(a,c))&&!a.opts.unevaluated)return;const o=t.let("valid",!1),i=t.name("_valid");t.block(()=>n.forEach((c,d)=>{const m=e.subschema({keyword:s,schemaProp:d,compositeRule:!0},i);t.assign(o,(0,Ae._)`${o} || ${i}`),e.mergeValidEvaluated(m,i)||t.if((0,Ae.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}je.validateUnion=ES;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.validateKeywordUsage=Pn.validSchemaType=Pn.funcKeywordCode=Pn.macroKeywordCode=void 0;const St=be,Qs=Mn,$S=je,PS=Sl;function OS(e,t){const{gen:n,keyword:s,schema:a,parentSchema:l,it:o}=e,i=t.macro.call(o.self,a,l,o),c=Kx(n,s,i);o.opts.validateSchema!==!1&&o.self.validateSchema(i,!0);const d=n.name("valid");e.subschema({schema:i,schemaPath:St.nil,errSchemaPath:`${o.errSchemaPath}/${s}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}Pn.macroKeywordCode=OS;function RS(e,t){var n;const{gen:s,keyword:a,schema:l,parentSchema:o,$data:i,it:c}=e;TS(c,t);const d=!i&&t.compile?t.compile.call(c.self,l,o,c):t.validate,m=Kx(s,a,d),f=s.let("valid");e.block$data(f,h),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function h(){if(t.errors===!1)y(),t.modifying&&Bh(e),v(()=>e.error());else{const u=t.async?x():p();t.modifying&&Bh(e),v(()=>AS(e,u))}}function x(){const u=s.let("ruleErrs",null);return s.try(()=>y((0,St._)`await `),g=>s.assign(f,!1).if((0,St._)`${g} instanceof ${c.ValidationError}`,()=>s.assign(u,(0,St._)`${g}.errors`),()=>s.throw(g))),u}function p(){const u=(0,St._)`${m}.errors`;return s.assign(u,null),y(St.nil),u}function y(u=t.async?(0,St._)`await `:St.nil){const g=c.opts.passContext?Qs.default.this:Qs.default.self,b=!("compile"in t&&!i||t.schema===!1);s.assign(f,(0,St._)`${u}${(0,$S.callValidateCode)(e,m,g,b)}`,t.modifying)}function v(u){var g;s.if((0,St.not)((g=t.valid)!==null&&g!==void 0?g:f),u)}}Pn.funcKeywordCode=RS;function Bh(e){const{gen:t,data:n,it:s}=e;t.if(s.parentData,()=>t.assign(n,(0,St._)`${s.parentData}[${s.parentDataProperty}]`))}function AS(e,t){const{gen:n}=e;n.if((0,St._)`Array.isArray(${t})`,()=>{n.assign(Qs.default.vErrors,(0,St._)`${Qs.default.vErrors} === null ? ${t} : ${Qs.default.vErrors}.concat(${t})`).assign(Qs.default.errors,(0,St._)`${Qs.default.vErrors}.length`),(0,PS.extendErrors)(e)},()=>e.error())}function TS({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Kx(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,St.stringify)(n)})}function IS(e,t,n=!1){return!t.length||t.some(s=>s==="array"?Array.isArray(e):s==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==s||n&&typeof e>"u")}Pn.validSchemaType=IS;function LS({schema:e,opts:t,self:n,errSchemaPath:s},a,l){if(Array.isArray(a.keyword)?!a.keyword.includes(l):a.keyword!==l)throw new Error("ajv implementation error");const o=a.dependencies;if(o!=null&&o.some(i=>!Object.prototype.hasOwnProperty.call(e,i)))throw new Error(`parent schema must have dependencies of ${l}: ${o.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[l])){const c=`keyword "${l}" value is invalid at path "${s}": `+n.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Pn.validateKeywordUsage=LS;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.extendSubschemaMode=As.extendSubschemaData=As.getSubschema=void 0;const Cn=be,Yx=le;function MS(e,{keyword:t,schemaProp:n,schema:s,schemaPath:a,errSchemaPath:l,topSchemaRef:o}){if(t!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const i=e.schema[t];return n===void 0?{schema:i,schemaPath:(0,Cn._)`${e.schemaPath}${(0,Cn.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:(0,Cn._)`${e.schemaPath}${(0,Cn.getProperty)(t)}${(0,Cn.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Yx.escapeFragment)(n)}`}}if(s!==void 0){if(a===void 0||l===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:a,topSchemaRef:o,errSchemaPath:l}}throw new Error('either "keyword" or "schema" must be passed')}As.getSubschema=MS;function DS(e,t,{dataProp:n,dataPropType:s,data:a,dataTypes:l,propertyName:o}){if(a!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=t;if(n!==void 0){const{errorPath:d,dataPathArr:m,opts:f}=t,h=i.let("data",(0,Cn._)`${t.data}${(0,Cn.getProperty)(n)}`,!0);c(h),e.errorPath=(0,Cn.str)`${d}${(0,Yx.getErrorPath)(n,s,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Cn._)`${n}`,e.dataPathArr=[...m,e.parentDataProperty]}if(a!==void 0){const d=a instanceof Cn.Name?a:i.let("data",a,!0);c(d),o!==void 0&&(e.propertyName=o)}l&&(e.dataTypes=l);function c(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}As.extendSubschemaData=DS;function FS(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:s,createErrors:a,allErrors:l}){s!==void 0&&(e.compositeRule=s),a!==void 0&&(e.createErrors=a),l!==void 0&&(e.allErrors=l),e.jtdDiscriminator=t,e.jtdMetadata=n}As.extendSubschemaMode=FS;var ot={},Qx=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var s,a,l;if(Array.isArray(t)){if(s=t.length,s!=n.length)return!1;for(a=s;a--!==0;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(l=Object.keys(t),s=l.length,s!==Object.keys(n).length)return!1;for(a=s;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[a]))return!1;for(a=s;a--!==0;){var o=l[a];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},Jx={exports:{}},Ns=Jx.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var s=typeof n=="function"?n:n.pre||function(){},a=n.post||function(){};go(t,s,a,e,"",e)};Ns.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ns.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ns.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ns.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function go(e,t,n,s,a,l,o,i,c,d){if(s&&typeof s=="object"&&!Array.isArray(s)){t(s,a,l,o,i,c,d);for(var m in s){var f=s[m];if(Array.isArray(f)){if(m in Ns.arrayKeywords)for(var h=0;h<f.length;h++)go(e,t,n,f[h],a+"/"+m+"/"+h,l,a,m,s,h)}else if(m in Ns.propsKeywords){if(f&&typeof f=="object")for(var x in f)go(e,t,n,f[x],a+"/"+m+"/"+zS(x),l,a,m,s,x)}else(m in Ns.keywords||e.allKeys&&!(m in Ns.skipKeywords))&&go(e,t,n,f,a+"/"+m,l,a,m,s)}n(s,a,l,o,i,c,d)}}function zS(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var VS=Jx.exports;Object.defineProperty(ot,"__esModule",{value:!0});ot.getSchemaRefs=ot.resolveUrl=ot.normalizeId=ot._getFullPath=ot.getFullPath=ot.inlineRef=void 0;const US=le,HS=Qx,qS=VS,BS=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function GS(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Vu(e):t?Zx(e)<=t:!1}ot.inlineRef=GS;const WS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Vu(e){for(const t in e){if(WS.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Vu)||typeof n=="object"&&Vu(n))return!0}return!1}function Zx(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!BS.has(n)&&(typeof e[n]=="object"&&(0,US.eachItem)(e[n],s=>t+=Zx(s)),t===1/0))return 1/0}return t}function Xx(e,t="",n){n!==!1&&(t=Kr(t));const s=e.parse(t);return ev(e,s)}ot.getFullPath=Xx;function ev(e,t){return e.serialize(t).split("#")[0]+"#"}ot._getFullPath=ev;const KS=/#\/?$/;function Kr(e){return e?e.replace(KS,""):""}ot.normalizeId=Kr;function YS(e,t,n){return n=Kr(n),e.resolve(t,n)}ot.resolveUrl=YS;const QS=/^[a-z_][-a-z0-9._]*$/i;function JS(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:s}=this.opts,a=Kr(e[n]||t),l={"":a},o=Xx(s,a,!1),i={},c=new Set;return qS(e,{allKeys:!0},(f,h,x,p)=>{if(p===void 0)return;const y=o+h;let v=l[p];typeof f[n]=="string"&&(v=u.call(this,f[n])),g.call(this,f.$anchor),g.call(this,f.$dynamicAnchor),l[h]=v;function u(b){const C=this.opts.uriResolver.resolve;if(b=Kr(v?C(v,b):b),c.has(b))throw m(b);c.add(b);let $=this.refs[b];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(f,$.schema,b):b!==Kr(y)&&(b[0]==="#"?(d(f,i[b],b),i[b]=f):this.refs[b]=y),b}function g(b){if(typeof b=="string"){if(!QS.test(b))throw new Error(`invalid anchor "${b}"`);u.call(this,`#${b}`)}}}),i;function d(f,h,x){if(h!==void 0&&!HS(f,h))throw m(x)}function m(f){return new Error(`reference "${f}" resolves to more than one schema`)}}ot.getSchemaRefs=JS;Object.defineProperty(bn,"__esModule",{value:!0});bn.getData=bn.KeywordCxt=bn.validateFunctionCode=void 0;const tv=oa,Gh=Ze,lm=Kn,Xo=Ze,ZS=Si,Ha=Pn,yc=As,me=be,pe=Mn,XS=ot,Yn=le,wa=Sl;function ek(e){if(rv(e)&&(av(e),sv(e))){sk(e);return}nv(e,()=>(0,tv.topBoolOrEmptySchema)(e))}bn.validateFunctionCode=ek;function nv({gen:e,validateName:t,schema:n,schemaEnv:s,opts:a},l){a.code.es5?e.func(t,(0,me._)`${pe.default.data}, ${pe.default.valCxt}`,s.$async,()=>{e.code((0,me._)`"use strict"; ${Wh(n,a)}`),nk(e,a),e.code(l)}):e.func(t,(0,me._)`${pe.default.data}, ${tk(a)}`,s.$async,()=>e.code(Wh(n,a)).code(l))}function tk(e){return(0,me._)`{${pe.default.instancePath}="", ${pe.default.parentData}, ${pe.default.parentDataProperty}, ${pe.default.rootData}=${pe.default.data}${e.dynamicRef?(0,me._)`, ${pe.default.dynamicAnchors}={}`:me.nil}}={}`}function nk(e,t){e.if(pe.default.valCxt,()=>{e.var(pe.default.instancePath,(0,me._)`${pe.default.valCxt}.${pe.default.instancePath}`),e.var(pe.default.parentData,(0,me._)`${pe.default.valCxt}.${pe.default.parentData}`),e.var(pe.default.parentDataProperty,(0,me._)`${pe.default.valCxt}.${pe.default.parentDataProperty}`),e.var(pe.default.rootData,(0,me._)`${pe.default.valCxt}.${pe.default.rootData}`),t.dynamicRef&&e.var(pe.default.dynamicAnchors,(0,me._)`${pe.default.valCxt}.${pe.default.dynamicAnchors}`)},()=>{e.var(pe.default.instancePath,(0,me._)`""`),e.var(pe.default.parentData,(0,me._)`undefined`),e.var(pe.default.parentDataProperty,(0,me._)`undefined`),e.var(pe.default.rootData,pe.default.data),t.dynamicRef&&e.var(pe.default.dynamicAnchors,(0,me._)`{}`)})}function sk(e){const{schema:t,opts:n,gen:s}=e;nv(e,()=>{n.$comment&&t.$comment&&ov(e),ik(e),s.let(pe.default.vErrors,null),s.let(pe.default.errors,0),n.unevaluated&&rk(e),lv(e),dk(e)})}function rk(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,me._)`${n}.evaluated`),t.if((0,me._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,me._)`${e.evaluated}.props`,(0,me._)`undefined`)),t.if((0,me._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,me._)`${e.evaluated}.items`,(0,me._)`undefined`))}function Wh(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,me._)`/*# sourceURL=${n} */`:me.nil}function ak(e,t){if(rv(e)&&(av(e),sv(e))){lk(e,t);return}(0,tv.boolOrEmptySchema)(e,t)}function sv({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function rv(e){return typeof e.schema!="boolean"}function lk(e,t){const{schema:n,gen:s,opts:a}=e;a.$comment&&n.$comment&&ov(e),ck(e),uk(e);const l=s.const("_errs",pe.default.errors);lv(e,l),s.var(t,(0,me._)`${l} === ${pe.default.errors}`)}function av(e){(0,Yn.checkUnknownRules)(e),ok(e)}function lv(e,t){if(e.opts.jtd)return Kh(e,[],!1,t);const n=(0,Gh.getSchemaTypes)(e.schema),s=(0,Gh.coerceAndCheckDataType)(e,n);Kh(e,n,!s,t)}function ok(e){const{schema:t,errSchemaPath:n,opts:s,self:a}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,Yn.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function ik(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Yn.checkStrictMode)(e,"default is ignored in the schema root")}function ck(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,XS.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function uk(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ov({gen:e,schemaEnv:t,schema:n,errSchemaPath:s,opts:a}){const l=n.$comment;if(a.$comment===!0)e.code((0,me._)`${pe.default.self}.logger.log(${l})`);else if(typeof a.$comment=="function"){const o=(0,me.str)`${s}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code((0,me._)`${pe.default.self}.opts.$comment(${l}, ${o}, ${i}.schema)`)}}function dk(e){const{gen:t,schemaEnv:n,validateName:s,ValidationError:a,opts:l}=e;n.$async?t.if((0,me._)`${pe.default.errors} === 0`,()=>t.return(pe.default.data),()=>t.throw((0,me._)`new ${a}(${pe.default.vErrors})`)):(t.assign((0,me._)`${s}.errors`,pe.default.vErrors),l.unevaluated&&mk(e),t.return((0,me._)`${pe.default.errors} === 0`))}function mk({gen:e,evaluated:t,props:n,items:s}){n instanceof me.Name&&e.assign((0,me._)`${t}.props`,n),s instanceof me.Name&&e.assign((0,me._)`${t}.items`,s)}function Kh(e,t,n,s){const{gen:a,schema:l,data:o,allErrors:i,opts:c,self:d}=e,{RULES:m}=d;if(l.$ref&&(c.ignoreKeywordsWithRef||!(0,Yn.schemaHasRulesButRef)(l,m))){a.block(()=>uv(e,"$ref",m.all.$ref.definition));return}c.jtd||fk(e,t),a.block(()=>{for(const h of m.rules)f(h);f(m.post)});function f(h){(0,lm.shouldUseGroup)(l,h)&&(h.type?(a.if((0,Xo.checkDataType)(h.type,o,c.strictNumbers)),Yh(e,h),t.length===1&&t[0]===h.type&&n&&(a.else(),(0,Xo.reportTypeError)(e)),a.endIf()):Yh(e,h),i||a.if((0,me._)`${pe.default.errors} === ${s||0}`))}}function Yh(e,t){const{gen:n,schema:s,opts:{useDefaults:a}}=e;a&&(0,ZS.assignDefaults)(e,t.type),n.block(()=>{for(const l of t.rules)(0,lm.shouldUseRule)(s,l)&&uv(e,l.keyword,l.definition,t.type)})}function fk(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(hk(e,t),e.opts.allowUnionTypes||pk(e,t),gk(e,e.dataTypes))}function hk(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{iv(e.dataTypes,n)||om(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),vk(e,t)}}function pk(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&om(e,"use allowUnionTypes to allow union type keyword")}function gk(e,t){const n=e.self.RULES.all;for(const s in n){const a=n[s];if(typeof a=="object"&&(0,lm.shouldUseRule)(e.schema,a)){const{type:l}=a.definition;l.length&&!l.some(o=>xk(t,o))&&om(e,`missing type "${l.join(",")}" for keyword "${s}"`)}}}function xk(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function iv(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function vk(e,t){const n=[];for(const s of e.dataTypes)iv(t,s)?n.push(s):t.includes("integer")&&s==="number"&&n.push("integer");e.dataTypes=n}function om(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Yn.checkStrictMode)(e,t,e.opts.strictTypes)}class cv{constructor(t,n,s){if((0,Ha.validateKeywordUsage)(t,n,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Yn.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",dv(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Ha.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",pe.default.errors))}result(t,n,s){this.failResult((0,me.not)(t),n,s)}failResult(t,n,s){this.gen.if(t),s?s():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,me.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,me._)`${n} !== undefined && (${(0,me.or)(this.invalid$data(),t)})`)}error(t,n,s){if(n){this.setParams(n),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,n){(t?wa.reportExtraError:wa.reportError)(this,this.def.error,n)}$dataError(){(0,wa.reportError)(this,this.def.$dataError||wa.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,wa.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,s=me.nil){this.gen.block(()=>{this.check$data(t,s),n()})}check$data(t=me.nil,n=me.nil){if(!this.$data)return;const{gen:s,schemaCode:a,schemaType:l,def:o}=this;s.if((0,me.or)((0,me._)`${a} === undefined`,n)),t!==me.nil&&s.assign(t,!0),(l.length||o.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==me.nil&&s.assign(t,!1)),s.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:s,def:a,it:l}=this;return(0,me.or)(o(),i());function o(){if(s.length){if(!(n instanceof me.Name))throw new Error("ajv implementation error");const c=Array.isArray(s)?s:[s];return(0,me._)`${(0,Xo.checkDataTypes)(c,n,l.opts.strictNumbers,Xo.DataType.Wrong)}`}return me.nil}function i(){if(a.validateSchema){const c=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,me._)`!${c}(${n})`}return me.nil}}subschema(t,n){const s=(0,yc.getSubschema)(this.it,t);(0,yc.extendSubschemaData)(s,this.it,t),(0,yc.extendSubschemaMode)(s,t);const a={...this.it,...s,items:void 0,props:void 0};return ak(a,n),a}mergeEvaluated(t,n){const{it:s,gen:a}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=Yn.mergeEvaluated.props(a,t.props,s.props,n)),s.items!==!0&&t.items!==void 0&&(s.items=Yn.mergeEvaluated.items(a,t.items,s.items,n)))}mergeValidEvaluated(t,n){const{it:s,gen:a}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return a.if(n,()=>this.mergeEvaluated(t,me.Name)),!0}}bn.KeywordCxt=cv;function uv(e,t,n,s){const a=new cv(e,n,t);"code"in n?n.code(a,s):a.$data&&n.validate?(0,Ha.funcKeywordCode)(a,n):"macro"in n?(0,Ha.macroKeywordCode)(a,n):(n.compile||n.validate)&&(0,Ha.funcKeywordCode)(a,n)}const yk=/^\/(?:[^~]|~0|~1)*$/,bk=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dv(e,{dataLevel:t,dataNames:n,dataPathArr:s}){let a,l;if(e==="")return pe.default.rootData;if(e[0]==="/"){if(!yk.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,l=pe.default.rootData}else{const d=bk.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const m=+d[1];if(a=d[2],a==="#"){if(m>=t)throw new Error(c("property/index",m));return s[t-m]}if(m>t)throw new Error(c("data",m));if(l=n[t-m],!a)return l}let o=l;const i=a.split("/");for(const d of i)d&&(l=(0,me._)`${l}${(0,me.getProperty)((0,Yn.unescapeJsonPointer)(d))}`,o=(0,me._)`${o} && ${l}`);return o;function c(d,m){return`Cannot access ${d} ${m} levels up, current level is ${t}`}}bn.getData=dv;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});class _k extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}kl.default=_k;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});const bc=ot;class jk extends Error{constructor(t,n,s,a){super(a||`can't resolve reference ${s} from id ${n}`),this.missingRef=(0,bc.resolveUrl)(t,n,s),this.missingSchema=(0,bc.normalizeId)((0,bc.getFullPath)(t,this.missingRef))}}ma.default=jk;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.resolveSchema=Lt.getCompilingSchema=Lt.resolveRef=Lt.compileSchema=Lt.SchemaEnv=void 0;const dn=be,Nk=kl,Ws=Mn,gn=ot,Qh=le,wk=bn;class ki{constructor(t){var n;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,gn.normalizeId)(s==null?void 0:s[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s==null?void 0:s.$async,this.refs={}}}Lt.SchemaEnv=ki;function im(e){const t=mv.call(this,e);if(t)return t;const n=(0,gn.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:a}=this.opts.code,{ownProperties:l}=this.opts,o=new dn.CodeGen(this.scope,{es5:s,lines:a,ownProperties:l});let i;e.$async&&(i=o.scopeValue("Error",{ref:Nk.default,code:(0,dn._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");e.validateName=c;const d={gen:o,allErrors:this.opts.allErrors,data:Ws.default.data,parentData:Ws.default.parentData,parentDataProperty:Ws.default.parentDataProperty,dataNames:[Ws.default.data],dataPathArr:[dn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,dn.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:dn.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,dn._)`""`,opts:this.opts,self:this};let m;try{this._compilations.add(e),(0,wk.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);const f=o.toString();m=`${o.scopeRefs(Ws.default.scope)}return ${f}`,this.opts.code.process&&(m=this.opts.code.process(m,e));const x=new Function(`${Ws.default.self}`,`${Ws.default.scope}`,m)(this,this.scope.get());if(this.scope.value(c,{ref:x}),x.errors=null,x.schema=e.schema,x.schemaEnv=e,e.$async&&(x.$async=!0),this.opts.code.source===!0&&(x.source={validateName:c,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:y}=d;x.evaluated={props:p instanceof dn.Name?void 0:p,items:y instanceof dn.Name?void 0:y,dynamicProps:p instanceof dn.Name,dynamicItems:y instanceof dn.Name},x.source&&(x.source.evaluated=(0,dn.stringify)(x.evaluated))}return e.validate=x,e}catch(f){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),f}finally{this._compilations.delete(e)}}Lt.compileSchema=im;function Sk(e,t,n){var s;n=(0,gn.resolveUrl)(this.opts.uriResolver,t,n);const a=e.refs[n];if(a)return a;let l=Ek.call(this,e,n);if(l===void 0){const o=(s=e.localRefs)===null||s===void 0?void 0:s[n],{schemaId:i}=this.opts;o&&(l=new ki({schema:o,schemaId:i,root:e,baseId:t}))}if(l!==void 0)return e.refs[n]=kk.call(this,l)}Lt.resolveRef=Sk;function kk(e){return(0,gn.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:im.call(this,e)}function mv(e){for(const t of this._compilations)if(Ck(t,e))return t}Lt.getCompilingSchema=mv;function Ck(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Ek(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||Ci.call(this,e,t)}function Ci(e,t){const n=this.opts.uriResolver.parse(t),s=(0,gn._getFullPath)(this.opts.uriResolver,n);let a=(0,gn.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===a)return _c.call(this,n,e);const l=(0,gn.normalizeId)(s),o=this.refs[l]||this.schemas[l];if(typeof o=="string"){const i=Ci.call(this,e,o);return typeof(i==null?void 0:i.schema)!="object"?void 0:_c.call(this,n,i)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||im.call(this,o),l===(0,gn.normalizeId)(t)){const{schema:i}=o,{schemaId:c}=this.opts,d=i[c];return d&&(a=(0,gn.resolveUrl)(this.opts.uriResolver,a,d)),new ki({schema:i,schemaId:c,root:e,baseId:a})}return _c.call(this,n,o)}}Lt.resolveSchema=Ci;const $k=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _c(e,{baseId:t,schema:n,root:s}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const i of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,Qh.unescapeFragment)(i)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!$k.has(i)&&d&&(t=(0,gn.resolveUrl)(this.opts.uriResolver,t,d))}let l;if(typeof n!="boolean"&&n.$ref&&!(0,Qh.schemaHasRulesButRef)(n,this.RULES)){const i=(0,gn.resolveUrl)(this.opts.uriResolver,t,n.$ref);l=Ci.call(this,s,i)}const{schemaId:o}=this.opts;if(l=l||new ki({schema:n,schemaId:o,root:s,baseId:t}),l.schema!==l.root.schema)return l}const Pk="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Ok="Meta-schema for $data reference (JSON AnySchema extension proposal)",Rk="object",Ak=["$data"],Tk={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Ik=!1,Lk={$id:Pk,description:Ok,type:Rk,required:Ak,properties:Tk,additionalProperties:Ik};var cm={},Ei={exports:{}};const Mk=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),fv=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function hv(e){let t="",n=0,s=0;for(s=0;s<e.length;s++)if(n=e[s].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[s];break}for(s+=1;s<e.length;s++){if(n=e[s].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[s]}return t}const Dk=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function Jh(e){return e.length=0,!0}function Fk(e,t,n){if(e.length){const s=hv(e);if(s!=="")t.push(s);else return n.error=!0,!1;e.length=0}return!0}function zk(e){let t=0;const n={error:!1,address:"",zone:""},s=[],a=[];let l=!1,o=!1,i=Fk;for(let c=0;c<e.length;c++){const d=e[c];if(!(d==="["||d==="]"))if(d===":"){if(l===!0&&(o=!0),!i(a,s,n))break;if(++t>7){n.error=!0;break}c>0&&e[c-1]===":"&&(l=!0),s.push(":");continue}else if(d==="%"){if(!i(a,s,n))break;i=Jh}else{a.push(d);continue}}return a.length&&(i===Jh?n.zone=a.join(""):o?s.push(a.join("")):s.push(hv(a))),n.address=s.join(""),n}function pv(e){if(Vk(e,":")<2)return{host:e,isIPV6:!1};const t=zk(e);if(t.error)return{host:e,isIPV6:!1};{let n=t.address,s=t.address;return t.zone&&(n+="%"+t.zone,s+="%25"+t.zone),{host:n,isIPV6:!0,escapedHost:s}}}function Vk(e,t){let n=0;for(let s=0;s<e.length;s++)e[s]===t&&n++;return n}function Uk(e){let t=e;const n=[];let s=-1,a=0;for(;a=t.length;){if(a===1){if(t===".")break;if(t==="/"){n.push("/");break}else{n.push(t);break}}else if(a===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){n.push("/");break}}else if(a===3&&t==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),n.length!==0&&n.pop();continue}}if((s=t.indexOf("/",1))===-1){n.push(t);break}else n.push(t.slice(0,s)),t=t.slice(s)}return n.join("")}function Hk(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function qk(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let n=unescape(e.host);if(!fv(n)){const s=pv(n);s.isIPV6===!0?n=`[${s.escapedHost}]`:n=e.host}t.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var gv={nonSimpleDomain:Dk,recomposeAuthority:qk,normalizeComponentEncoding:Hk,removeDotSegments:Uk,isIPv4:fv,isUUID:Mk,normalizeIPv6:pv};const{isUUID:Bk}=gv,Gk=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function xv(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function vv(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function yv(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Wk(e){return e.secure=xv(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Kk(e){if((e.port===(xv(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function Yk(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(Gk);if(n){const s=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const a=`${s}:${t.nid||e.nid}`,l=um(a);e.path=void 0,l&&(e=l.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Qk(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),a=`${n}:${t.nid||s}`,l=um(a);l&&(e=l.serialize(e,t));const o=e,i=e.nss;return o.path=`${s||t.nid}:${i}`,t.skipEscape=!0,o}function Jk(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!Bk(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function Zk(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const bv={scheme:"http",domainHost:!0,parse:vv,serialize:yv},Xk={scheme:"https",domainHost:bv.domainHost,parse:vv,serialize:yv},xo={scheme:"ws",domainHost:!0,parse:Wk,serialize:Kk},e2={scheme:"wss",domainHost:xo.domainHost,parse:xo.parse,serialize:xo.serialize},t2={scheme:"urn",parse:Yk,serialize:Qk,skipNormalize:!0},n2={scheme:"urn:uuid",parse:Jk,serialize:Zk,skipNormalize:!0},ei={http:bv,https:Xk,ws:xo,wss:e2,urn:t2,"urn:uuid":n2};Object.setPrototypeOf(ei,null);function um(e){return e&&(ei[e]||ei[e.toLowerCase()])||void 0}var s2={SCHEMES:ei,getSchemeHandler:um};const{normalizeIPv6:r2,removeDotSegments:Ra,recomposeAuthority:a2,normalizeComponentEncoding:Kl,isIPv4:l2,nonSimpleDomain:o2}=gv,{SCHEMES:i2,getSchemeHandler:_v}=s2;function c2(e,t){return typeof e=="string"?e=On(ns(e,t),t):typeof e=="object"&&(e=ns(On(e,t),t)),e}function u2(e,t,n){const s=n?Object.assign({scheme:"null"},n):{scheme:"null"},a=jv(ns(e,s),ns(t,s),s,!0);return s.skipEscape=!0,On(a,s)}function jv(e,t,n,s){const a={};return s||(e=ns(On(e,n),n),t=ns(On(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=Ra(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=Ra(t.path||""),a.query=t.query):(t.path?(t.path[0]==="/"?a.path=Ra(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=Ra(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function d2(e,t,n){return typeof e=="string"?(e=unescape(e),e=On(Kl(ns(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=On(Kl(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=On(Kl(ns(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=On(Kl(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function On(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),a=[],l=_v(s.scheme||n.scheme);l&&l.serialize&&l.serialize(n,s),n.path!==void 0&&(s.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),s.reference!=="suffix"&&n.scheme&&a.push(n.scheme,":");const o=a2(n);if(o!==void 0&&(s.reference!=="suffix"&&a.push("//"),a.push(o),n.path&&n.path[0]!=="/"&&a.push("/")),n.path!==void 0){let i=n.path;!s.absolutePath&&(!l||!l.absolutePath)&&(i=Ra(i)),o===void 0&&i[0]==="/"&&i[1]==="/"&&(i="/%2F"+i.slice(2)),a.push(i)}return n.query!==void 0&&a.push("?",n.query),n.fragment!==void 0&&a.push("#",n.fragment),a.join("")}const m2=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function ns(e,t){const n=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let a=!1;n.reference==="suffix"&&(n.scheme?e=n.scheme+":"+e:e="//"+e);const l=e.match(m2);if(l){if(s.scheme=l[1],s.userinfo=l[3],s.host=l[4],s.port=parseInt(l[5],10),s.path=l[6]||"",s.query=l[7],s.fragment=l[8],isNaN(s.port)&&(s.port=l[5]),s.host)if(l2(s.host)===!1){const c=r2(s.host);s.host=c.host.toLowerCase(),a=c.isIPV6}else a=!0;s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&s.query===void 0&&!s.path?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==s.reference&&(s.error=s.error||"URI is not a "+n.reference+" reference.");const o=_v(n.scheme||s.scheme);if(!n.unicodeSupport&&(!o||!o.unicodeSupport)&&s.host&&(n.domainHost||o&&o.domainHost)&&a===!1&&o2(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(i){s.error=s.error||"Host's domain name can not be converted to ASCII: "+i}(!o||o&&!o.skipNormalize)&&(e.indexOf("%")!==-1&&(s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),s.host!==void 0&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),o&&o.parse&&o.parse(s,n)}else s.error=s.error||"URI can not be parsed.";return s}const dm={SCHEMES:i2,normalize:c2,resolve:u2,resolveComponent:jv,equal:d2,serialize:On,parse:ns};Ei.exports=dm;Ei.exports.default=dm;Ei.exports.fastUri=dm;var f2=Ei.exports;Object.defineProperty(cm,"__esModule",{value:!0});const Nv=f2;Nv.code='require("ajv/dist/runtime/uri").default';cm.default=Nv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=bn;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=be;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const s=kl,a=ma,l=hr,o=Lt,i=be,c=ot,d=Ze,m=le,f=Lk,h=cm,x=(U,O)=>new RegExp(U,O);x.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},u={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},g=200;function b(U){var O,V,I,j,E,S,G,J,he,de,ye,De,K,Z,re,N,P,B,ae,_e,W,se,ne,ce,ge;const Ee=U.strict,Ue=(O=U.code)===null||O===void 0?void 0:O.optimize,tt=Ue===!0||Ue===void 0?1:Ue||0,Rt=(I=(V=U.code)===null||V===void 0?void 0:V.regExp)!==null&&I!==void 0?I:x,Ut=(j=U.uriResolver)!==null&&j!==void 0?j:h.default;return{strictSchema:(S=(E=U.strictSchema)!==null&&E!==void 0?E:Ee)!==null&&S!==void 0?S:!0,strictNumbers:(J=(G=U.strictNumbers)!==null&&G!==void 0?G:Ee)!==null&&J!==void 0?J:!0,strictTypes:(de=(he=U.strictTypes)!==null&&he!==void 0?he:Ee)!==null&&de!==void 0?de:"log",strictTuples:(De=(ye=U.strictTuples)!==null&&ye!==void 0?ye:Ee)!==null&&De!==void 0?De:"log",strictRequired:(Z=(K=U.strictRequired)!==null&&K!==void 0?K:Ee)!==null&&Z!==void 0?Z:!1,code:U.code?{...U.code,optimize:tt,regExp:Rt}:{optimize:tt,regExp:Rt},loopRequired:(re=U.loopRequired)!==null&&re!==void 0?re:g,loopEnum:(N=U.loopEnum)!==null&&N!==void 0?N:g,meta:(P=U.meta)!==null&&P!==void 0?P:!0,messages:(B=U.messages)!==null&&B!==void 0?B:!0,inlineRefs:(ae=U.inlineRefs)!==null&&ae!==void 0?ae:!0,schemaId:(_e=U.schemaId)!==null&&_e!==void 0?_e:"$id",addUsedSchema:(W=U.addUsedSchema)!==null&&W!==void 0?W:!0,validateSchema:(se=U.validateSchema)!==null&&se!==void 0?se:!0,validateFormats:(ne=U.validateFormats)!==null&&ne!==void 0?ne:!0,unicodeRegExp:(ce=U.unicodeRegExp)!==null&&ce!==void 0?ce:!0,int32range:(ge=U.int32range)!==null&&ge!==void 0?ge:!0,uriResolver:Ut}}class C{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...b(O)};const{es5:V,lines:I}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:y,es5:V,lines:I}),this.logger=F(O.logger);const j=O.validateFormats;O.validateFormats=!1,this.RULES=(0,l.getRules)(),$.call(this,v,O,"NOT SUPPORTED"),$.call(this,u,O,"DEPRECATED","warn"),this._metaOpts=T.call(this),O.formats&&_.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&k.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),R.call(this),O.validateFormats=j}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:V,schemaId:I}=this.opts;let j=f;I==="id"&&(j={...f},j.id=j.$id,delete j.$id),V&&O&&this.addMetaSchema(j,j[I],!1)}defaultMeta(){const{meta:O,schemaId:V}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[V]||O:void 0}validate(O,V){let I;if(typeof O=="string"){if(I=this.getSchema(O),!I)throw new Error(`no schema with key or ref "${O}"`)}else I=this.compile(O);const j=I(V);return"$async"in I||(this.errors=I.errors),j}compile(O,V){const I=this._addSchema(O,V);return I.validate||this._compileSchemaEnv(I)}compileAsync(O,V){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:I}=this.opts;return j.call(this,O,V);async function j(de,ye){await E.call(this,de.$schema);const De=this._addSchema(de,ye);return De.validate||S.call(this,De)}async function E(de){de&&!this.getSchema(de)&&await j.call(this,{$ref:de},!0)}async function S(de){try{return this._compileSchemaEnv(de)}catch(ye){if(!(ye instanceof a.default))throw ye;return G.call(this,ye),await J.call(this,ye.missingSchema),S.call(this,de)}}function G({missingSchema:de,missingRef:ye}){if(this.refs[de])throw new Error(`AnySchema ${de} is loaded but ${ye} cannot be resolved`)}async function J(de){const ye=await he.call(this,de);this.refs[de]||await E.call(this,ye.$schema),this.refs[de]||this.addSchema(ye,de,V)}async function he(de){const ye=this._loading[de];if(ye)return ye;try{return await(this._loading[de]=I(de))}finally{delete this._loading[de]}}}addSchema(O,V,I,j=this.opts.validateSchema){if(Array.isArray(O)){for(const S of O)this.addSchema(S,void 0,I,j);return this}let E;if(typeof O=="object"){const{schemaId:S}=this.opts;if(E=O[S],E!==void 0&&typeof E!="string")throw new Error(`schema ${S} must be string`)}return V=(0,c.normalizeId)(V||E),this._checkUnique(V),this.schemas[V]=this._addSchema(O,I,V,j,!0),this}addMetaSchema(O,V,I=this.opts.validateSchema){return this.addSchema(O,V,!0,I),this}validateSchema(O,V){if(typeof O=="boolean")return!0;let I;if(I=O.$schema,I!==void 0&&typeof I!="string")throw new Error("$schema must be a string");if(I=I||this.opts.defaultMeta||this.defaultMeta(),!I)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const j=this.validate(I,O);if(!j&&V){const E="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(E);else throw new Error(E)}return j}getSchema(O){let V;for(;typeof(V=M.call(this,O))=="string";)O=V;if(V===void 0){const{schemaId:I}=this.opts,j=new o.SchemaEnv({schema:{},schemaId:I});if(V=o.resolveSchema.call(this,j,O),!V)return;this.refs[O]=V}return V.validate||this._compileSchemaEnv(V)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const V=M.call(this,O);return typeof V=="object"&&this._cache.delete(V.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const V=O;this._cache.delete(V);let I=O[this.opts.schemaId];return I&&(I=(0,c.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const V of O)this.addKeyword(V);return this}addKeyword(O,V){let I;if(typeof O=="string")I=O,typeof V=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),V.keyword=I);else if(typeof O=="object"&&V===void 0){if(V=O,I=V.keyword,Array.isArray(I)&&!I.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(A.call(this,I,V),!V)return(0,m.eachItem)(I,E=>H.call(this,E)),this;te.call(this,V);const j={...V,type:(0,d.getJSONTypes)(V.type),schemaType:(0,d.getJSONTypes)(V.schemaType)};return(0,m.eachItem)(I,j.type.length===0?E=>H.call(this,E,j):E=>j.type.forEach(S=>H.call(this,E,j,S))),this}getKeyword(O){const V=this.RULES.all[O];return typeof V=="object"?V.definition:!!V}removeKeyword(O){const{RULES:V}=this;delete V.keywords[O],delete V.all[O];for(const I of V.rules){const j=I.rules.findIndex(E=>E.keyword===O);j>=0&&I.rules.splice(j,1)}return this}addFormat(O,V){return typeof V=="string"&&(V=new RegExp(V)),this.formats[O]=V,this}errorsText(O=this.errors,{separator:V=", ",dataVar:I="data"}={}){return!O||O.length===0?"No errors":O.map(j=>`${I}${j.instancePath} ${j.message}`).reduce((j,E)=>j+V+E)}$dataMetaSchema(O,V){const I=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const j of V){const E=j.split("/").slice(1);let S=O;for(const G of E)S=S[G];for(const G in I){const J=I[G];if(typeof J!="object")continue;const{$data:he}=J.definition,de=S[G];he&&de&&(S[G]=q(de))}}return O}_removeAllSchemas(O,V){for(const I in O){const j=O[I];(!V||V.test(I))&&(typeof j=="string"?delete O[I]:j&&!j.meta&&(this._cache.delete(j.schema),delete O[I]))}}_addSchema(O,V,I,j=this.opts.validateSchema,E=this.opts.addUsedSchema){let S;const{schemaId:G}=this.opts;if(typeof O=="object")S=O[G];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let J=this._cache.get(O);if(J!==void 0)return J;I=(0,c.normalizeId)(S||I);const he=c.getSchemaRefs.call(this,O,I);return J=new o.SchemaEnv({schema:O,schemaId:G,meta:V,baseId:I,localRefs:he}),this._cache.set(J.schema,J),E&&!I.startsWith("#")&&(I&&this._checkUnique(I),this.refs[I]=J),j&&this.validateSchema(O,!0),J}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):o.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const V=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,O)}finally{this.opts=V}}}C.ValidationError=s.default,C.MissingRefError=a.default,e.default=C;function $(U,O,V,I="error"){for(const j in U){const E=j;E in O&&this.logger[I](`${V}: option ${j}. ${U[E]}`)}}function M(U){return U=(0,c.normalizeId)(U),this.schemas[U]||this.refs[U]}function R(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const O in U)this.addSchema(U[O],O)}function _(){for(const U in this.opts.formats){const O=this.opts.formats[U];O&&this.addFormat(U,O)}}function k(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in U){const V=U[O];V.keyword||(V.keyword=O),this.addKeyword(V)}}function T(){const U={...this.opts};for(const O of p)delete U[O];return U}const w={log(){},warn(){},error(){}};function F(U){if(U===!1)return w;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const L=/^[a-z_$][a-z0-9_$:-]*$/i;function A(U,O){const{RULES:V}=this;if((0,m.eachItem)(U,I=>{if(V.keywords[I])throw new Error(`Keyword ${I} is already defined`);if(!L.test(I))throw new Error(`Keyword ${I} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function H(U,O,V){var I;const j=O==null?void 0:O.post;if(V&&j)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:E}=this;let S=j?E.post:E.rules.find(({type:J})=>J===V);if(S||(S={type:V,rules:[]},E.rules.push(S)),E.keywords[U]=!0,!O)return;const G={keyword:U,definition:{...O,type:(0,d.getJSONTypes)(O.type),schemaType:(0,d.getJSONTypes)(O.schemaType)}};O.before?ie.call(this,S,G,O.before):S.rules.push(G),E.all[U]=G,(I=O.implements)===null||I===void 0||I.forEach(J=>this.addKeyword(J))}function ie(U,O,V){const I=U.rules.findIndex(j=>j.keyword===V);I>=0?U.rules.splice(I,0,O):(U.rules.push(O),this.logger.warn(`rule ${V} is not defined`))}function te(U){let{metaSchema:O}=U;O!==void 0&&(U.$data&&this.opts.$data&&(O=q(O)),U.validateSchema=this.compile(O,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function q(U){return{anyOf:[U,z]}}})(Tx);var mm={},fm={},hm={};Object.defineProperty(hm,"__esModule",{value:!0});const h2={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};hm.default=h2;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.callRef=pr.getValidate=void 0;const p2=ma,Zh=je,Tt=be,jr=Mn,Xh=Lt,Yl=le,g2={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:s}=e,{baseId:a,schemaEnv:l,validateName:o,opts:i,self:c}=s,{root:d}=l;if((n==="#"||n==="#/")&&a===d.baseId)return f();const m=Xh.resolveRef.call(c,d,a,n);if(m===void 0)throw new p2.default(s.opts.uriResolver,a,n);if(m instanceof Xh.SchemaEnv)return h(m);return x(m);function f(){if(l===d)return vo(e,o,l,l.$async);const p=t.scopeValue("root",{ref:d});return vo(e,(0,Tt._)`${p}.validate`,d,d.$async)}function h(p){const y=wv(e,p);vo(e,y,p,p.$async)}function x(p){const y=t.scopeValue("schema",i.code.source===!0?{ref:p,code:(0,Tt.stringify)(p)}:{ref:p}),v=t.name("valid"),u=e.subschema({schema:p,dataTypes:[],schemaPath:Tt.nil,topSchemaRef:y,errSchemaPath:n},v);e.mergeEvaluated(u),e.ok(v)}}};function wv(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Tt._)`${n.scopeValue("wrapper",{ref:t})}.validate`}pr.getValidate=wv;function vo(e,t,n,s){const{gen:a,it:l}=e,{allErrors:o,schemaEnv:i,opts:c}=l,d=c.passContext?jr.default.this:Tt.nil;s?m():f();function m(){if(!i.$async)throw new Error("async schema referenced by sync schema");const p=a.let("valid");a.try(()=>{a.code((0,Tt._)`await ${(0,Zh.callValidateCode)(e,t,d)}`),x(t),o||a.assign(p,!0)},y=>{a.if((0,Tt._)`!(${y} instanceof ${l.ValidationError})`,()=>a.throw(y)),h(y),o||a.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Zh.callValidateCode)(e,t,d),()=>x(t),()=>h(t))}function h(p){const y=(0,Tt._)`${p}.errors`;a.assign(jr.default.vErrors,(0,Tt._)`${jr.default.vErrors} === null ? ${y} : ${jr.default.vErrors}.concat(${y})`),a.assign(jr.default.errors,(0,Tt._)`${jr.default.vErrors}.length`)}function x(p){var y;if(!l.opts.unevaluated)return;const v=(y=n==null?void 0:n.validate)===null||y===void 0?void 0:y.evaluated;if(l.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(l.props=Yl.mergeEvaluated.props(a,v.props,l.props));else{const u=a.var("props",(0,Tt._)`${p}.evaluated.props`);l.props=Yl.mergeEvaluated.props(a,u,l.props,Tt.Name)}if(l.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(l.items=Yl.mergeEvaluated.items(a,v.items,l.items));else{const u=a.var("items",(0,Tt._)`${p}.evaluated.items`);l.items=Yl.mergeEvaluated.items(a,u,l.items,Tt.Name)}}}pr.callRef=vo;pr.default=g2;Object.defineProperty(fm,"__esModule",{value:!0});const x2=hm,v2=pr,y2=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",x2.default,v2.default];fm.default=y2;var pm={},gm={};Object.defineProperty(gm,"__esModule",{value:!0});const ti=be,gs=ti.operators,ni={maximum:{okStr:"<=",ok:gs.LTE,fail:gs.GT},minimum:{okStr:">=",ok:gs.GTE,fail:gs.LT},exclusiveMaximum:{okStr:"<",ok:gs.LT,fail:gs.GTE},exclusiveMinimum:{okStr:">",ok:gs.GT,fail:gs.LTE}},b2={message:({keyword:e,schemaCode:t})=>(0,ti.str)`must be ${ni[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ti._)`{comparison: ${ni[e].okStr}, limit: ${t}}`},_2={keyword:Object.keys(ni),type:"number",schemaType:"number",$data:!0,error:b2,code(e){const{keyword:t,data:n,schemaCode:s}=e;e.fail$data((0,ti._)`${n} ${ni[t].fail} ${s} || isNaN(${n})`)}};gm.default=_2;var xm={};Object.defineProperty(xm,"__esModule",{value:!0});const qa=be,j2={message:({schemaCode:e})=>(0,qa.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,qa._)`{multipleOf: ${e}}`},N2={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:j2,code(e){const{gen:t,data:n,schemaCode:s,it:a}=e,l=a.opts.multipleOfPrecision,o=t.let("res"),i=l?(0,qa._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${l}`:(0,qa._)`${o} !== parseInt(${o})`;e.fail$data((0,qa._)`(${s} === 0 || (${o} = ${n}/${s}, ${i}))`)}};xm.default=N2;var vm={},ym={};Object.defineProperty(ym,"__esModule",{value:!0});function Sv(e){const t=e.length;let n=0,s=0,a;for(;s<t;)n++,a=e.charCodeAt(s++),a>=55296&&a<=56319&&s<t&&(a=e.charCodeAt(s),(a&64512)===56320&&s++);return n}ym.default=Sv;Sv.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(vm,"__esModule",{value:!0});const Js=be,w2=le,S2=ym,k2={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Js.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Js._)`{limit: ${e}}`},C2={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:k2,code(e){const{keyword:t,data:n,schemaCode:s,it:a}=e,l=t==="maxLength"?Js.operators.GT:Js.operators.LT,o=a.opts.unicode===!1?(0,Js._)`${n}.length`:(0,Js._)`${(0,w2.useFunc)(e.gen,S2.default)}(${n})`;e.fail$data((0,Js._)`${o} ${l} ${s}`)}};vm.default=C2;var bm={};Object.defineProperty(bm,"__esModule",{value:!0});const E2=je,si=be,$2={message:({schemaCode:e})=>(0,si.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,si._)`{pattern: ${e}}`},P2={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:$2,code(e){const{data:t,$data:n,schema:s,schemaCode:a,it:l}=e,o=l.opts.unicodeRegExp?"u":"",i=n?(0,si._)`(new RegExp(${a}, ${o}))`:(0,E2.usePattern)(e,s);e.fail$data((0,si._)`!${i}.test(${t})`)}};bm.default=P2;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});const Ba=be,O2={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Ba.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Ba._)`{limit: ${e}}`},R2={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:O2,code(e){const{keyword:t,data:n,schemaCode:s}=e,a=t==="maxProperties"?Ba.operators.GT:Ba.operators.LT;e.fail$data((0,Ba._)`Object.keys(${n}).length ${a} ${s}`)}};_m.default=R2;var jm={};Object.defineProperty(jm,"__esModule",{value:!0});const Sa=je,Ga=be,A2=le,T2={message:({params:{missingProperty:e}})=>(0,Ga.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Ga._)`{missingProperty: ${e}}`},I2={keyword:"required",type:"object",schemaType:"array",$data:!0,error:T2,code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:o}=e,{opts:i}=o;if(!l&&n.length===0)return;const c=n.length>=i.loopRequired;if(o.allErrors?d():m(),i.strictRequired){const x=e.parentSchema.properties,{definedProperties:p}=e.it;for(const y of n)if((x==null?void 0:x[y])===void 0&&!p.has(y)){const v=o.schemaEnv.baseId+o.errSchemaPath,u=`required property "${y}" is not defined at "${v}" (strictRequired)`;(0,A2.checkStrictMode)(o,u,o.opts.strictRequired)}}function d(){if(c||l)e.block$data(Ga.nil,f);else for(const x of n)(0,Sa.checkReportMissingProp)(e,x)}function m(){const x=t.let("missing");if(c||l){const p=t.let("valid",!0);e.block$data(p,()=>h(x,p)),e.ok(p)}else t.if((0,Sa.checkMissingProp)(e,n,x)),(0,Sa.reportMissingProp)(e,x),t.else()}function f(){t.forOf("prop",s,x=>{e.setParams({missingProperty:x}),t.if((0,Sa.noPropertyInData)(t,a,x,i.ownProperties),()=>e.error())})}function h(x,p){e.setParams({missingProperty:x}),t.forOf(x,s,()=>{t.assign(p,(0,Sa.propertyInData)(t,a,x,i.ownProperties)),t.if((0,Ga.not)(p),()=>{e.error(),t.break()})},Ga.nil)}}};jm.default=I2;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});const Wa=be,L2={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Wa.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Wa._)`{limit: ${e}}`},M2={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:L2,code(e){const{keyword:t,data:n,schemaCode:s}=e,a=t==="maxItems"?Wa.operators.GT:Wa.operators.LT;e.fail$data((0,Wa._)`${n}.length ${a} ${s}`)}};Nm.default=M2;var wm={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});const kv=Qx;kv.code='require("ajv/dist/runtime/equal").default';Cl.default=kv;Object.defineProperty(wm,"__esModule",{value:!0});const jc=Ze,at=be,D2=le,F2=Cl,z2={message:({params:{i:e,j:t}})=>(0,at.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,at._)`{i: ${e}, j: ${t}}`},V2={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:z2,code(e){const{gen:t,data:n,$data:s,schema:a,parentSchema:l,schemaCode:o,it:i}=e;if(!s&&!a)return;const c=t.let("valid"),d=l.items?(0,jc.getSchemaTypes)(l.items):[];e.block$data(c,m,(0,at._)`${o} === false`),e.ok(c);function m(){const p=t.let("i",(0,at._)`${n}.length`),y=t.let("j");e.setParams({i:p,j:y}),t.assign(c,!0),t.if((0,at._)`${p} > 1`,()=>(f()?h:x)(p,y))}function f(){return d.length>0&&!d.some(p=>p==="object"||p==="array")}function h(p,y){const v=t.name("item"),u=(0,jc.checkDataTypes)(d,v,i.opts.strictNumbers,jc.DataType.Wrong),g=t.const("indices",(0,at._)`{}`);t.for((0,at._)`;${p}--;`,()=>{t.let(v,(0,at._)`${n}[${p}]`),t.if(u,(0,at._)`continue`),d.length>1&&t.if((0,at._)`typeof ${v} == "string"`,(0,at._)`${v} += "_"`),t.if((0,at._)`typeof ${g}[${v}] == "number"`,()=>{t.assign(y,(0,at._)`${g}[${v}]`),e.error(),t.assign(c,!1).break()}).code((0,at._)`${g}[${v}] = ${p}`)})}function x(p,y){const v=(0,D2.useFunc)(t,F2.default),u=t.name("outer");t.label(u).for((0,at._)`;${p}--;`,()=>t.for((0,at._)`${y} = ${p}; ${y}--;`,()=>t.if((0,at._)`${v}(${n}[${p}], ${n}[${y}])`,()=>{e.error(),t.assign(c,!1).break(u)})))}}};wm.default=V2;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});const Uu=be,U2=le,H2=Cl,q2={message:"must be equal to constant",params:({schemaCode:e})=>(0,Uu._)`{allowedValue: ${e}}`},B2={keyword:"const",$data:!0,error:q2,code(e){const{gen:t,data:n,$data:s,schemaCode:a,schema:l}=e;s||l&&typeof l=="object"?e.fail$data((0,Uu._)`!${(0,U2.useFunc)(t,H2.default)}(${n}, ${a})`):e.fail((0,Uu._)`${l} !== ${n}`)}};Sm.default=B2;var km={};Object.defineProperty(km,"__esModule",{value:!0});const Aa=be,G2=le,W2=Cl,K2={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Aa._)`{allowedValues: ${e}}`},Y2={keyword:"enum",schemaType:"array",$data:!0,error:K2,code(e){const{gen:t,data:n,$data:s,schema:a,schemaCode:l,it:o}=e;if(!s&&a.length===0)throw new Error("enum must have non-empty array");const i=a.length>=o.opts.loopEnum;let c;const d=()=>c??(c=(0,G2.useFunc)(t,W2.default));let m;if(i||s)m=t.let("valid"),e.block$data(m,f);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const x=t.const("vSchema",l);m=(0,Aa.or)(...a.map((p,y)=>h(x,y)))}e.pass(m);function f(){t.assign(m,!1),t.forOf("v",l,x=>t.if((0,Aa._)`${d()}(${n}, ${x})`,()=>t.assign(m,!0).break()))}function h(x,p){const y=a[p];return typeof y=="object"&&y!==null?(0,Aa._)`${d()}(${n}, ${x}[${p}])`:(0,Aa._)`${n} === ${y}`}}};km.default=Y2;Object.defineProperty(pm,"__esModule",{value:!0});const Q2=gm,J2=xm,Z2=vm,X2=bm,eC=_m,tC=jm,nC=Nm,sC=wm,rC=Sm,aC=km,lC=[Q2.default,J2.default,Z2.default,X2.default,eC.default,tC.default,nC.default,sC.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},rC.default,aC.default];pm.default=lC;var Cm={},fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.validateAdditionalItems=void 0;const Zs=be,Hu=le,oC={message:({params:{len:e}})=>(0,Zs.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Zs._)`{limit: ${e}}`},iC={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:oC,code(e){const{parentSchema:t,it:n}=e,{items:s}=t;if(!Array.isArray(s)){(0,Hu.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Cv(e,s)}};function Cv(e,t){const{gen:n,schema:s,data:a,keyword:l,it:o}=e;o.items=!0;const i=n.const("len",(0,Zs._)`${a}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,Zs._)`${i} <= ${t.length}`);else if(typeof s=="object"&&!(0,Hu.alwaysValidSchema)(o,s)){const d=n.var("valid",(0,Zs._)`${i} <= ${t.length}`);n.if((0,Zs.not)(d),()=>c(d)),e.ok(d)}function c(d){n.forRange("i",t.length,i,m=>{e.subschema({keyword:l,dataProp:m,dataPropType:Hu.Type.Num},d),o.allErrors||n.if((0,Zs.not)(d),()=>n.break())})}}fa.validateAdditionalItems=Cv;fa.default=iC;var Em={},ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.validateTuple=void 0;const ep=be,yo=le,cC=je,uC={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Ev(e,"additionalItems",t);n.items=!0,!(0,yo.alwaysValidSchema)(n,t)&&e.ok((0,cC.validateArray)(e))}};function Ev(e,t,n=e.schema){const{gen:s,parentSchema:a,data:l,keyword:o,it:i}=e;m(a),i.opts.unevaluated&&n.length&&i.items!==!0&&(i.items=yo.mergeEvaluated.items(s,n.length,i.items));const c=s.name("valid"),d=s.const("len",(0,ep._)`${l}.length`);n.forEach((f,h)=>{(0,yo.alwaysValidSchema)(i,f)||(s.if((0,ep._)`${d} > ${h}`,()=>e.subschema({keyword:o,schemaProp:h,dataProp:h},c)),e.ok(c))});function m(f){const{opts:h,errSchemaPath:x}=i,p=n.length,y=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(h.strictTuples&&!y){const v=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${x}"`;(0,yo.checkStrictMode)(i,v,h.strictTuples)}}}ha.validateTuple=Ev;ha.default=uC;Object.defineProperty(Em,"__esModule",{value:!0});const dC=ha,mC={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,dC.validateTuple)(e,"items")};Em.default=mC;var $m={};Object.defineProperty($m,"__esModule",{value:!0});const tp=be,fC=le,hC=je,pC=fa,gC={message:({params:{len:e}})=>(0,tp.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,tp._)`{limit: ${e}}`},xC={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:gC,code(e){const{schema:t,parentSchema:n,it:s}=e,{prefixItems:a}=n;s.items=!0,!(0,fC.alwaysValidSchema)(s,t)&&(a?(0,pC.validateAdditionalItems)(e,a):e.ok((0,hC.validateArray)(e)))}};$m.default=xC;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});const Jt=be,Ql=le,vC={message:({params:{min:e,max:t}})=>t===void 0?(0,Jt.str)`must contain at least ${e} valid item(s)`:(0,Jt.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Jt._)`{minContains: ${e}}`:(0,Jt._)`{minContains: ${e}, maxContains: ${t}}`},yC={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:vC,code(e){const{gen:t,schema:n,parentSchema:s,data:a,it:l}=e;let o,i;const{minContains:c,maxContains:d}=s;l.opts.next?(o=c===void 0?1:c,i=d):o=1;const m=t.const("len",(0,Jt._)`${a}.length`);if(e.setParams({min:o,max:i}),i===void 0&&o===0){(0,Ql.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(i!==void 0&&o>i){(0,Ql.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Ql.alwaysValidSchema)(l,n)){let y=(0,Jt._)`${m} >= ${o}`;i!==void 0&&(y=(0,Jt._)`${y} && ${m} <= ${i}`),e.pass(y);return}l.items=!0;const f=t.name("valid");i===void 0&&o===1?x(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),i!==void 0&&t.if((0,Jt._)`${a}.length > 0`,h)):(t.let(f,!1),h()),e.result(f,()=>e.reset());function h(){const y=t.name("_valid"),v=t.let("count",0);x(y,()=>t.if(y,()=>p(v)))}function x(y,v){t.forRange("i",0,m,u=>{e.subschema({keyword:"contains",dataProp:u,dataPropType:Ql.Type.Num,compositeRule:!0},y),v()})}function p(y){t.code((0,Jt._)`${y}++`),i===void 0?t.if((0,Jt._)`${y} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Jt._)`${y} > ${i}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Jt._)`${y} >= ${o}`,()=>t.assign(f,!0)))}}};Pm.default=yC;var $v={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=be,n=le,s=je;e.error={message:({params:{property:c,depsCount:d,deps:m}})=>{const f=d===1?"property":"properties";return(0,t.str)`must have ${f} ${m} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:m,missingProperty:f}})=>(0,t._)`{property: ${c},
    missingProperty: ${f},
    depsCount: ${d},
    deps: ${m}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(c){const[d,m]=l(c);o(c,d),i(c,m)}};function l({schema:c}){const d={},m={};for(const f in c){if(f==="__proto__")continue;const h=Array.isArray(c[f])?d:m;h[f]=c[f]}return[d,m]}function o(c,d=c.schema){const{gen:m,data:f,it:h}=c;if(Object.keys(d).length===0)return;const x=m.let("missing");for(const p in d){const y=d[p];if(y.length===0)continue;const v=(0,s.propertyInData)(m,f,p,h.opts.ownProperties);c.setParams({property:p,depsCount:y.length,deps:y.join(", ")}),h.allErrors?m.if(v,()=>{for(const u of y)(0,s.checkReportMissingProp)(c,u)}):(m.if((0,t._)`${v} && (${(0,s.checkMissingProp)(c,y,x)})`),(0,s.reportMissingProp)(c,x),m.else())}}e.validatePropertyDeps=o;function i(c,d=c.schema){const{gen:m,data:f,keyword:h,it:x}=c,p=m.name("valid");for(const y in d)(0,n.alwaysValidSchema)(x,d[y])||(m.if((0,s.propertyInData)(m,f,y,x.opts.ownProperties),()=>{const v=c.subschema({keyword:h,schemaProp:y},p);c.mergeValidEvaluated(v,p)},()=>m.var(p,!0)),c.ok(p))}e.validateSchemaDeps=i,e.default=a})($v);var Om={};Object.defineProperty(Om,"__esModule",{value:!0});const Pv=be,bC=le,_C={message:"property name must be valid",params:({params:e})=>(0,Pv._)`{propertyName: ${e.propertyName}}`},jC={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:_C,code(e){const{gen:t,schema:n,data:s,it:a}=e;if((0,bC.alwaysValidSchema)(a,n))return;const l=t.name("valid");t.forIn("key",s,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},l),t.if((0,Pv.not)(l),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(l)}};Om.default=jC;var $i={};Object.defineProperty($i,"__esModule",{value:!0});const Jl=je,mn=be,NC=Mn,Zl=le,wC={message:"must NOT have additional properties",params:({params:e})=>(0,mn._)`{additionalProperty: ${e.additionalProperty}}`},SC={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:wC,code(e){const{gen:t,schema:n,parentSchema:s,data:a,errsCount:l,it:o}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:i,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Zl.alwaysValidSchema)(o,n))return;const d=(0,Jl.allSchemaProperties)(s.properties),m=(0,Jl.allSchemaProperties)(s.patternProperties);f(),e.ok((0,mn._)`${l} === ${NC.default.errors}`);function f(){t.forIn("key",a,v=>{!d.length&&!m.length?p(v):t.if(h(v),()=>p(v))})}function h(v){let u;if(d.length>8){const g=(0,Zl.schemaRefOrVal)(o,s.properties,"properties");u=(0,Jl.isOwnProperty)(t,g,v)}else d.length?u=(0,mn.or)(...d.map(g=>(0,mn._)`${v} === ${g}`)):u=mn.nil;return m.length&&(u=(0,mn.or)(u,...m.map(g=>(0,mn._)`${(0,Jl.usePattern)(e,g)}.test(${v})`))),(0,mn.not)(u)}function x(v){t.code((0,mn._)`delete ${a}[${v}]`)}function p(v){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){x(v);return}if(n===!1){e.setParams({additionalProperty:v}),e.error(),i||t.break();return}if(typeof n=="object"&&!(0,Zl.alwaysValidSchema)(o,n)){const u=t.name("valid");c.removeAdditional==="failing"?(y(v,u,!1),t.if((0,mn.not)(u),()=>{e.reset(),x(v)})):(y(v,u),i||t.if((0,mn.not)(u),()=>t.break()))}}function y(v,u,g){const b={keyword:"additionalProperties",dataProp:v,dataPropType:Zl.Type.Str};g===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,u)}}};$i.default=SC;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});const kC=bn,np=je,Nc=le,sp=$i,CC={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:s,data:a,it:l}=e;l.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&sp.default.code(new kC.KeywordCxt(l,sp.default,"additionalProperties"));const o=(0,np.allSchemaProperties)(n);for(const f of o)l.definedProperties.add(f);l.opts.unevaluated&&o.length&&l.props!==!0&&(l.props=Nc.mergeEvaluated.props(t,(0,Nc.toHash)(o),l.props));const i=o.filter(f=>!(0,Nc.alwaysValidSchema)(l,n[f]));if(i.length===0)return;const c=t.name("valid");for(const f of i)d(f)?m(f):(t.if((0,np.propertyInData)(t,a,f,l.opts.ownProperties)),m(f),l.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function d(f){return l.opts.useDefaults&&!l.compositeRule&&n[f].default!==void 0}function m(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Rm.default=CC;var Am={};Object.defineProperty(Am,"__esModule",{value:!0});const rp=je,Xl=be,ap=le,lp=le,EC={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:s,parentSchema:a,it:l}=e,{opts:o}=l,i=(0,rp.allSchemaProperties)(n),c=i.filter(y=>(0,ap.alwaysValidSchema)(l,n[y]));if(i.length===0||c.length===i.length&&(!l.opts.unevaluated||l.props===!0))return;const d=o.strictSchema&&!o.allowMatchingProperties&&a.properties,m=t.name("valid");l.props!==!0&&!(l.props instanceof Xl.Name)&&(l.props=(0,lp.evaluatedPropsToName)(t,l.props));const{props:f}=l;h();function h(){for(const y of i)d&&x(y),l.allErrors?p(y):(t.var(m,!0),p(y),t.if(m))}function x(y){for(const v in d)new RegExp(y).test(v)&&(0,ap.checkStrictMode)(l,`property ${v} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){t.forIn("key",s,v=>{t.if((0,Xl._)`${(0,rp.usePattern)(e,y)}.test(${v})`,()=>{const u=c.includes(y);u||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:v,dataPropType:lp.Type.Str},m),l.opts.unevaluated&&f!==!0?t.assign((0,Xl._)`${f}[${v}]`,!0):!u&&!l.allErrors&&t.if((0,Xl.not)(m),()=>t.break())})})}}};Am.default=EC;var Tm={};Object.defineProperty(Tm,"__esModule",{value:!0});const $C=le,PC={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:s}=e;if((0,$C.alwaysValidSchema)(s,n)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Tm.default=PC;var Im={};Object.defineProperty(Im,"__esModule",{value:!0});const OC=je,RC={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:OC.validateUnion,error:{message:"must match a schema in anyOf"}};Im.default=RC;var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0});const bo=be,AC=le,TC={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,bo._)`{passingSchemas: ${e.passing}}`},IC={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:TC,code(e){const{gen:t,schema:n,parentSchema:s,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&s.discriminator)return;const l=n,o=t.let("valid",!1),i=t.let("passing",null),c=t.name("_valid");e.setParams({passing:i}),t.block(d),e.result(o,()=>e.reset(),()=>e.error(!0));function d(){l.forEach((m,f)=>{let h;(0,AC.alwaysValidSchema)(a,m)?t.var(c,!0):h=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,bo._)`${c} && ${o}`).assign(o,!1).assign(i,(0,bo._)`[${i}, ${f}]`).else(),t.if(c,()=>{t.assign(o,!0),t.assign(i,f),h&&e.mergeEvaluated(h,bo.Name)})})}}};Lm.default=IC;var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});const LC=le,MC={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const a=t.name("valid");n.forEach((l,o)=>{if((0,LC.alwaysValidSchema)(s,l))return;const i=e.subschema({keyword:"allOf",schemaProp:o},a);e.ok(a),e.mergeEvaluated(i)})}};Mm.default=MC;var Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});const ri=be,Ov=le,DC={message:({params:e})=>(0,ri.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ri._)`{failingKeyword: ${e.ifClause}}`},FC={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:DC,code(e){const{gen:t,parentSchema:n,it:s}=e;n.then===void 0&&n.else===void 0&&(0,Ov.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const a=op(s,"then"),l=op(s,"else");if(!a&&!l)return;const o=t.let("valid",!0),i=t.name("_valid");if(c(),e.reset(),a&&l){const m=t.let("ifClause");e.setParams({ifClause:m}),t.if(i,d("then",m),d("else",m))}else a?t.if(i,d("then")):t.if((0,ri.not)(i),d("else"));e.pass(o,()=>e.error(!0));function c(){const m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(m)}function d(m,f){return()=>{const h=e.subschema({keyword:m},i);t.assign(o,i),e.mergeValidEvaluated(h,o),f?t.assign(f,(0,ri._)`${m}`):e.setParams({ifClause:m})}}}};function op(e,t){const n=e.schema[t];return n!==void 0&&!(0,Ov.alwaysValidSchema)(e,n)}Dm.default=FC;var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});const zC=le,VC={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,zC.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Fm.default=VC;Object.defineProperty(Cm,"__esModule",{value:!0});const UC=fa,HC=Em,qC=ha,BC=$m,GC=Pm,WC=$v,KC=Om,YC=$i,QC=Rm,JC=Am,ZC=Tm,XC=Im,e4=Lm,t4=Mm,n4=Dm,s4=Fm;function r4(e=!1){const t=[ZC.default,XC.default,e4.default,t4.default,n4.default,s4.default,KC.default,YC.default,WC.default,QC.default,JC.default];return e?t.push(HC.default,BC.default):t.push(UC.default,qC.default),t.push(GC.default),t}Cm.default=r4;var zm={},Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});const Ge=be,a4={message:({schemaCode:e})=>(0,Ge.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ge._)`{format: ${e}}`},l4={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:a4,code(e,t){const{gen:n,data:s,$data:a,schema:l,schemaCode:o,it:i}=e,{opts:c,errSchemaPath:d,schemaEnv:m,self:f}=i;if(!c.validateFormats)return;a?h():x();function h(){const p=n.scopeValue("formats",{ref:f.formats,code:c.code.formats}),y=n.const("fDef",(0,Ge._)`${p}[${o}]`),v=n.let("fType"),u=n.let("format");n.if((0,Ge._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>n.assign(v,(0,Ge._)`${y}.type || "string"`).assign(u,(0,Ge._)`${y}.validate`),()=>n.assign(v,(0,Ge._)`"string"`).assign(u,y)),e.fail$data((0,Ge.or)(g(),b()));function g(){return c.strictSchema===!1?Ge.nil:(0,Ge._)`${o} && !${u}`}function b(){const C=m.$async?(0,Ge._)`(${y}.async ? await ${u}(${s}) : ${u}(${s}))`:(0,Ge._)`${u}(${s})`,$=(0,Ge._)`(typeof ${u} == "function" ? ${C} : ${u}.test(${s}))`;return(0,Ge._)`${u} && ${u} !== true && ${v} === ${t} && !${$}`}}function x(){const p=f.formats[l];if(!p){g();return}if(p===!0)return;const[y,v,u]=b(p);y===t&&e.pass(C());function g(){if(c.strictSchema===!1){f.logger.warn($());return}throw new Error($());function $(){return`unknown format "${l}" ignored in schema at path "${d}"`}}function b($){const M=$ instanceof RegExp?(0,Ge.regexpCode)($):c.code.formats?(0,Ge._)`${c.code.formats}${(0,Ge.getProperty)(l)}`:void 0,R=n.scopeValue("formats",{key:l,ref:$,code:M});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,Ge._)`${R}.validate`]:["string",$,R]}function C(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!m.$async)throw new Error("async format in sync schema");return(0,Ge._)`await ${u}(${s})`}return typeof v=="function"?(0,Ge._)`${u}(${s})`:(0,Ge._)`${u}.test(${s})`}}}};Vm.default=l4;Object.defineProperty(zm,"__esModule",{value:!0});const o4=Vm,i4=[o4.default];zm.default=i4;var ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.contentVocabulary=ia.metadataVocabulary=void 0;ia.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ia.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(mm,"__esModule",{value:!0});const c4=fm,u4=pm,d4=Cm,m4=zm,ip=ia,f4=[c4.default,u4.default,(0,d4.default)(),m4.default,ip.metadataVocabulary,ip.contentVocabulary];mm.default=f4;var Um={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.DiscrError=void 0;var cp;(function(e){e.Tag="tag",e.Mapping="mapping"})(cp||(Pi.DiscrError=cp={}));Object.defineProperty(Um,"__esModule",{value:!0});const Sr=be,qu=Pi,up=Lt,h4=ma,p4=le,g4={message:({params:{discrError:e,tagName:t}})=>e===qu.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Sr._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},x4={keyword:"discriminator",type:"object",schemaType:"object",error:g4,code(e){const{gen:t,data:n,schema:s,parentSchema:a,it:l}=e,{oneOf:o}=a;if(!l.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=s.propertyName;if(typeof i!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=t.let("valid",!1),d=t.const("tag",(0,Sr._)`${n}${(0,Sr.getProperty)(i)}`);t.if((0,Sr._)`typeof ${d} == "string"`,()=>m(),()=>e.error(!1,{discrError:qu.DiscrError.Tag,tag:d,tagName:i})),e.ok(c);function m(){const x=h();t.if(!1);for(const p in x)t.elseIf((0,Sr._)`${d} === ${p}`),t.assign(c,f(x[p]));t.else(),e.error(!1,{discrError:qu.DiscrError.Mapping,tag:d,tagName:i}),t.endIf()}function f(x){const p=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:x},p);return e.mergeEvaluated(y,Sr.Name),p}function h(){var x;const p={},y=u(a);let v=!0;for(let C=0;C<o.length;C++){let $=o[C];if($!=null&&$.$ref&&!(0,p4.schemaHasRulesButRef)($,l.self.RULES)){const R=$.$ref;if($=up.resolveRef.call(l.self,l.schemaEnv.root,l.baseId,R),$ instanceof up.SchemaEnv&&($=$.schema),$===void 0)throw new h4.default(l.opts.uriResolver,l.baseId,R)}const M=(x=$==null?void 0:$.properties)===null||x===void 0?void 0:x[i];if(typeof M!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);v=v&&(y||u($)),g(M,C)}if(!v)throw new Error(`discriminator: "${i}" must be required`);return p;function u({required:C}){return Array.isArray(C)&&C.includes(i)}function g(C,$){if(C.const)b(C.const,$);else if(C.enum)for(const M of C.enum)b(M,$);else throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`)}function b(C,$){if(typeof C!="string"||C in p)throw new Error(`discriminator: "${i}" values must be unique strings`);p[C]=$}}}};Um.default=x4;const v4="http://json-schema.org/draft-07/schema#",y4="http://json-schema.org/draft-07/schema#",b4="Core schema meta-schema",_4={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},j4=["object","boolean"],N4={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},w4={$schema:v4,$id:y4,title:b4,definitions:_4,type:j4,properties:N4,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Tx,s=mm,a=Um,l=w4,o=["/properties"],i="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(l,o):l;this.addMetaSchema(p,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=bn;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var m=be;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return m.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return m.CodeGen}});var f=kl;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var h=ma;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(Mu,Mu.exports);var Rv=Mu.exports;const S4=ai(Rv);var Bu={exports:{}},Av={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(w,F){return{validate:w,compare:F}}e.fullFormats={date:t(l,o),time:t(c(!0),d),"date-time":t(h(!0),x),"iso-time":t(c(),m),"iso-date-time":t(h(),p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:u,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:T,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:b,int32:{type:"number",validate:M},int64:{type:"number",validate:R},float:{type:"number",validate:_},double:{type:"number",validate:_},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,x),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,m),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function n(w){return w%4===0&&(w%100!==0||w%400===0)}const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function l(w){const F=s.exec(w);if(!F)return!1;const L=+F[1],A=+F[2],H=+F[3];return A>=1&&A<=12&&H>=1&&H<=(A===2&&n(L)?29:a[A])}function o(w,F){if(w&&F)return w>F?1:w<F?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(w){return function(L){const A=i.exec(L);if(!A)return!1;const H=+A[1],ie=+A[2],te=+A[3],z=A[4],q=A[5]==="-"?-1:1,U=+(A[6]||0),O=+(A[7]||0);if(U>23||O>59||w&&!z)return!1;if(H<=23&&ie<=59&&te<60)return!0;const V=ie-O*q,I=H-U*q-(V<0?1:0);return(I===23||I===-1)&&(V===59||V===-1)&&te<61}}function d(w,F){if(!(w&&F))return;const L=new Date("2020-01-01T"+w).valueOf(),A=new Date("2020-01-01T"+F).valueOf();if(L&&A)return L-A}function m(w,F){if(!(w&&F))return;const L=i.exec(w),A=i.exec(F);if(L&&A)return w=L[1]+L[2]+L[3],F=A[1]+A[2]+A[3],w>F?1:w<F?-1:0}const f=/t|\s/i;function h(w){const F=c(w);return function(A){const H=A.split(f);return H.length===2&&l(H[0])&&F(H[1])}}function x(w,F){if(!(w&&F))return;const L=new Date(w).valueOf(),A=new Date(F).valueOf();if(L&&A)return L-A}function p(w,F){if(!(w&&F))return;const[L,A]=w.split(f),[H,ie]=F.split(f),te=o(L,H);if(te!==void 0)return te||d(A,ie)}const y=/\/|:/,v=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function u(w){return y.test(w)&&v.test(w)}const g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function b(w){return g.lastIndex=0,g.test(w)}const C=-2147483648,$=2**31-1;function M(w){return Number.isInteger(w)&&w<=$&&w>=C}function R(w){return Number.isInteger(w)}function _(){return!0}const k=/[^\\]\\Z/;function T(w){if(k.test(w))return!1;try{return new RegExp(w),!0}catch{return!1}}})(Av);var Tv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Rv,n=be,s=n.operators,a={formatMaximum:{okStr:"<=",ok:s.LTE,fail:s.GT},formatMinimum:{okStr:">=",ok:s.GTE,fail:s.LT},formatExclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},formatExclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},l={message:({keyword:i,schemaCode:c})=>(0,n.str)`should be ${a[i].okStr} ${c}`,params:({keyword:i,schemaCode:c})=>(0,n._)`{comparison: ${a[i].okStr}, limit: ${c}}`};e.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:l,code(i){const{gen:c,data:d,schemaCode:m,keyword:f,it:h}=i,{opts:x,self:p}=h;if(!x.validateFormats)return;const y=new t.KeywordCxt(h,p.RULES.all.format.definition,"format");y.$data?v():u();function v(){const b=c.scopeValue("formats",{ref:p.formats,code:x.code.formats}),C=c.const("fmt",(0,n._)`${b}[${y.schemaCode}]`);i.fail$data((0,n.or)((0,n._)`typeof ${C} != "object"`,(0,n._)`${C} instanceof RegExp`,(0,n._)`typeof ${C}.compare != "function"`,g(C)))}function u(){const b=y.schema,C=p.formats[b];if(!C||C===!0)return;if(typeof C!="object"||C instanceof RegExp||typeof C.compare!="function")throw new Error(`"${f}": format "${b}" does not define "compare" function`);const $=c.scopeValue("formats",{key:b,ref:C,code:x.code.formats?(0,n._)`${x.code.formats}${(0,n.getProperty)(b)}`:void 0});i.fail$data(g($))}function g(b){return(0,n._)`${b}.compare(${d}, ${m}) ${a[f].fail} 0`}},dependencies:["format"]};const o=i=>(i.addKeyword(e.formatLimitDefinition),i);e.default=o})(Tv);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=Av,s=Tv,a=be,l=new a.Name("fullFormats"),o=new a.Name("fastFormats"),i=(d,m={keywords:!0})=>{if(Array.isArray(m))return c(d,m,n.fullFormats,l),d;const[f,h]=m.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,l],x=m.formats||n.formatNames;return c(d,x,f,h),m.keywords&&(0,s.default)(d),d};i.get=(d,m="full")=>{const h=(m==="fast"?n.fastFormats:n.fullFormats)[d];if(!h)throw new Error(`Unknown format "${d}"`);return h};function c(d,m,f,h){var x,p;(x=(p=d.opts.code).formats)!==null&&x!==void 0||(p.formats=(0,a._)`require("ajv-formats/dist/formats").${h}`);for(const y of m)d.addFormat(y,f[y])}e.exports=t=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})(Bu,Bu.exports);var k4=Bu.exports;const C4=ai(k4);let Nr=null,dp=!1,wc=null;async function Iv(){if(Nr&&dp)return Nr;Nr=new S4({allErrors:!0,verbose:!0,strict:!1}),C4(Nr);try{const e=await fetch("/model_config_schema.json");if(!e.ok)throw new Error(`Failed to load schema: ${e.statusText}`);const t=await e.json();Nr.addSchema(t,"dao-ai-config"),dp=!0,wc=null}catch(e){throw wc=e instanceof Error?e.message:"Failed to load schema",new Error(wc)}return Nr}function E4(e){return e?e.map(t=>({path:t.instancePath||"/",message:t.message||"Unknown validation error",keyword:t.keyword,params:t.params})):[]}function $4(e){const n=Zd(e).split(`
`).filter(s=>!s.startsWith("#")).join(`
`);return Qd.load(n)}async function mp(e){try{const t=await Iv(),n=$4(e),s=t.getSchema("dao-ai-config");return s?{valid:!!s(n),errors:E4(s.errors)}:{valid:!1,errors:[],schemaError:"Schema not loaded"}}catch(t){return{valid:!1,errors:[],schemaError:t instanceof Error?t.message:"Validation failed"}}}async function P4(){try{await Iv()}catch{}}function O4(e=500){const{config:t}=Ie(),[n,s]=D.useState(null),[a,l]=D.useState(!1),[o,i]=D.useState(!1),c=D.useRef(null);D.useEffect(()=>{P4().then(()=>{i(!0)})},[]),D.useEffect(()=>{if(o)return c.current&&clearTimeout(c.current),c.current=setTimeout(async()=>{l(!0);try{const m=await mp(t);s(m)}catch(m){s({valid:!1,errors:[],schemaError:m instanceof Error?m.message:"Validation failed"})}finally{l(!1)}},e),()=>{c.current&&clearTimeout(c.current)}},[t,o,e]);const d=D.useCallback(async()=>{l(!0);try{const m=await mp(t);return s(m),m}catch(m){const f={valid:!1,errors:[],schemaError:m instanceof Error?m.message:"Validation failed"};return s(f),f}finally{l(!1)}},[t]);return{validationResult:n,isValidating:a,schemaReady:o,validate:d,isValid:(n==null?void 0:n.valid)??null,errors:(n==null?void 0:n.errors)??[],schemaError:n==null?void 0:n.schemaError}}function R4(){const{config:e}=Ie(),[t,n]=D.useState(!1),[s,a]=D.useState(!0),{isValid:l,errors:o,schemaError:i,isValidating:c,schemaReady:d}=O4(800),m=Zd(e),f=async()=>{await navigator.clipboard.writeText(m),n(!0),setTimeout(()=>n(!1),2e3)},h=p=>p.split(`
`).map((y,v)=>{if(y.trim().startsWith("#"))return r.jsx("span",{className:"text-slate-500",children:y},v);const u=y.match(/^(\s*)([a-zA-Z_][a-zA-Z0-9_]*):(.*)$/);if(u){const[,g,b,C]=u;return r.jsxs("span",{children:[g,r.jsx("span",{className:"text-blue-400",children:b}),r.jsx("span",{className:"text-slate-400",children:":"}),r.jsx("span",{className:"text-emerald-400",children:C})]},v)}return y.trim().startsWith("-")?r.jsx("span",{className:"text-amber-400",children:y},v):r.jsx("span",{className:"text-slate-300",children:y},v)}),x=()=>d?c?r.jsxs("div",{className:"flex items-center space-x-2 text-slate-400",children:[r.jsx(tn,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{className:"text-xs",children:"Validating..."})]}):i?r.jsxs("div",{className:"flex items-center space-x-2 text-amber-400",children:[r.jsx(vu,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",title:i,children:"Schema error"})]}):l===!0?r.jsxs("div",{className:"flex items-center space-x-2 text-emerald-400",children:[r.jsx(D_,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs",children:"Valid"})]}):l===!1?r.jsxs("button",{onClick:()=>a(!s),className:"flex items-center space-x-2 text-red-400 hover:text-red-300 transition-colors",children:[r.jsx(Z_,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-xs",children:[o.length," error",o.length!==1?"s":""]}),s?r.jsx(Ni,{className:"w-3 h-3"}):r.jsx(Ls,{className:"w-3 h-3"})]}):null:r.jsxs("div",{className:"flex items-center space-x-2 text-slate-400",children:[r.jsx(tn,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{className:"text-xs",children:"Loading schema..."})]});return r.jsxs("div",{className:"h-full flex flex-col bg-slate-950",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Vd,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"YAML Preview"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[x(),r.jsx(Y,{variant:"ghost",size:"sm",onClick:f,children:t?r.jsxs(r.Fragment,{children:[r.jsx(zd,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"text-emerald-400",children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(V_,{className:"w-4 h-4"}),"Copy"]})})]})]}),l===!1&&s&&o.length>0&&r.jsx("div",{className:"border-b border-slate-800 bg-red-950/30 max-h-48 overflow-auto",children:r.jsx("div",{className:"px-4 py-2 space-y-1",children:o.map((p,y)=>r.jsxs("div",{className:"text-xs flex items-start space-x-2",children:[r.jsx("span",{className:"text-red-400 font-mono shrink-0",children:p.path||"/"}),r.jsx("span",{className:"text-red-300",children:p.message})]},y))})}),i&&r.jsxs("div",{className:"border-b border-slate-800 bg-amber-950/30 px-4 py-2",children:[r.jsxs("p",{className:"text-xs text-amber-400",children:[r.jsx("strong",{children:"Schema Error:"})," ",i]}),r.jsx("p",{className:"text-xs text-amber-500 mt-1",children:"Validation is unavailable. The YAML may still be valid."})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4",children:r.jsx("pre",{className:"code-block text-sm leading-relaxed",children:h(m).map((p,y)=>r.jsxs("div",{className:"hover:bg-slate-800/30 px-2 -mx-2",children:[r.jsx("span",{className:"inline-block w-8 text-right text-slate-600 mr-4 select-none",children:y+1}),p]},y))})}),r.jsx("div",{className:"px-4 py-3 border-t border-slate-800 bg-slate-900/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-xs text-slate-500",children:[m.split(`
`).length," lines  Auto-updates as you configure"]}),d&&!i&&r.jsx("p",{className:"text-xs text-slate-600",children:"Validated against dao-ai schema"})]})})]})}function eo({isOpen:e,onClose:t,onConfigured:n,autoDetectedHost:s,inDatabricksApp:a=!1,hasOboToken:l=!1,oauthInfo:o}){const[i,c]=D.useState(""),[d,m]=D.useState(""),[f,h]=D.useState(!1),[x,p]=D.useState(!1),[y,v]=D.useState(null),u=sr();D.useEffect(()=>{if(e){const _=sr();_?(c(_.host),m(_.token)):s&&c(s),v(null)}},[e,s]);const g=async()=>{if(d){h(!0),v(null);try{console.log("[DatabricksConfigModal] Testing manual token...");const _=await fetch("/api/auth/verify",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json","X-Databricks-Host":(i||s||"").replace(/\/$/,"")},credentials:"include"}),k=await _.json();if(console.log("[DatabricksConfigModal] Verify response:",k),k.authenticated&&k.user){const T=k.token_source==="manual"?"Personal Access Token":k.token_source==="obo"?"On-Behalf-Of User":k.token_source==="oauth"?"OAuth":k.token_source==="sdk"?"SDK Config":k.token_source==="env"?"Environment Variable":k.token_source;Pa({host:k.host||i||s||"",token:d,source:"manual"}),v({success:!0,message:`Connected as ${k.user.displayName||k.user.userName}`,tokenSource:T})}else{const T=k.error||k.message||k.help||`Connection failed (${_.status}): ${_.statusText||"Unknown error"}`;v({success:!1,message:T,requiredScopes:k.required_scopes})}}catch(_){const k=_ instanceof Error?`${_.name}: ${_.message}`:"Connection failed - unknown error";v({success:!1,message:k})}finally{h(!1)}}else{h(!0),v(null);try{const k=await(await fetch("/api/auth/verify",{credentials:"include"})).json();k.authenticated&&k.user?(Pa({host:k.host||s||"",token:`__${(k.token_source||"AUTO").toUpperCase()}_TOKEN__`,isAutoDetected:!0,source:k.token_source}),v({success:!0,message:`Connected as ${k.user.displayName||k.user.userName}`})):v({success:!1,message:k.error||k.help||"Authentication failed",requiredScopes:k.required_scopes})}catch(_){const k=_ instanceof Error?`${_.name}: ${_.message}`:"Connection failed - unknown error";v({success:!1,message:k})}finally{h(!1)}}},b=()=>{if(d)Pa({host:i||s||"",token:d,source:"manual"});else if(y!=null&&y.success){const _=sr();_&&Pa(_)}else return;n(),t()},C=async()=>{(u==null?void 0:u.source)==="oauth"&&await cj(),Fg(),c(s||""),m(""),v(null),n(),t()},$=async()=>{p(!0),v(null);try{const k=await ij(i||s||void 0);k.auth_url&&k.redirect?window.location.href=k.auth_url:k.error&&v({success:!1,message:k.message||k.error})}catch(_){v({success:!1,message:_ instanceof Error?_.message:"OAuth login failed"})}finally{p(!1)}},M=_=>{switch(_){case"oauth":return"OAuth";case"obo":return"On-Behalf-Of User";case"header":return"On-Behalf-Of User Auth";case"sdk":return"Databricks SDK Config";case"env":return"Environment Variables";case"manual":return"Manual Configuration";default:return"Unknown"}},R=_=>{switch(_){case"oauth":return wu;case"obo":case"header":return aa;case"sdk":case"env":return Bo;default:return Cu}};return r.jsx(Vs,{isOpen:e,onClose:t,title:"Databricks Connection",description:"Configure your Databricks workspace connection.",children:r.jsxs("div",{className:"space-y-4",children:[a&&l&&(u==null?void 0:u.source)==="obo"&&r.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(aa,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-blue-300 font-medium",children:"On-Behalf-Of User Authentication Active"}),r.jsx("p",{className:"text-blue-400/80 mt-1",children:"API calls are authenticated using your Databricks session. No manual token required."})]})]})}),a&&!l&&!u&&r.jsx("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(vu,{className:"w-5 h-5 text-amber-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-amber-300 font-medium",children:"On-Behalf-Of User Auth Not Enabled"}),r.jsx("p",{className:"text-amber-400/80 mt-1",children:"This app is running in Databricks but OBO auth is not enabled. You can still configure a Personal Access Token manually."})]})]})}),(u==null?void 0:u.isAutoDetected)&&u.source!=="obo"&&r.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[(()=>{const _=R(u.source);return r.jsx(_,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"})})(),r.jsxs("div",{className:"text-sm",children:[r.jsxs("p",{className:"text-green-300 font-medium",children:["Connected via ",M(u.source)]}),r.jsx("p",{className:"text-green-400/80 mt-1",children:u.source==="oauth"?"Authenticated via OAuth. Your session is secure.":u.source==="sdk"?"Using Databricks SDK Config (~/.databrickscfg or environment variables).":u.source==="env"?"Using DATABRICKS_HOST and DATABRICKS_TOKEN environment variables.":"Using X-Forwarded-Access-Token from Databricks App proxy."}),u.host&&r.jsxs("p",{className:"text-green-400/60 mt-1 font-mono text-xs",children:["Host: ",u.host]})]})]})}),(o==null?void 0:o.configured)&&!u&&r.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(wu,{className:"w-6 h-6 text-blue-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-blue-300 font-medium",children:"Login with Databricks"}),r.jsx("p",{className:"text-blue-400/80 text-sm mt-1",children:"Securely authenticate with OAuth to access Databricks APIs."}),o.scopes&&o.scopes.length>0&&r.jsxs("p",{className:"text-blue-400/60 text-xs mt-2",children:["Scopes: ",o.scopes.slice(0,3).join(", "),o.scopes.length>3&&` +${o.scopes.length-3} more`]})]})]}),r.jsx(Y,{type:"button",onClick:$,disabled:x||!i,className:"flex items-center space-x-2",children:x?"Redirecting...":r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"Login"}),r.jsx(U_,{className:"w-4 h-4"})]})})]})}),s&&!u&&r.jsx("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Cu,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-blue-300 font-medium",children:"Workspace Detected"}),r.jsxs("p",{className:"text-blue-400/80 mt-1",children:["Host auto-detected. Enter your Personal Access Token or set ",r.jsx("code",{className:"text-xs bg-blue-900/50 px-1 rounded",children:"DATABRICKS_TOKEN"})," env var."]})]})]})}),r.jsx(X,{label:"Workspace URL",placeholder:"https://your-workspace.cloud.databricks.com",value:i,onChange:_=>c(_.target.value),hint:s?"Auto-detected from URL (editable)":"Your Databricks workspace URL",required:!0}),r.jsx(X,{label:"Personal Access Token",type:"password",placeholder:"dapi...",value:d,onChange:_=>m(_.target.value),hint:"Or set DATABRICKS_TOKEN environment variable",required:!0}),!(u!=null&&u.isAutoDetected)&&r.jsx("div",{className:"p-3 rounded-lg bg-slate-800/50 border border-slate-700",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(vu,{className:"w-5 h-5 text-slate-400 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-slate-400",children:[r.jsx("p",{className:"font-medium text-slate-300",children:"Authentication Options"}),r.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside text-xs",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"On-behalf-of-user auth"})," - Automatic in Databricks Apps"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Personal Access Token"})," - Enter manually below"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Environment variable"})," - Set ",r.jsx("code",{className:"bg-slate-700 px-1 rounded",children:"DATABRICKS_TOKEN"})]})]}),r.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:[r.jsx("strong",{children:"Scope errors?"})," If using OBO auth, try signing out of Databricks and signing back in to re-authorize the app with updated scopes."]})]})]})}),y&&r.jsxs("div",{className:`p-3 rounded-lg text-sm ${y.success?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:y.message}),y.success&&y.tokenSource&&r.jsxs("span",{className:"text-xs bg-green-900/30 px-2 py-0.5 rounded",children:["via ",y.tokenSource]})]}),y.requiredScopes&&y.requiredScopes.length>0&&r.jsxs("div",{className:"mt-2 pt-2 border-t border-red-500/20",children:[r.jsx("p",{className:"font-medium mb-1",children:"Required scopes:"}),r.jsx("ul",{className:"list-disc list-inside text-xs space-y-0.5",children:y.requiredScopes.map(_=>r.jsx("li",{children:r.jsx("code",{className:"bg-red-900/30 px-1 rounded",children:_})},_))}),r.jsxs("p",{className:"mt-2 text-xs text-red-300/80",children:["Add these to ",r.jsx("code",{className:"bg-red-900/30 px-1 rounded",children:"user_api_scopes"})," in databricks.yml and redeploy."]})]})]}),r.jsxs("div",{className:"flex justify-between pt-4",children:[r.jsx(Y,{variant:"danger",type:"button",onClick:C,disabled:!sr(),children:"Disconnect"}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(Y,{variant:"secondary",type:"button",onClick:g,disabled:f||!d&&!l&&!a,children:f?"Testing...":"Test Connection"}),r.jsx(Y,{type:"button",onClick:b,disabled:!(y!=null&&y.success),children:"Save"})]})]}),r.jsx("div",{className:"pt-4 border-t border-slate-700",children:r.jsx("p",{className:"text-xs text-slate-500",children:"Credentials are stored in browser localStorage and sent only to your Databricks workspace."})})]})})}function A4(){const[e,t]=D.useState(!1),{detecting:n,detected:s,autoDetectedHost:a,inDatabricksApp:l,hasToken:o,oauthInfo:i,redetect:c}=hj(),{data:d,loading:m,error:f,refetch:h,configured:x}=pj(),p=D.useCallback(()=>{console.log("[ConnectionStatus] Config changed, re-detecting and refetching..."),c(),h()},[h,c]);if(D.useEffect(()=>{!n&&s&&h()},[n,s,h]),n)return r.jsxs("div",{className:"flex items-center space-x-2 text-slate-400",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),r.jsx("span",{className:"text-sm",children:"Detecting..."})]});if(!x)return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 text-slate-400 hover:text-white transition-colors",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-500"}),r.jsx("span",{className:"text-sm",children:a?"Token required":"Not connected"}),r.jsx(nr,{className:"w-4 h-4"})]}),r.jsx(eo,{isOpen:e,onClose:()=>t(!1),onConfigured:p,autoDetectedHost:a,oauthInfo:i})]});if(m)return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 text-slate-400",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),r.jsx("span",{className:"text-sm",children:"Connecting..."}),r.jsx(nr,{className:"w-4 h-4"})]}),r.jsx(eo,{isOpen:e,onClose:()=>t(!1),onConfigured:p,autoDetectedHost:a,oauthInfo:i})]});if(f||!(d!=null&&d.connected))return console.log("[ConnectionStatus] Showing failed state - error:",f,"status:",d),r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 text-red-400 hover:text-red-300 transition-colors",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),r.jsxs("span",{className:"text-sm",children:["Connection failed",d!=null&&d.error?`: ${d.error}`:""]}),r.jsx(nr,{className:"w-4 h-4"})]}),r.jsx(eo,{isOpen:e,onClose:()=>t(!1),onConfigured:p,autoDetectedHost:a,oauthInfo:i})]});const y=d.source==="oauth"?"OAuth":d.source==="obo"?"On-Behalf-Of User":d.source==="sdk"?"SDK Config":d.source==="env"?"Environment":"Manual",u=d.source==="oauth"?wu:d.source==="obo"?aa:Cu;return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>t(!0),className:"flex items-center space-x-2 hover:bg-slate-800 px-2 py-1 rounded transition-colors",title:`Connected via ${y} authentication`,children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),d.isAutoDetected&&r.jsx(u,{className:`w-3 h-3 ${d.source==="obo"?"text-blue-400":"text-yellow-400"}`}),r.jsx("span",{className:"text-sm text-slate-300",children:r.jsx("span",{className:"text-white font-medium",children:d.display_name||d.user})}),r.jsx(nr,{className:"w-4 h-4 text-slate-500"})]}),r.jsx(eo,{isOpen:e,onClose:()=>t(!1),onConfigured:p,autoDetectedHost:a,inDatabricksApp:l,hasOboToken:o,oauthInfo:i})]})}function T4({showPreview:e,onTogglePreview:t}){const{config:n,setConfig:s,reset:a}=Ie(),l=D.useRef(null),[o,i]=D.useState(null);D.useEffect(()=>{fetch("/api/version").then(f=>f.json()).then(f=>i(f.dao_ai)).catch(()=>i(null))},[]);const c=()=>{var h;const f=((h=n.app)==null?void 0:h.name)||"model_config";Mw(n,`${f}.yaml`)},d=f=>{var p;const h=(p=f.target.files)==null?void 0:p[0];if(!h)return;const x=new FileReader;x.onload=y=>{var v;try{const u=(v=y.target)==null?void 0:v.result,g=Ew(u);$w(g),console.log("[Import] Extracted YAML references:",g);const b=Qd.load(u);s(b)}catch(u){console.error("Failed to parse YAML:",u),alert("Failed to parse YAML file. Please check the format.")}},x.readAsText(h),l.current&&(l.current.value="")},m=()=>{confirm("Are you sure you want to reset all configuration? This cannot be undone.")&&(Ow(),a())};return r.jsxs("header",{className:"h-16 bg-slate-900 border-b border-slate-800 px-6 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/20",children:r.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h1",{className:"text-lg font-bold text-white",children:"DAO AI Builder"}),o&&r.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-slate-700 text-slate-400 rounded",children:["v",o]})]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Agent Configuration Studio"})]})]})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(A4,{}),r.jsx("div",{className:"w-px h-6 bg-slate-700"}),r.jsx("input",{ref:l,type:"file",accept:".yaml,.yml",onChange:d,className:"hidden"}),r.jsxs(Y,{variant:"ghost",size:"sm",onClick:()=>{var f;return(f=l.current)==null?void 0:f.click()},children:[r.jsx(J_,{className:"w-4 h-4"}),"Import"]}),r.jsxs(Y,{variant:"ghost",size:"sm",onClick:m,children:[r.jsx(Y_,{className:"w-4 h-4"}),"Reset"]}),r.jsx("div",{className:"w-px h-6 bg-slate-700"}),r.jsxs(Y,{variant:"secondary",size:"sm",onClick:t,children:[e?r.jsx(H_,{className:"w-4 h-4"}):r.jsx(q_,{className:"w-4 h-4"}),e?"Hide":"Show"," Preview"]}),r.jsxs(Y,{variant:"primary",size:"sm",onClick:c,children:[r.jsx(Rg,{className:"w-4 h-4"}),"Export YAML"]})]})]})}function I4(){const[e,t]=D.useState("overview"),[n,s]=D.useState(!0),{config:a}=Ie();return r.jsxs("div",{className:"h-screen flex flex-col bg-slate-900",children:[r.jsx(T4,{showPreview:n,onTogglePreview:()=>s(!n)}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx(X_,{activeSection:e,onSectionChange:t,config:a}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsx("div",{className:`flex-1 overflow-hidden ${n?"border-r border-slate-800":""}`,children:r.jsx(iN,{activeSection:e,onNavigate:t})}),n&&r.jsx("div",{className:"w-[500px] overflow-hidden",children:r.jsx(R4,{})})]})]})]})}Sc.createRoot(document.getElementById("root")).render(r.jsx(Np.StrictMode,{children:r.jsx(I4,{})}));
//# sourceMappingURL=index-Cg4WIWKG.js.map
